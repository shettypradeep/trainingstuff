From users-return-136315-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu May  1 19:26:00 2014
Return-Path: <users-return-136315-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DF52610ABC
	for <apmail-maven-users-archive@www.apache.org>; Thu,  1 May 2014 19:26:00 +0000 (UTC)
Received: (qmail 79627 invoked by uid 500); 1 May 2014 19:25:57 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 79523 invoked by uid 500); 1 May 2014 19:25:57 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 79515 invoked by uid 99); 1 May 2014 19:25:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 May 2014 19:25:56 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [209.85.223.180] (HELO mail-ie0-f180.google.com) (209.85.223.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 May 2014 19:25:52 +0000
Received: by mail-ie0-f180.google.com with SMTP id as1so4026638iec.11
        for <users@maven.apache.org>; Thu, 01 May 2014 12:25:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:date:message-id:subject
         :from:to:content-type;
        bh=bZQwMQ+9R2pwl9Ny4auqm08Ab/LMkuG0OyOAqdxQ30M=;
        b=wiZt2IgDuI5OMfzyo1n916VpE11wxtyHGEJuLeEedb6/3cc81a7k+sBoJelD5JVeEN
         CXD1iNpBNkDRkB2oZlhiHcQU8UpJg4iYZNxcZ+bHwHMlV4oxr5Qy3YHI+H+074a/UbGQ
         uMYaJW1acopUBHLzjL1b2wEpp87ViIB/Keo2lrz10+fltdq6hn3PUuNdxgUKt7yb5T58
         lR0DrnHRIYGz7zwRFDFVDjNvnheTc7DxcS8OyWGBRh78EDfqB3w7LYC09P7C2Cose09I
         9vROtrYkOER+jtNnAAYNGIvFeulIAHPbmG2HCgCy7vdDGNt8nCSXs06+ln+vu0I87fzG
         4c1g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:sender:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=bZQwMQ+9R2pwl9Ny4auqm08Ab/LMkuG0OyOAqdxQ30M=;
        b=O4SUB8WMDd1cQsgAURIij8TzIzzu52DToJ8qBRefSE7uWEkhLmRACBzss1HRK9cPju
         H442PfDCZ8j42aC0yeyCoIWQXC5FWa5EnGavmVFWGfTCoAThJ25LdJxE46DGPn7cwL1p
         2NqLChvcVBr2ldW3NlAmimZxPOnzBoHCZ7zTgrwusWAZkgg1QwRl1HmBZPgkzO0OR8YZ
         u5u7ctvhkD93rEJeMGt40nn2UOw4xtf+dH6ZjW22f2ztkPwiqyHhUlFZ0pZhXCCxwu8J
         eC4dF/7XyQDMtj6n62ORWktBKlhjGCaO/67m5Tkz1suiVYFOOYP3rF1jrEVpU1HSERVB
         sHIw==
X-Gm-Message-State: ALoCoQmNWyYkG4/oRiYWZ80pIBzyyaUedRWip23Zi2mE9GUW4jUgAN5XWtCpt6F2vPPqXQ7C7VHe
MIME-Version: 1.0
X-Received: by 10.50.112.202 with SMTP id is10mr5450863igb.7.1398972331785;
 Thu, 01 May 2014 12:25:31 -0700 (PDT)
Sender: kristian.rosenvold@zenior.no
Received: by 10.50.3.70 with HTTP; Thu, 1 May 2014 12:25:31 -0700 (PDT)
In-Reply-To: <CAJGYKdP1gZa=XNV=ua0j_4TUDT+ZODSWN4XAoe1XWckqxr-v9A@mail.gmail.com>
References: <CAJGYKdP1gZa=XNV=ua0j_4TUDT+ZODSWN4XAoe1XWckqxr-v9A@mail.gmail.com>
Date: Thu, 1 May 2014 21:25:31 +0200
X-Google-Sender-Auth: -y97gsLEFiGAnB3iRfq0kzX9Djo
Message-ID: <CAJZRQKwHfXKY7VBjah+K1tdcwBxw=VyEH59VL71GyVWci2kr+g@mail.gmail.com>
Subject: Re: dependency plugin fails with >9 threads
From: Kristian Rosenvold <kristian.rosenvold@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=047d7b3398c9e319cc04f85ba007
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b3398c9e319cc04f85ba007
Content-Type: text/plain; charset=UTF-8

It turns out dependency plugin is using an old version of doxia (version
1.0, latest released is 1.4) that has known thread safety issues. You
*might* be able to work around this by adding the following dependencies to
the dependency-plugin in your pom:

    <dependency>
      <groupId>org.apache.maven.doxia</groupId>
      <artifactId>doxia-sink-api</artifactId>
      <version>1.4</version>
    </dependency>
    <dependency>
      <groupId>org.apache.maven.doxia</groupId>
      <artifactId>doxia-site-renderer</artifactId>
      <version>1.4</version>
    </dependency>

See
http://blog.sonatype.com/2008/04/how-to-override-a-plugins-dependency-in-mavenif
you're unfamiliar about how to do this. this might work, but might
also
bug out due to some incompatibility between 1.0 and 1.4 of doxia, I did not
try.



Please file an issue under http://jira.codehaus.org/browse/MDEP


Kristian



2014-05-01 16:00 GMT+02:00 Anthony Clark <anthonyclarka2@gmail.com>:

> Hi All,
>
> I'm trying to improve our build by using parallel threads (i.e. mvn -T #)
>
> Unfortunately I'm running into an error when I try to use more than 9
> threads on this 24 core server:
>
> [ERROR] Failed to execute goal
> org.apache.maven.plugins:maven-dependency-plugin:2.8:analyze-report
> (analyze-report)
>  on project enterprise-provided: An error has occurred in Dependency
> Analysis report generation. Could not find the
>  template 'org/apache/maven/doxia/siterenderer/resources/default-site.vm ->
> [Help 1]
> org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute
> goal org.apache.maven.plugins:maven-depen
> dency-plugin:2.8:analyze-report (analyze-report) on project
> enterprise-provided: An error has occurred in Dependenc
> y Analysis report generation.
>         at
>
> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)
>         at
>
> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
>         at
>
> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
>         at
>
> org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:108)
>         at
>
> org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call(MultiThreadedBuild
> er.java:188)
>         at
>
> org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call(MultiThreadedBuild
> er.java:184)
>         at java.util.concurrent.FutureTask.run(FutureTask.java:262)
>         at
> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
>         at java.util.concurrent.FutureTask.run(FutureTask.java:262)
>         at
>
> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
>         at
>
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
>         at java.lang.Thread.run(Thread.java:745)
> Caused by: org.apache.maven.plugin.MojoExecutionException: An error has
> occurred in Dependency Analysis report gene
> ration.
>         at
>
> org.apache.maven.reporting.AbstractMavenReport.execute(AbstractMavenReport.java:106)
>         at
>
> org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:133)
>         at
>
> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
>         ... 11 more
> Caused by: org.apache.maven.doxia.siterenderer.RendererException: Could not
> find the template
> 'org/apache/maven/doxia/siterenderer/resources/default-site.vm
>         at
>
> org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.processTemplate(DefaultSiteRenderer.java:537)
>         at
>
> org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.writeTemplate(DefaultSiteRenderer.java:508)
>         at
>
> org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.generateDocument(DefaultSiteRenderer.java:485)
>         at
>
> org.apache.maven.reporting.AbstractMavenReport.execute(AbstractMavenReport.java:97)
>         ... 13 more
> [INFO] No sources to compile
>
> Has anyone run into this before?  I searched the JIRA for the dependency
> plugin and didn't find anything related to this.
>
> Thanks,
>
> Anthony Clark (sysadmin tasked with improving a build!)
>

--047d7b3398c9e319cc04f85ba007--

