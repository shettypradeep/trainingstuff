From users-return-136328-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Mon May  5 08:46:55 2014
Return-Path: <users-return-136328-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 67C151117D
	for <apmail-maven-users-archive@www.apache.org>; Mon,  5 May 2014 08:46:55 +0000 (UTC)
Received: (qmail 30310 invoked by uid 500); 5 May 2014 08:46:49 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 29992 invoked by uid 500); 5 May 2014 08:46:48 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 29971 invoked by uid 99); 5 May 2014 08:46:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 May 2014 08:46:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [88.116.248.50] (HELO sartre.xss.co.at) (88.116.248.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 May 2014 08:46:42 +0000
Received: from goethe.intern.xss.co.at (goethe.intern.xss.co.at [192.168.162.10])
	by sartre.xss.co.at (8.14.3/8.14.3) with ESMTP id s458kKwj000975
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <users@maven.apache.org>; Mon, 5 May 2014 10:46:20 +0200
Received: from dyn251.intern.xss.co.at (dyn251.intern.xss.co.at [192.168.162.251])
	by goethe.intern.xss.co.at (8.13.8/8.13.8) with ESMTP id s458kKDt002626
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES128-SHA bits=128 verify=NO)
	for <users@maven.apache.org>; Mon, 5 May 2014 10:46:20 +0200
Date: Mon, 5 May 2014 10:46:16 +0200
From: Martin Hoeller <martin@xss.co.at>
To: users@maven.apache.org
Subject: bug in maven-ear-plugin with skinny war?
Message-ID: <20140505104616.6e0748da@dyn251.intern.xss.co.at>
X-Mailer: Claws Mail 3.8.1 (GTK+ 2.24.10; x86_64-suse-linux-gnu)
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=PGP-SHA1;
 boundary="Sig_/FgzzEqwUkJ5=02vVvVc6/Vi"; protocol="application/pgp-signature"
X-Virus-Checked: Checked by ClamAV on apache.org

--Sig_/FgzzEqwUkJ5=02vVvVc6/Vi
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable

Hi!

I see strange behavior when using the maven EAR plugin with the
skinnyWar [1] feature, which might be a bug.

Here is the (simplified) module-structure I have:

core
  +-- core-shared

web
  +-- backend
  +-- war

ee
  +-- ear

Usually all modules share the same version (let's say 1.0) number. My
"ear" module includes a skinny version of the war module, "core-shared"
and some other 3rd-party dependencies. This works fine.

However, when I update all modules to version 2.0-SNAPSHOT but keep the
dependency on the "war" in the "ear" to version 1.0, the skinny war is
no longer skinny. Instead the "war" 1.0 in the "ear" contains
"core-shared" 1.0 dependency but the "ear" contains core-shared
2.0-SNAPSHOT. Thus, the dependency is included twice with different
versions.

IMHO the EAR plugin doesn't respect artifact's version information
when removing JARs from the skinny war, but only removes JARs that
match exactly (including version string). I'd consider this a bug. Or
at least a missing feature in the EAR plugin.

What do others think? Should I create a JIRA entry?

thx,
- martin

[1] http://maven.apache.org/plugins/maven-ear-plugin/examples/skinny-wars.h=
tml

--Sig_/FgzzEqwUkJ5=02vVvVc6/Vi
Content-Type: application/pgp-signature; name=signature.asc
Content-Disposition: attachment; filename=signature.asc

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.19 (GNU/Linux)

iEYEARECAAYFAlNnT9sACgkQYJf22JPx7tmJegCgp1EVw+30Rk/PVr1+SHJIMkby
czUAn0uG/mr5aSfhr/3MJTNT82Fg4Fsa
=At6+
-----END PGP SIGNATURE-----

--Sig_/FgzzEqwUkJ5=02vVvVc6/Vi--

