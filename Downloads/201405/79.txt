From users-return-136409-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed May 21 14:58:57 2014
Return-Path: <users-return-136409-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F05EB11763
	for <apmail-maven-users-archive@www.apache.org>; Wed, 21 May 2014 14:58:56 +0000 (UTC)
Received: (qmail 84650 invoked by uid 500); 21 May 2014 14:58:55 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 84560 invoked by uid 500); 21 May 2014 14:58:55 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 84552 invoked by uid 99); 21 May 2014 14:58:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 May 2014 14:58:55 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bmathus@gmail.com designates 209.85.213.41 as permitted sender)
Received: from [209.85.213.41] (HELO mail-yh0-f41.google.com) (209.85.213.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 May 2014 14:58:52 +0000
Received: by mail-yh0-f41.google.com with SMTP id f73so1760522yha.14
        for <users@maven.apache.org>; Wed, 21 May 2014 07:58:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=sUCzLUAQwlTDrG5ITR3ipgk5d/XzjuuuTicstQ2Zz/s=;
        b=QAvDFY9euKHD1mfq2z8/3JBO7bb4OG/i8H77/DFUFEuir3p1UUSb7NeKP3vBlmYHji
         KCp7KuvCl0zNfe2Pa9wIqGPuvDBFkJ3ECEpZzD/8KmOIP1VFc9OrXc+8xxPrBI5dWGMP
         Y313BIeznNe77ta0fZJ7q7yAZfwnzvN5iBSBTxqeB81QNK4fknNtIBDhZ42wpz0jn3O5
         LSYBP4h5akU0bUqUZ6Y4WsELER5w87534zW4XB9DFNv2E2jCS5xMu3yB3OvpeVspJh6I
         GFu0kLvkWNeKnzqB3EmimxGvbV2ObRtn74HTM2DWgpKsPLRxw42EigNI4DISh92CibNq
         z9PA==
X-Received: by 10.236.113.69 with SMTP id z45mr75530735yhg.0.1400684308172;
 Wed, 21 May 2014 07:58:28 -0700 (PDT)
MIME-Version: 1.0
Sender: bmathus@gmail.com
Received: by 10.170.207.68 with HTTP; Wed, 21 May 2014 07:58:08 -0700 (PDT)
In-Reply-To: <CA+nPnMwW6SOwn3HPHcL1j1LXHbVsZ0hz6t-xRpDOA9-NE0HM3A@mail.gmail.com>
References: <CANWgJS7vUkpbLTutWEK_0wqkUitYEUG=jo3EHXAEN0_eEiGMVQ@mail.gmail.com>
 <CAJZRQKxm==Qq0WkhS7tK6zAV64tLQ-UQ_b6zHzivGRmUqJaRWA@mail.gmail.com>
 <CANWgJS5B5HU4v__dNeOuqMLysZymK2GH+QgTOFG8sJzUmPWU1A@mail.gmail.com> <CA+nPnMwW6SOwn3HPHcL1j1LXHbVsZ0hz6t-xRpDOA9-NE0HM3A@mail.gmail.com>
From: Baptiste Mathus <bmathus@batmat.net>
Date: Wed, 21 May 2014 16:58:08 +0200
X-Google-Sender-Auth: NJd_Kdhi1QWrAw3MGhHUd0ojZM0
Message-ID: <CANWgJS6QB_br_2KFDhQ447nKSF1iO1kkz8yhSSQoo4f_AU7LsQ@mail.gmail.com>
Subject: Re: maven-invoker-plugin: running ITs in parallel?
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=20cf3010eb11a1939a04f9ea3a53
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3010eb11a1939a04f9ea3a53
Content-Type: text/plain; charset=UTF-8

IIUC your proposition is to play with defining <localRepository /> value to
variabilize the value with the current project?
Unfortunately I don't think this is gonna work since <localRepository /> is
actually totally ignored by design. You define <localRepositoryPath> once
directly in the m-invoker-p configuration block in the pom.xml.


2014-05-20 15:09 GMT+02:00 Stephen Connolly <stephen.alan.connolly@gmail.com
>:

> Eh you might be able to...
>
> you could have the "local repo" that m-i-p "installs" into be a "remote"
> repo in your settings.xml (along with the mrm repo) and then use ${basedir}
> in the localrepo path...
>
> (Untested)
>
>
> On 20 May 2014 13:08, Baptiste Mathus <bmathus@batmat.net> wrote:
>
> > Yup, I know this work is still underway, no problem. I realize I wasn't
> > clear enough (and my TL;DR may have been be misleading).
> >
> > I was also wondering if there was a workaround where you could define a
> > specific path *per it* for the local repository. But unfortunately from a
> > quick look at InvokerMojo.java I don't think it is possible.
> >
> > Thanks for your feedback.
> >
> >
> > 2014-05-20 13:51 GMT+02:00 Kristian Rosenvold <
> > kristian.rosenvold@gmail.com>
> > :
> >
> > >
> > > AFIK this is one is unsolved. We have a number of kludges that involve
> > > resolving all the required deps to the local repository *before*
> > > starting the parallel process, at least 2 og 3 projects do it this
> > > way. As far as I understand solving concurrent thread safe repo in the
> > > latest maven version should be trivial, but it needs to be solved in
> > > the core.
> > >
> > > Kristian
> > >
> > >
> > > 2014-05-20 9:13 GMT+02:00 Baptiste Mathus <ml@batmat.net>:
> > > > Hi all,
> > > >
> > > > *TL;DR: does anyone use the parallelThreads option in
> > > maven-invoker-plugin?
> > > > Do you also have issues with concurrent local repository access? If
> so,
> > > how
> > > > do you solve them?*
> > > >
> > > > I've recently come across the parallelThreads option in
> > > > maven-invoker-plugin. After having tried to use it a few times, I'm
> > > > currently stuck.
> > > >
> > > > It fails randomly, and not surprisingly it seems like it comes from
> the
> > > > fact the local-repo is shared between ITs. While downloading from the
> > > MRM,
> > > > there's always one jars that fails to be written to the disk because
> > of a
> > > > likely concurrent access.
> > > >
> > > > My first thought was to try and have a separate localRepository per
> IT.
> > > But
> > > > I can't find a property or even a workaround to do that.
> > > >
> > > > Because filing an issue to m-invoker-p, I wanted to check here if I
> was
> > > > missing something.
> > > >
> > > > Thanks for your help.
> > > >
> > > > -- Baptiste
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> > > For additional commands, e-mail: users-help@maven.apache.org
> > >
> > >
> >
> >
> > --
> > Baptiste <Batmat> MATHUS - http://batmat.net
> > Sauvez un arbre,
> > Mangez un castor !
> >
>



-- 
Baptiste <Batmat> MATHUS - http://batmat.net
Sauvez un arbre,
Mangez un castor !

--20cf3010eb11a1939a04f9ea3a53--

