From users-return-136340-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue May  6 13:23:57 2014
Return-Path: <users-return-136340-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3DA5211F89
	for <apmail-maven-users-archive@www.apache.org>; Tue,  6 May 2014 13:23:57 +0000 (UTC)
Received: (qmail 38919 invoked by uid 500); 6 May 2014 13:21:04 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 38761 invoked by uid 500); 6 May 2014 13:21:02 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 38727 invoked by uid 99); 6 May 2014 13:21:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 May 2014 13:21:01 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of baerrach@gmail.com designates 209.85.220.182 as permitted sender)
Received: from [209.85.220.182] (HELO mail-vc0-f182.google.com) (209.85.220.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 May 2014 13:20:58 +0000
Received: by mail-vc0-f182.google.com with SMTP id la4so940727vcb.27
        for <users@maven.apache.org>; Tue, 06 May 2014 06:20:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=1+Rgnx2tS2ZfJRNq5PTGzqJ9IMYzNg/pMh7dmsOPbNk=;
        b=Uc1h1vYuvcY9mX9DOQN9GvwXwWgOoBV14AGQNUhMVus8nusy7cOcS7xq2DBp+xscI9
         d0YWB7EtEE8u+9KFmH2U5xbKTMiM3zY2pHEpO0FjmcB19X8z3Zf+R5C6tsuplUgkdmJM
         nmOJ7mU/HNA3s18iylGf92sDFBsqDW3WIJ0aG/xAHsKhgXhjsw+yAILRsCJs4JPcN5UD
         LltTsYTLOw/WZYM7pKb8Ft/eSXlpG2Y6DvovmGogMgOOl9A7qJAyIVp2cTTNkY6rls2O
         5c0mX1I4fZG0kqeipOdMu4Nseeo7S7rI2S2TJBUElnPc91I83M8cx/S/Bcs1ortwP3XL
         nZPA==
MIME-Version: 1.0
X-Received: by 10.52.227.138 with SMTP id sa10mr15350526vdc.25.1399382434796;
 Tue, 06 May 2014 06:20:34 -0700 (PDT)
Received: by 10.58.197.98 with HTTP; Tue, 6 May 2014 06:20:34 -0700 (PDT)
In-Reply-To: <CAKDUN1tDrJ=var=u=jA8ry3FBiA2rR3hQ_t4mjBm=ijea8uJZA@mail.gmail.com>
References: <CAPCjjnFMA33p+MbvbM98Zd-M002c8--Phz=qP43KPBFYA933zw@mail.gmail.com>
	<CADVp3v_v6FY5EdGfp_YpN_W4v7XPgjbiHdZwCye5zFBfw6VQ3Q@mail.gmail.com>
	<CAPCjjnHJefP9Y_PvO7tgQCWfq+YXASBSqtKRXbqkSFRgoNKyng@mail.gmail.com>
	<5368884B.1050400@landrus.de>
	<CAPCjjnETY1RrbreWUDt6tWAS_nj=vR0sMFTZqkyC0mm+FSJHMg@mail.gmail.com>
	<5368B651.2010205@abacus.ch>
	<CAKDUN1tDrJ=var=u=jA8ry3FBiA2rR3hQ_t4mjBm=ijea8uJZA@mail.gmail.com>
Date: Tue, 6 May 2014 22:50:34 +0930
Message-ID: <CADVp3v8Rrx0WpaJCjDwRkGoeShevHj90k1T=p7fxRYeH7j7vAw@mail.gmail.com>
Subject: Re: use separate mirrors for project dendencies and plugin
 dependencies ??
From: Barrie Treloar <baerrach@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=089e0111d816ee5c1404f8bb1c79
X-Virus-Checked: Checked by ClamAV on apache.org

--089e0111d816ee5c1404f8bb1c79
Content-Type: text/plain; charset=UTF-8

On 6 May 2014 20:23, Anders Hammar <anders@hammar.net> wrote:

> >
> > Presumably you are trying to separate artifacts used by plugins during
> > your build (where you might use e.g. GPL licensed modules) from artifacts
> > used as dependencies in your project proper (where using that same GPL
> > licensed modules would make your legal department scream) by separating
> the
> > repositories used to provide them.
> >
> > As far as I know/understand all artifacts are downloaded to the same
> local
> > cache repository (~/.m2/repository), regardless of whether they were
> > required by some plugin or as a dependency of your project.
> >
> > This makes them available for both purposes and thus obliterates all your
> > efforts of keeping them separate.
> >
> > Maven Masters: Please correct me if I'm wrong.
> >
>
> I don't think this is correct with Maven 3. Maven 3 uses Aether which AFAIK
> keeps the repository id for the artifact to verify from where it was
> downloaded. Haven't verified for this use case though.
>
> So, using Maven 3 it should be possible to specify one repository
> declaration for your deps and one pluginRepository declaration (with a
> different repo id) for your plugins (incl deps). If you msut use mirror
> declarations, I would use this for the deps and add exclusions (using '!')
> for any pluginRepository.
>
> /Anders


I don't remember what happens for duplicates.
I think it used to complain that the artifact doesn't exist (if the one it
downloaded from is not available, even though its available elsewhere).

The GPL example isn't a good one, as the output of running GPL is not GPL
itself.

I think Nexus allows you to restrict things by licence so that you can
curate what is available in your repository manager. You'd have to look at
the docs to find out.

--089e0111d816ee5c1404f8bb1c79--

