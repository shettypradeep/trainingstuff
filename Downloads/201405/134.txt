From users-return-136316-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu May  1 20:08:48 2014
Return-Path: <users-return-136316-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A0DE910CBA
	for <apmail-maven-users-archive@www.apache.org>; Thu,  1 May 2014 20:08:48 +0000 (UTC)
Received: (qmail 68135 invoked by uid 500); 1 May 2014 20:08:44 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 67985 invoked by uid 500); 1 May 2014 20:08:44 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 67972 invoked by uid 99); 1 May 2014 20:08:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 May 2014 20:08:44 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [209.85.213.176] (HELO mail-ig0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 May 2014 20:08:40 +0000
Received: by mail-ig0-f176.google.com with SMTP id hl10so950923igb.3
        for <users@maven.apache.org>; Thu, 01 May 2014 13:08:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:date:message-id:subject
         :from:to:content-type;
        bh=Hd3rS3CDzzLDCDmCLZU8V6bfO9s34PzKl5IHsy94UvE=;
        b=ag1oxxSDNnIe75p+4gGiQ5Ju87hisMA+wdsEt+L6aK1XM39QVe28xNN/W8pBY9ODEC
         rYyqHJlocvRg2+mMQh/2RGyq/ZsnZd6iYEt2AYLfj3LYSiInSoMCwuvvh3KtRIHdbhn4
         Kr8UxUlob6rrNG7o4VDN+qgodHXg5Wp6ErGzaEmNORxRGY5/EmUH7Ba0TX3eb7Hx9kCE
         VWZ17hxLUJ01sP2ujo/TNpRdgr6MZ+iRzvVLM1FRwQ4udWiMBXID/JboFLyuk0E9OowQ
         XCPm1qyZc5GMJl6ZDTDi8HKHmgI+r6xJss8BPBHXhcHpTluktZJHC8Fo3wmCUjPYEPsP
         hqWA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:sender:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Hd3rS3CDzzLDCDmCLZU8V6bfO9s34PzKl5IHsy94UvE=;
        b=VaWcSlzyIG7zkhXC1lz2Q1hzB/JaVOvlEGesSn064+Zvh4z+Pn7B5mM5jbKh48S1Fe
         qiKr3t6C1flvHhXK//g8YIA5JSIrzy+nFQzQfFxJsIJwW84L+Itta6XWPPLzrZViuHQm
         y1J4d60MFaI0YGG0bXdSiXwUTmhL7VreTkoa00rTMoQGAZXtYC1KgGQ+KVIVToMYEJnc
         TZ4F5kb5It92h8drfzUIpALG3cR4/V3VPPRoPIfEytg6mA/Q0CH8EmEHkPqRgscTJ/yk
         RG657xeb0aCeT20hMlKMblBwd+9xnVAB9qyH4SlPs6uwPc0oQh9M1vZqBqLdwm2eEajw
         3CGw==
X-Gm-Message-State: ALoCoQnTpxWcKNn04IKA+X2wxcj//qHkBpnOCd3shYi4dNhNH4FQepywkAkFsKgqM3Dya/Yk5h+t
MIME-Version: 1.0
X-Received: by 10.50.109.230 with SMTP id hv6mr5719513igb.9.1398974899207;
 Thu, 01 May 2014 13:08:19 -0700 (PDT)
Sender: kristian.rosenvold@zenior.no
Received: by 10.50.3.70 with HTTP; Thu, 1 May 2014 13:08:19 -0700 (PDT)
In-Reply-To: <CAJZRQKwHfXKY7VBjah+K1tdcwBxw=VyEH59VL71GyVWci2kr+g@mail.gmail.com>
References: <CAJGYKdP1gZa=XNV=ua0j_4TUDT+ZODSWN4XAoe1XWckqxr-v9A@mail.gmail.com>
	<CAJZRQKwHfXKY7VBjah+K1tdcwBxw=VyEH59VL71GyVWci2kr+g@mail.gmail.com>
Date: Thu, 1 May 2014 22:08:19 +0200
X-Google-Sender-Auth: pX0lxfl12l6LCinqMDtXbRI5Bnk
Message-ID: <CAJZRQKycF-WfOwtJ97Obu1UoV5nj2FzxCTjQwyWND+uA3Any1w@mail.gmail.com>
Subject: Re: dependency plugin fails with >9 threads
From: Kristian Rosenvold <kristian.rosenvold@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=089e013a1d8eead3aa04f85c3930
X-Virus-Checked: Checked by ClamAV on apache.org

--089e013a1d8eead3aa04f85c3930
Content-Type: text/plain; charset=UTF-8

I fixed the problem on trunk in dependency plugin.

You should be able to modify the deps in your current version to work
around this,
but you need to mimic what I did in the actual fix:

http://svn.apache.org/viewvc?view=revision&revision=1591759

Kristian



2014-05-01 21:25 GMT+02:00 Kristian Rosenvold <kristian.rosenvold@gmail.com>
:

> It turns out dependency plugin is using an old version of doxia (version
> 1.0, latest released is 1.4) that has known thread safety issues. You
> *might* be able to work around this by adding the following dependencies to
> the dependency-plugin in your pom:
>
>     <dependency>
>       <groupId>org.apache.maven.doxia</groupId>
>       <artifactId>doxia-sink-api</artifactId>
>       <version>1.4</version>
>     </dependency>
>     <dependency>
>       <groupId>org.apache.maven.doxia</groupId>
>       <artifactId>doxia-site-renderer</artifactId>
>       <version>1.4</version>
>     </dependency>
>
> See
> http://blog.sonatype.com/2008/04/how-to-override-a-plugins-dependency-in-mavenif you're unfamiliar about how to do this. this might work, but might also
> bug out due to some incompatibility between 1.0 and 1.4 of doxia, I did not
> try.
>
>
>
> Please file an issue under http://jira.codehaus.org/browse/MDEP
>
>
> Kristian
>
>
>
> 2014-05-01 16:00 GMT+02:00 Anthony Clark <anthonyclarka2@gmail.com>:
>
> Hi All,
>>
>> I'm trying to improve our build by using parallel threads (i.e. mvn -T #)
>>
>> Unfortunately I'm running into an error when I try to use more than 9
>> threads on this 24 core server:
>>
>> [ERROR] Failed to execute goal
>> org.apache.maven.plugins:maven-dependency-plugin:2.8:analyze-report
>> (analyze-report)
>>  on project enterprise-provided: An error has occurred in Dependency
>> Analysis report generation. Could not find the
>>  template 'org/apache/maven/doxia/siterenderer/resources/default-site.vm
>> ->
>> [Help 1]
>> org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute
>> goal org.apache.maven.plugins:maven-depen
>> dency-plugin:2.8:analyze-report (analyze-report) on project
>> enterprise-provided: An error has occurred in Dependenc
>> y Analysis report generation.
>>         at
>>
>> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)
>>         at
>>
>> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
>>         at
>>
>> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
>>         at
>>
>> org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:108)
>>         at
>>
>> org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call(MultiThreadedBuild
>> er.java:188)
>>         at
>>
>> org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call(MultiThreadedBuild
>> er.java:184)
>>         at java.util.concurrent.FutureTask.run(FutureTask.java:262)
>>         at
>> java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
>>         at java.util.concurrent.FutureTask.run(FutureTask.java:262)
>>         at
>>
>> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
>>         at
>>
>> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
>>         at java.lang.Thread.run(Thread.java:745)
>> Caused by: org.apache.maven.plugin.MojoExecutionException: An error has
>> occurred in Dependency Analysis report gene
>> ration.
>>         at
>>
>> org.apache.maven.reporting.AbstractMavenReport.execute(AbstractMavenReport.java:106)
>>         at
>>
>> org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:133)
>>         at
>>
>> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
>>         ... 11 more
>> Caused by: org.apache.maven.doxia.siterenderer.RendererException: Could
>> not
>> find the template
>> 'org/apache/maven/doxia/siterenderer/resources/default-site.vm
>>         at
>>
>> org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.processTemplate(DefaultSiteRenderer.java:537)
>>         at
>>
>> org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.writeTemplate(DefaultSiteRenderer.java:508)
>>         at
>>
>> org.apache.maven.doxia.siterenderer.DefaultSiteRenderer.generateDocument(DefaultSiteRenderer.java:485)
>>         at
>>
>> org.apache.maven.reporting.AbstractMavenReport.execute(AbstractMavenReport.java:97)
>>         ... 13 more
>> [INFO] No sources to compile
>>
>> Has anyone run into this before?  I searched the JIRA for the dependency
>> plugin and didn't find anything related to this.
>>
>> Thanks,
>>
>> Anthony Clark (sysadmin tasked with improving a build!)
>>
>
>

--089e013a1d8eead3aa04f85c3930--

