From users-return-137503-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Oct  9 08:58:33 2014
Return-Path: <users-return-137503-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 327E1173D6
	for <apmail-maven-users-archive@www.apache.org>; Thu,  9 Oct 2014 08:58:33 +0000 (UTC)
Received: (qmail 54649 invoked by uid 500); 9 Oct 2014 08:58:31 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 54557 invoked by uid 500); 9 Oct 2014 08:58:31 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 54544 invoked by uid 99); 9 Oct 2014 08:58:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Oct 2014 08:58:31 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stephen.alan.connolly@gmail.com designates 209.85.218.42 as permitted sender)
Received: from [209.85.218.42] (HELO mail-oi0-f42.google.com) (209.85.218.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Oct 2014 08:58:26 +0000
Received: by mail-oi0-f42.google.com with SMTP id a141so1804023oig.15
        for <users@maven.apache.org>; Thu, 09 Oct 2014 01:58:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=+AyKTQWGiv1PdgvKtgFzWnarcUDXN1YSJgUPhEVdmpk=;
        b=kBiHbgrn7zQriqKA7jQn4OxNK/5wK1F5fECQo1FYVL9TAmDN6ylDN9D6xVhIWMcVIe
         9bEgP9SSqFIqT9+IyPe8rQ1E5htu096nFAwHy58hBbzLDcS1tb3phba+cgWYup1prff/
         ubtSLnlV3+fN1Tni8rUgFBlZwZAFxkL2uzC6l06r0Zw2agiTXfb102l4IJwn/RW29Tl2
         EkukMNzR848ov5jVTX8TjxVCu/azJp/hnvrQsR/KdOQONUvqb0gvtbazd6l2VgBYwNkH
         NuzCsNw8RgvvjX1V0mKebW6t8sFJROEx6yZUk2x+ZqRX9caUGhHxsGpbmuPJNhrnX5Yw
         fXMw==
MIME-Version: 1.0
X-Received: by 10.60.56.39 with SMTP id x7mr17194174oep.62.1412845086008; Thu,
 09 Oct 2014 01:58:06 -0700 (PDT)
Received: by 10.60.116.39 with HTTP; Thu, 9 Oct 2014 01:58:05 -0700 (PDT)
In-Reply-To: <CAFDw+_MKcYKPdc9M74-b0=AMwq-kKoWxzhwxjr--nWTpbKH9Kw@mail.gmail.com>
References: <CAFDw+_MKcYKPdc9M74-b0=AMwq-kKoWxzhwxjr--nWTpbKH9Kw@mail.gmail.com>
Date: Thu, 9 Oct 2014 09:58:05 +0100
Message-ID: <CA+nPnMwTAfyeZqo+hFuYEg7JC7w-5tL1vDGPM_ma=RYORBPauw@mail.gmail.com>
Subject: Re: What packaging to use for a sub-module that just runs integration tests?
From: Stephen Connolly <stephen.alan.connolly@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=001a11c252c8796d010504f9a143
X-Virus-Checked: Checked by ClamAV on apache.org

--001a11c252c8796d010504f9a143
Content-Type: text/plain; charset=UTF-8

Well the question you really will want to know is:

"do I want any other modules to depend on the integration tests being
successful?"

If the answer is "yes" then you will most likely need to deploy something
(<packaging>pom</packaging>) and that may require adding the missing
bindings into the lifecycle.

If the answer is "no" then you will just configure the integration test
module with
<plugin><artifactId>maven-deploy-plugin</artifactId></configuration><skip>true</skip></configuration></plugin>


On 9 October 2014 09:23, Robert Mark Bram <
robertmarkbram+mailing.lists@gmail.com> wrote:

> My parent POM declares this Selenium project in a profile.
>    <profile>
>       <id>default-build</id>
>       <!-- This profile will be active if another profile isn't triggered
> -->
>       <activation>
>          <activeByDefault>true</activeByDefault>
>       </activation>
>       <modules>
>          <module>FooProject-Model</module>
>          <module>FooProject-Thermal</module>
>          <module>FooProject-ViewController</module>
>          <module>FooProject-API-V1</module>
>          <module>FooProject-Monitoring</module>
>          <module>FooProject-ADF</module>
>          <module>FooProject-BIRT</module>
>          <module>FooProject-Selenium</module>
>       </modules>
>    </profile>
>
> And the Selenium pom (sub-module) has the following:
>
> Packaging
>    <packaging>jar</packaging>
>
> Depend on the ear being built and deployed from another sub-module project.
>    <dependencies>
>       <dependency>
>          <groupId>${project.groupId}</groupId>
>          <artifactId>FooProject-ADF</artifactId>
>          <version>1.0</version>
>          <type>ear</type>
>       </dependency>
>
> Run integration tests.
>    </dependencies>
>    <build>
>       <plugins>
>          <plugin>
>             <groupId>org.apache.maven.plugins</groupId>
>             <artifactId>maven-failsafe-plugin</artifactId>
>             <version>2.17</version>
>             <configuration>
>                <forkMode>once</forkMode>
>             </configuration>
>             <executions>
>                <execution>
>                   <goals>
>                      <goal>integration-test</goal>
>                      <goal>verify</goal>
>                   </goals>
>                </execution>
>             </executions>
>          </plugin>
>       </plugins>
>    </build>
>
> The build (run from parent pom) is failing with this error:
>    [ERROR] Failed to execute goal
> org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy
> (default-deploy) on project FooProject-Selenium: Deployment failed:
> repository element was not specified in the POM inside
> distributionManagement element or in
> -DaltDeploymentRepository=id::layout::url parameter -> [Help 1]
>
> I understand this is because by specifying package as jar, Mavan wants
> to know where I want to put the FooProject-Selenium jar, and of course
> I don't want to generate a jar at all.
>
> I have ready suggestions that I should use the pom packaging statement
> and http://stackoverflow.com/a/8845858/257233 says that if I do that,
> I will have to explicitly call my goals with
>    mvn clean compiler:testCompile surefire:test
> But I don't want this - I need the parent pom to be able to be able to
> co-ordinate the entire build.
>
> So.. what is the best way to deal with this?
>
> Rob
> :)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>
>

--001a11c252c8796d010504f9a143--

