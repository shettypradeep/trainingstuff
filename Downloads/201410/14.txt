From users-return-137638-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Oct 28 01:44:19 2014
Return-Path: <users-return-137638-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CC49217F4E
	for <apmail-maven-users-archive@www.apache.org>; Tue, 28 Oct 2014 01:44:19 +0000 (UTC)
Received: (qmail 68337 invoked by uid 500); 28 Oct 2014 01:44:12 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 68244 invoked by uid 500); 28 Oct 2014 01:44:12 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 68231 invoked by uid 99); 28 Oct 2014 01:44:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2014 01:44:12 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cregganna@gmail.com designates 209.85.220.169 as permitted sender)
Received: from [209.85.220.169] (HELO mail-vc0-f169.google.com) (209.85.220.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Oct 2014 01:44:07 +0000
Received: by mail-vc0-f169.google.com with SMTP id id10so980567vcb.0
        for <users@maven.apache.org>; Mon, 27 Oct 2014 18:43:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:date:message-id:subject
         :from:to:content-type;
        bh=iYLqksTK7QIuOtbiD2JjIBN2PJ/8oXMjJeTLbYzUpjA=;
        b=ZdkHPPz8+RYTNAaI/EMIaZU5pKymNCtCIsdlK7Mt2EadF1Pxqml9vxv8b0X20iRt5a
         ze1Z7gdlvxsY+HVZS1QD1PYpkY4P2qaYwNeh5HbcbHnCQ+grTyYEIsvE/nQRaQu0oZsR
         DM/fXBXs/Tsqx5jksual3Q465rBXfF8jjO9p/avGtrOOsP3l8nbns/4y8aLaKeIxgN9G
         4UoeaPRz/gIuxykiC0KoqetN8XMvwdXpdkVY+sfyYjmPO/thUnjKTqgvnc3kEHebrPnB
         LzS11NHcTMaFgNjW1O/xCqeMsF0vMbQWFABa+/JKmkAY7vox1YJAOUDasf6f1GFPRP4u
         WOLQ==
MIME-Version: 1.0
X-Received: by 10.52.167.195 with SMTP id zq3mr78485vdb.44.1414460626664; Mon,
 27 Oct 2014 18:43:46 -0700 (PDT)
Sender: cregganna@gmail.com
Received: by 10.31.3.92 with HTTP; Mon, 27 Oct 2014 18:43:46 -0700 (PDT)
In-Reply-To: <CAJZRQKxD9OKF4KS9MGbFSpz4FJ4iuGHBZGayuwCLij91PGGcZw@mail.gmail.com>
References: <CAJZRQKyNH49bZT_Y0jhjt-6Q3OTuOBf29Ci=zESaSxeZwwouYg@mail.gmail.com>
	<55BBB074DE5248439192BCB13699A45664515808@MSGEXSV21111.ent.wfb.bank.corp>
	<CAJZRQKxD9OKF4KS9MGbFSpz4FJ4iuGHBZGayuwCLij91PGGcZw@mail.gmail.com>
Date: Tue, 28 Oct 2014 01:43:46 +0000
X-Google-Sender-Auth: 9buWhynmYDBTm1QweogWbSQKjME
Message-ID: <CAPdv7QypXUHFYwU4vvBwZQ_bLLpk-QihaebRUSzfVSsrSJMM9Q@mail.gmail.com>
Subject: Re: [ANN] Apache Maven Assembly Plugin 2.5 Released
From: Tony Jewell <tony.jewell@cregganna.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=089e0160c2e63383e0050671c7ea
X-Virus-Checked: Checked by ClamAV on apache.org

--089e0160c2e63383e0050671c7ea
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi,

I too got this problem when upgrading to 2.5 on my project.

I have raised a JIRA:

http://jira.codehaus.org/browse/MASSEMBLY-722
Assembly with filters fails on Version 2.5 with NoSuchElementException and
then IOException (This archives contains unclosed entries) on clean up

that includes an attached simple project zip with build.log included -
result of mvn -X clean install.

I tried to track it down but got lost in project dependency issues in the
assembly project - there appears to be a lot of dependency overrides around
the plexus projects.

I'll have another look if I can but am travelling this week.

BTW - apologies for creating a duplicate of the JIRA MASSEMBLY-723 by
mistake - I have closed it as duplicate.

ATB,
Tony Jewell

On 27 October 2014 17:08, Kristian Rosenvold <kristian.rosenvold@gmail.com>
wrote:

> Do you have the stacktrace for this ? (run with mvn -e)
>
> You'll probably need to file an issue for this at
> http://jira.codehaus.org/browse/MASSEMBLY, preferably with a small
> sample project enclosed. A stacktrace is probably the most important
> starting point to find the problem though.
>
> Kristian
>
> 2014-10-27 15:11 GMT+01:00  <cody.a.fyler@wellsfargo.com>:
> > This version breaks my build.
> >
> > The error I receive is:
> >
> > [ERROR] Failed to execute goal
> org.apache.maven.plugins:maven-assembly-plugin:2.
> > 5:single (flex-flexA-single) on project flexA: Failed to create
> assembly: Error
> > creating assembly archive flexA: This archives contains unclosed
> entries. -> [He
> > lp 1]
> >
> > My installation details:
> >
> > C:\Users\fylerca\workspace\FlexFrameworkPackaging\branches\R4.14>mvn -v
> > Apache Maven 3.2.3 (33f8c3e1027c3ddde99d3cdebad2656a31e8fdf4;
> 2014-08-11T15:58:1
> > 0-05:00)
> > Maven home: C:\bin\apache-maven-3.2.3
> > Java version: 1.8.0_20-ea, vendor: Oracle Corporation
> > Java home: C:\Java\jdk1.8.0_20\jre
> > Default locale: en_US, platform encoding: Cp1252
> > OS name: "windows 7", version: "6.1", arch: "amd64", family: "dos"
> >
> > Here is the packaging file that works under previous versions:
> >
> > <?xml version=3D"1.0" encoding=3D"UTF-8"?>
> > <assembly
> >   xmlns=3D"
> http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.1"
> >   xmlns:xsi=3D"http://www.w3.org/2001/XMLSchema-instance"
> >   xsi:schemaLocation=3D"
> http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.1
> http://maven.apache.org/xsd/assembly-1.1.1.xsd">
> >   <id>flexA</id>
> >   <formats>
> >     <format>dir</format>
> >     <format>tar.gz</format>
> >   </formats>
> >   <includeBaseDirectory>false</includeBaseDirectory>
> >   <dependencySets>
> >     <!-- jars we add to /flexshare/flex(A-Z)/commonLib -->
> >     <dependencySet>
> >       <excludes>
> >         <exclude>xpp3:xpp3_min</exclude>
> >         <exclude>com.wellsfargo.lendinggrid:MQ</exclude>
> >         <exclude>*:pom</exclude>
> >       </excludes>
> >       <includes>
> >
>  <include>com.wellsfargo.lendinggrid.framework:CommonLibDependencies:pom<=
/include>
> >         <include>javax.servlet:jstl</include>
> >         <include>com.ibm.as400:jt400</include>
> >         <include>ojdbc:ojdbc</include>
> >         <include>com.oracle:ojdbc6</include>
> >         <include>com.teradata.jdbc:tdgssconfig</include>
> >         <include>com.teradata.jdbc:terajdbc4</include>
> >         <include>net.sourceforge.jtds:jtds</include>
> >         <include>com.ibm.db2:db2jcc</include>
> >         <include>com.thoughtworks.xstream:xstream</include>
> >       </includes>
> >       <outputDirectory>/flexshare/flexA/commonLib</outputDirectory>
> >       <useTransitiveFiltering>true</useTransitiveFiltering>
> >     </dependencySet>
> >     <!-- jars we add to /flexshare/flex(A-Z)/flexwebLib -->
> >     <dependencySet>
> >       <excludes>
> >
>  <exclude>com.wellsfargo.lendinggrid.frameworkFlexFrameworkPackaging:pom:=
*</exclude>
> >       </excludes>
> >       <includes>
> >         <include>org.apache.rampart:rampart</include>
> >         <include>org.apache.rampart:rampart-core</include>
> >         <include>org.apache.rampart:rampart-policy</include>
> >         <include>org.apache.rampart:rampart-trust</include>
> >         <include>org.apache.axis2:addressing:jar</include>
> >         <include>org.opensaml:opensaml</include>
> >         <include>org.apache.ws.security:wss4j</include>
> >         <include>org.apache.santuario:xmlsec</include>
> >         <include>org.opensaml:xmltooling</include>
> >
>  <include>com.wellsfargo.pps.core.handlers:PasswordCallback</include>
> >         <include>com.wellsfargo.lending.mortgagepricing:vbjorb</include=
>
> >
>  <include>com.wellsfargo.lendinggrid.framework:framework-common</include>
> >
>  <include>com.wellsfargo.service.provider.hcfg.creditrisk.riskenginedirec=
tor:com.wellsfargo.service.provider.hcfg.creditrisk.riskenginedirector</inc=
lude>
> >
>  <include>com.wellsfargo.service.provider.hcfg.creditRisk.decisionCoordin=
ator:com.wellsfargo.service.provider.hcfg.creditRisk.decisionCoordinator</i=
nclude>
> >         <include>org.apache.axis2:axis2-transport-jms:jar:patch</includ=
e>
> >         <include>com.wellsfargo:ExperianATBxmltypes</include>
> >         <include>org.jdom:jdom2</include>
> >       </includes>
> >       <outputDirectory>/flexshare/flexA/flexwebLib</outputDirectory>
> >     </dependencySet>
> >     <!-- Flex Framework bundled service archives -->
> >     <dependencySet>
> >       <includes>
> >         <include>com.wellsfargo.lending.services:HelloWorld</include>
> >         <include>com.wellsfargo.lendinggrid.framework:version</include>
> >       </includes>
> >
>  <!--outputDirectory>/flexshare/flexA/webapps/flexweb/WEB-INF/services</o=
utputDirectory-->
> >       <outputDirectory>/flexshare/flexA/services</outputDirectory>
> >     </dependencySet>
> >   </dependencySets>
> >   <fileSets>
> >     <!-- copy dir structure -->
> >     <fileSet>
> >       <directory>target</directory>
> >       <outputDirectory>/flexshare/flexA/flexwebLib</outputDirectory>
> >       <excludes>
> >         <exclude>**/*</exclude>
> >         <exclude>*</exclude>
> >       </excludes>
> >     </fileSet>
> >     <fileSet>
> >       <directory>target</directory>
> >       <outputDirectory>/flexshare/flexA/webapps</outputDirectory>
> >       <excludes>
> >         <exclude>**/*</exclude>
> >         <exclude>*</exclude>
> >       </excludes>
> >       <lineEnding>unix</lineEnding>
> >     </fileSet>
> >     <fileSet>
> >       <directory>target</directory>
> >       <outputDirectory>/flexshare/flexA/config</outputDirectory>
> >       <excludes>
> >         <exclude>**/*</exclude>
> >         <exclude>*</exclude>
> >       </excludes>
> >       <lineEnding>unix</lineEnding>
> >     </fileSet>
> >     <fileSet>
> >
>  <directory>C:\\Users\\fylerca\\workspace\\FlexFrameworkPackaging\\branch=
es\\R4.14/domainconfig2/src/main/resources/tokenized/context</directory>
> >       <outputDirectory>/flexshare/flexA/context</outputDirectory>
> >       <includes>
> >         <include>*.xml</include>
> >       </includes>
> >       <filtered>true</filtered>
> >       <lineEnding>unix</lineEnding>
> >     </fileSet>
> >     <fileSet>
> >
>  <directory>C:\\Users\\fylerca\\workspace\\FlexFrameworkPackaging\\branch=
es\\R4.14/domainconfig2/src/main/resources/tokenized/properties/flexweb</di=
rectory>
> >
>  <outputDirectory>/flexshare/flexA/properties/flexweb</outputDirectory>
> >       <includes>
> >         <include>*.properties</include>
> >         <include>*.xml</include>
> >         <include>jaas.config</include>
> >       </includes>
> >       <filtered>true</filtered>
> >       <lineEnding>unix</lineEnding>
> >     </fileSet>
> >     <fileSet>
> >
>  <directory>C:\\Users\\fylerca\\workspace\\FlexFrameworkPackaging\\branch=
es\\R4.14/domainconfig2/src/main/resources/tokenized/config</directory>
> >       <outputDirectory>/flexshare/flexA/config</outputDirectory>
> >       <filtered>true</filtered>
> >       <fileMode>0755</fileMode>
> >       <lineEnding>unix</lineEnding>
> >     </fileSet>
> >     <fileSet>
> >
>  <directory>C:\\Users\\fylerca\\workspace\\FlexFrameworkPackaging\\branch=
es\\R4.14/domainconfig2/dev/src/main/resources/env/flexshare</directory>
> >       <outputDirectory>/flexshare</outputDirectory>
> >       <includes>
> >         <include>flexA/**/*.xml</include>
> >         <include>flexA/**/*.properties</include>
> >         <include>flexA/**/*.config</include>
> >       </includes>
> >       <excludes>
> >         <exclude>**/flexweb/framework.xml</exclude>
> >         <exclude>**/flexweb/log4j.xml</exclude>
> >         <exclude>**/context/flexweb.xml</exclude>
> >         <exclude>**/context/activemq-web-console*.xml</exclude>
> >         <exclude>**/context/GridFileServer.xml</exclude>
> >         <exclude>**/context/flexcamel.xml</exclude>
> >         <exclude>**/flexweb/activemq.properties</exclude>
> >         <exclude>**/flexweb/jaas.config</exclude>
> >         <exclude>**/flexweb/axis2.xml</exclude>
> >         <exclude>**/context.xml</exclude>
> >         <exclude>**/flexcamel/route.properties</exclude>
> >       </excludes>
> >       <filtered>false</filtered>
> >       <lineEnding>unix</lineEnding>
> >     </fileSet>
> >     <fileSet>
> >
>  <directory>C:\\Users\\fylerca\\workspace\\FlexFrameworkPackaging\\branch=
es\\R4.14/domainconfig2/src/main/resources/tokenized/properties/flexcamel</=
directory>
> >
>  <outputDirectory>/flexshare/flexA/properties/flexcamel</outputDirectory>
> >       <filtered>true</filtered>
> >       <lineEnding>unix</lineEnding>
> >     </fileSet>
> >   </fileSets>
> >   <componentDescriptors>
> >
> >
> >
> >   </componentDescriptors>
> > </assembly>
> >
> > Cody Fyler
> > Lending Grid Build Team
> > G=3DLending Grid Builds
> > (515) =E2=80=93 441 - 0814
> >
> > -----Original Message-----
> > From: Kristian Rosenvold [mailto:krosenvold@apache.org]
> > Sent: Monday, October 27, 2014 1:27 AM
> > To: announce@maven.apache.org
> > Subject: [ANN] Apache Maven Assembly Plugin 2.5 Released
> >
> > The Apache Maven team is pleased to announce the release of the
> long-awaited Apache Maven Assembly Plugin, version 2.5.
> >
> > The Assembly Plugin for Maven is primarily intended to allow users to
> aggregate the project output along with its dependencies, modules, site
> documentation, and other files into a single distributable archive.
> >
> > Notable in this release is improved file attribute support and full
> symlink support for java7+ users. Users of filtering/line ending selectio=
n
> should also notice a nice performance improvement.  A large number of bug=
s
> have also been fixed.
> >
> >
> > http://maven.apache.org/plugins/maven-assembly-plugin/
> >
> > You should specify the version in your project's plugin configuration:
> >
> > <plugin>
> >   <groupId>org.apache.maven.plugins</groupId>
> >   <artifactId>maven-assembly-plugin</artifactId>
> >   <version>2.5</version>
> > </plugin>
> >
> >
> > Release Notes - Maven Assembly Plugin - Version 2.5
> >
> >
> >
> > ** Bug
> >     * [MASSEMBLY-75] - Unpacked TAR dependencies do not preserve file
> mode nor uid/gid
> >     * [MASSEMBLY-458] - Directory name resolution ignores "$" and beyon=
d
> >     * [MASSEMBLY-495] - Assembly changes timestamps when extracting
> dependency sets
> >     * [MASSEMBLY-523] - Filtering causes a loss of original unix file
> permissions
> >     * [MASSEMBLY-543] - japanese filenames cannot be correctly assemble=
d
> by maven-assembly-plugin
> >     * [MASSEMBLY-557] - Corrupted zip created by assembly: extracting
> the zip forgets certain folders (or throws permission denied errors)
> possibly because zip index is corrupted
> >     * [MASSEMBLY-563] - JAR entry not found when including jar
> dependencies with "#" in classname
> >     * [MASSEMBLY-576] - addClasspath broken in new single goal
> >     * [MASSEMBLY-605] - Filtering does not work on files which are
> symlinks
> >     * [MASSEMBLY-615] - assembly:single fails with odd resource file na=
me
> >     * [MASSEMBLY-622] - Unable to create "TAR" artifacts
> >     * [MASSEMBLY-641] - Assembly fails on resource name with a percent
> character
> >     * [MASSEMBLY-661] - Assembly plugin looses permissions when using
> fileSets
> >     * [MASSEMBLY-670] - Specifying <lineEnding> option of <fileSet>
> causes timestamps not to be preserved
> >     * [MASSEMBLY-684] - Parallel Execution w Custom Assembly Descriptor
> Fails
> >     * [MASSEMBLY-692] - Assembly ID is global
> >     * [MASSEMBLY-709] - When assembling a zip on windows duplicate file=
s
> are added to the assembly
> >     * [MASSEMBLY-721] - Failing ITs for Maven 2.2.1
> >
> >
> >
> > ** Improvement
> >     * [MASSEMBLY-479] - Add option to generate Posix tar files.
> >     * [MASSEMBLY-530] - Allow configuration of encoding
> >     * [MASSEMBLY-638] - [PATCH] Support tgz and tbz2 formats in
> assemblies
> >     * [MASSEMBLY-673] - Add support for "delimiters" and
> "useDefaultDelimiters" like the maven-resources-plugin 2.4 has
> >     * [MASSEMBLY-688] - Use maven-invoker-plugin 1.9
> >     * [MASSEMBLY-705] - Removed compatibility with Maven 2.0.X
> >     * [MASSEMBLY-706] - MavenProject/MavenSession Injection as a
> paremeter instead as a component.
> >     * [MASSEMBLY-707] - Remove unnecessary excludes / Cleaning up
> console output
> >     * [MASSEMBLY-710] - Fix RAT Report
> >     * [MASSEMBLY-712] - Update version of plexus-archiver to 2.5
> >     * [MASSEMBLY-714] - Update version of plexus-archiver to 2.7.1
> >     * [MASSEMBLY-716] - Update plexus-io from 2.0.9 to 2.3.2
> >     * [MASSEMBLY-719] - Ugrade to plexus-interpolation 1.21
> >
> > ** New Feature
> >     * [MASSEMBLY-717] - Add an option to turn off project filters
> >
> > ** Wish
> >     * [MASSEMBLY-343] - add symbolic links managment (java7+ only
> supported)
> >
> > Enjoy,
> >
> > -The Apache Maven team
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> > For additional commands, e-mail: users-help@maven.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>
>

--089e0160c2e63383e0050671c7ea--

