From users-return-137481-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Oct  8 03:00:36 2014
Return-Path: <users-return-137481-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B253C17E29
	for <apmail-maven-users-archive@www.apache.org>; Wed,  8 Oct 2014 03:00:36 +0000 (UTC)
Received: (qmail 31590 invoked by uid 500); 8 Oct 2014 03:00:34 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 31507 invoked by uid 500); 8 Oct 2014 03:00:34 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 31495 invoked by uid 99); 8 Oct 2014 03:00:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2014 03:00:33 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of robertmarkbram@gmail.com designates 209.85.217.171 as permitted sender)
Received: from [209.85.217.171] (HELO mail-lb0-f171.google.com) (209.85.217.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Oct 2014 03:00:29 +0000
Received: by mail-lb0-f171.google.com with SMTP id z12so7347984lbi.30
        for <users@maven.apache.org>; Tue, 07 Oct 2014 20:00:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=j5Xl6uhKOt1S/I0LC4f4e3D1o1+XfMPU1Z9xGZ+ZVWQ=;
        b=l+vVKkVFA4KXYMDt2GqA/9YIoiKh6bCkJOB4b9Hm7jkPO+l6IEjocUHsID1eru9WZq
         bHbXpAmOHGBlr5dRAmBiTSNjfT+0qNl2xAiLhIn7GiyZq4qy/gZARaud1yWZXkVbceSZ
         Jl33Kuq/tRu1L1D4ZRFN7gpSBtZenYPPFxxilhprn0ddgWXt6PTz6JFkenpHglqxhxTV
         kUrqJHfWn+nqbgfcjoFi96rxaNUcjb0BDMfrQ7GBrF7PewPgmoAz0YVaVdDhOqs/gr5Q
         cJXObKIz9j/yqpVh89zQEOBPlAGKay7ZnaXMshKvCpU4MH0OtUGOADZL9ZWM/KoocNKv
         kdpw==
X-Received: by 10.112.130.129 with SMTP id oe1mr7609856lbb.4.1412737207934;
 Tue, 07 Oct 2014 20:00:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.152.43.44 with HTTP; Tue, 7 Oct 2014 19:59:47 -0700 (PDT)
In-Reply-To: <CA+nPnMyajL-2WYQojVG8RC6LCFeOns-P3TAHJgz+WE09irHoNg@mail.gmail.com>
References: <CAFDw+_MfUVBB=t_REqDSniErVuw9CXVpfsnmc9Krv=L69ZkZUA@mail.gmail.com>
 <CA+nPnMyajL-2WYQojVG8RC6LCFeOns-P3TAHJgz+WE09irHoNg@mail.gmail.com>
From: Robert Mark Bram <robertmarkbram@gmail.com>
Date: Wed, 8 Oct 2014 13:59:47 +1100
Message-ID: <CAFDw+_O82zhNQ-=Mo4PcfZpK5Uf13b_YvAUEE0ckDj+pXqhxOQ@mail.gmail.com>
Subject: Re: Running integration tests
To: Maven Users List <users@maven.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you Stephen - this was very useful and came just when I am ready
to start piecing together this level of detail.

> > 1) Default vs non-default plugins
> > suddenly a White Rabbit with pink eyes ran close by Alice

So, what I understood from this trip down the rabbit-hole.
- Maven defines various lifecycles.
- Each lifecycle defines a list of phases.
- Each phase will execute a list of goals (defined in plugins).
- What specific goals get executed in each phase depends on the
packaging defined for the pom.xml. Generally package defines what sort
of artifact you are dealing with: jar, war, ear etc.
- I am using ear packaging, so it binds the surefire:test goal to the
test phase, but binds nothing to integration-test - which is why I
need to add the failsafe plugin to my pom.xml. I didn't need to define
a phase for it, because failsafe's default phase is integration-test.

> > 2) Just run integration tests?
> > I can see that unit tests are all classes with names like *Test.java
> > and integration tests are all classes with names like IT.java. But mvn
> > verify and mvn test seem to run all tests (unit and integrations). Is
> > there a way to run just one or the other?

So, going from the previous trip down the rabbit hole, I understand
that when I run "mvn verify" I was seeing unit tests and integration
tests being run because in order to get to the verify phase (where my
integration tests should run from), it was running every phase before
that - including the test phase (where unit tests are run).

> tweaking of
> http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#skipTests
> should get you there!

When I was running "mvn test", I was also seeing integration tests
being run because I had named my integration test classes
TestBlahBlahIt.java so they were being picked up by both the test and
integration-test phases.

So, I should more strictly follow the convention of
- unit tests being Test*.java - and NOT including IT at the end.
- integration tests being *.IT.java - and NOT starting with Test.


> > 3) Run integration tests after compile?
> > The real reason for question 2 is that I wish to run integration tests
> > only after I have deployed the new application to ensure the
> > integration tests run on the server with the new content. Is there a
> > way to do this?

> Sounds like you should consult my answer to a related question:
> http://stackoverflow.com/questions/16935290/maven-deploy-webapp-to-tomcat-before-junit-test/16936585#16936585

OK, this was very helpful too. In this case, I am working with a
multi-module project and I decided it was best to add our selenium
tests in a new project to keep them away from other project code. We
have 13 pom.xml files, not counting the one I am adding. So this is my
next challenge, to ensure I get this project executing after the
others have done their job and deployed to the app server.

Why, sometimes I've believed as many as five impossible things before
after-noon tea. Time for one more before I knock off at 5pm.

Rob
:)

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


