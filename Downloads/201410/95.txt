From users-return-137578-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Fri Oct 17 15:04:31 2014
Return-Path: <users-return-137578-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B272B17E6E
	for <apmail-maven-users-archive@www.apache.org>; Fri, 17 Oct 2014 15:04:31 +0000 (UTC)
Received: (qmail 27263 invoked by uid 500); 17 Oct 2014 15:04:30 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 27179 invoked by uid 500); 17 Oct 2014 15:04:30 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 27168 invoked by uid 99); 17 Oct 2014 15:04:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2014 15:04:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of christofer.dutz@c-ware.de designates 157.56.112.148 as permitted sender)
Received: from [157.56.112.148] (HELO emea01-am1-obe.outbound.protection.outlook.com) (157.56.112.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Oct 2014 15:04:02 +0000
Received: from AMSPR05MB0611.eurprd05.prod.outlook.com (10.242.15.149) by
 AMSPR05MB0612.eurprd05.prod.outlook.com (10.242.15.150) with Microsoft SMTP
 Server (TLS) id 15.0.1054.13; Fri, 17 Oct 2014 15:04:00 +0000
Received: from AMSPR05MB0611.eurprd05.prod.outlook.com ([10.242.15.149]) by
 AMSPR05MB0611.eurprd05.prod.outlook.com ([10.242.15.149]) with mapi id
 15.00.1054.004; Fri, 17 Oct 2014 15:04:00 +0000
From: Christofer Dutz <christofer.dutz@c-ware.de>
To: Maven Users List <users@maven.apache.org>
Subject: AW: Strange Dependency problem after switching to Maven 3.1.1
Thread-Topic: Strange Dependency problem after switching to Maven 3.1.1
Thread-Index: AQHP6gMrdmVV6BMAdUCscz/aCf3jDpw0N1s/gAAq3mY=
Date: Fri, 17 Oct 2014 15:04:00 +0000
Message-ID: <1413558236574.98615@c-ware.de>
References: <1413548420515.75258@c-ware.de>,<1413548891289.97719@c-ware.de>
In-Reply-To: <1413548891289.97719@c-ware.de>
Accept-Language: de-DE, en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [217.110.228.68]
x-microsoft-antispam: BCL:0;PCL:0;RULEID:;SRVR:AMSPR05MB0612;
x-exchange-antispam-report-test: UriScan:;
x-forefront-prvs: 0367A50BB1
x-forefront-antispam-report: SFV:NSPM;SFS:(10019020)(6009001)(252514010)(189002)(199003)(120916001)(99396003)(122556002)(20776003)(117636001)(101416001)(97736003)(95666004)(66066001)(64706001)(106116001)(107886001)(75402003)(36756003)(106356001)(107046002)(229853001)(31966008)(105586002)(21056001)(110136001)(86362001)(85852003)(92566001)(92726001)(50986999)(54356999)(87936001)(74482002)(40100003)(2656002)(46102003)(76176999)(4396001)(19580395003)(19580405001)(85306004)(276003);DIR:OUT;SFP:1102;SCL:1;SRVR:AMSPR05MB0612;H:AMSPR05MB0611.eurprd05.prod.outlook.com;FPR:;MLV:sfv;PTR:InfoNoRecords;MX:1;A:1;LANG:en;
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginatorOrg: c-ware.de
X-Virus-Checked: Checked by ClamAV on apache.org

Ok ... well think I have to answer my own question again :-(=0A=
=0A=
It took me about a day to debug this, but it seems the conflict resolution =
of Maven has changed.=0A=
The thing is the framework:swc has the same name and groupId as the framewo=
rk:rb.swc ... so maven thinks there are two identical dependencies but with=
 different scope. This causes maven to go into JavaScopeDeriver.getDerivedS=
cope .... here in the end in the "else" simply RUNTIME is assumed as a defa=
ult. I think I will have to refactor the structure of our artifacts to gene=
rate the resource bundles into a different artifact (assumably by appending=
 ".rb" to the group Id.=0A=
=0A=
Chris=0A=
=0A=
________________________________________=0A=
Von: Christofer Dutz <christofer.dutz@c-ware.de>=0A=
Gesendet: Freitag, 17. Oktober 2014 14:28=0A=
An: Maven Users List=0A=
Betreff: AW: Strange Dependency problem after switching to Maven 3.1.1=0A=
=0A=
Actually in MavenProject the "resolvedArtifacts" variable contains this dat=
a ... not "artifacts" as the runtime artifacts are stripped out by the "art=
ifactFilter".=0A=
=0A=
Chris=0A=
=0A=
________________________________________=0A=
Von: Christofer Dutz <christofer.dutz@c-ware.de>=0A=
Gesendet: Freitag, 17. Oktober 2014 14:20=0A=
An: Maven Users List=0A=
Betreff: Strange Dependency problem after switching to Maven 3.1.1=0A=
=0A=
Hi,=0A=
=0A=
=0A=
I'm currently working on updating the Flexmojos plugin to support newer Mav=
en versions. Now I'm having a strange problem:=0A=
=0A=
=0A=
Flexmojos defines Flex dependencies as type "swc" for flex libraries and "r=
b.swc" for resource bundles. Furthermore we have a scope "rsl" (runtime sha=
red library) which sort of turns the default static linking to dynamic link=
ing.=0A=
=0A=
=0A=
So assume I have an artifact A and B of type "swc" that has one "rb.swc" de=
pendency to its corresponding resource bundle.=0A=
=0A=
=0A=
In my project I now add one dependency to A with scope "rsl" and one depend=
ency to B with the default "compile" scope.=0A=
=0A=
=0A=
In Maven 3.0.5 I can see the MavenProjects.artifacts list containing=0A=
=0A=
=0A=
A:swc:rsl=0A=
=0A=
A:rb.swc:compile=0A=
=0A=
B:swc:compile=0A=
=0A=
B:rb.swc:compile=0A=
=0A=
=0A=
In Maven 3.1.1 this however is:=0A=
=0A=
=0A=
A:swc:rsl=0A=
=0A=
A:rb.swc:runtime=0A=
=0A=
B:swc:compile=0A=
=0A=
B:rb.swc:compile=0A=
=0A=
=0A=
Why does the scope of the transitive dependencies switch to "runtime" in Ma=
ven 3.1.1?=0A=
=0A=
=0A=
Chris=0A=
=0A=
---------------------------------------------------------------------=0A=
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org=0A=
For additional commands, e-mail: users-help@maven.apache.org=0A=
=0A=

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


