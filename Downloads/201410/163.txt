From users-return-137432-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Oct  1 13:18:59 2014
Return-Path: <users-return-137432-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E9AA17837
	for <apmail-maven-users-archive@www.apache.org>; Wed,  1 Oct 2014 13:18:59 +0000 (UTC)
Received: (qmail 69910 invoked by uid 500); 1 Oct 2014 13:18:57 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 69836 invoked by uid 500); 1 Oct 2014 13:18:57 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 69811 invoked by uid 99); 1 Oct 2014 13:18:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2014 13:18:57 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fajwilson@gmail.com designates 209.85.213.171 as permitted sender)
Received: from [209.85.213.171] (HELO mail-ig0-f171.google.com) (209.85.213.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Oct 2014 13:18:52 +0000
Received: by mail-ig0-f171.google.com with SMTP id h15so236387igd.4
        for <users@maven.apache.org>; Wed, 01 Oct 2014 06:18:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=3BzrK5rjYIhGufQXYL0rBjLaIVslQxVeVyHnfws7DS4=;
        b=nPb2wA1XKbeRIAQJ8jHM/aagHhzrpCpPdKraGzjGZISCvrkYAqw2CfsyCEdYOn7Edl
         soW6AhWMgE0hmwyLpQkTqgFdU4Ivx+VO6LeQ6pUi/FXsCzaJ3oivGB3J+ud0w2QjMZhe
         LuhNo1126TQcg3ubiYkgdSabsV/QeT+1OMuk0jO7QujMUblCpOTGD0xd9CcnTUXZQk6d
         DLVuphG0tjs2Z/ukTilk5SvOfUVkV2Ve0P/IWKyY2xTn+01xO0K3S6WVEOMVdPlPMHiQ
         PGhYUDVmOTIBhJR+sMU7WkHaESFB3+eh71MwcCulLogLlOBj2kLAeV8UlOL7mQhEUJB5
         2jiw==
MIME-Version: 1.0
X-Received: by 10.42.165.74 with SMTP id j10mr64550881icy.2.1412169512220;
 Wed, 01 Oct 2014 06:18:32 -0700 (PDT)
Received: by 10.64.143.42 with HTTP; Wed, 1 Oct 2014 06:18:32 -0700 (PDT)
Date: Wed, 1 Oct 2014 14:18:32 +0100
Message-ID: <CAE2EOkD-7WZiMjxoRC_u=L09t72b5cESAqQtS_b0oWaXRWnFYg@mail.gmail.com>
Subject: Test Harness, how to wire a MavenProjectHelper
From: Frank Wilson <fajwilson@gmail.com>
To: users@maven.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Please could someone explain how to wire a MavenProjectHelper into my
mojo using the test harness?

I try to wire it using the test pom, however it seems the
MavenProjectHelpers dependencies are not satisfied.

Here's the line in my test POM:

https://github.com/zenlambda/fabric8/blob/mule-enable_fabric_deploy/fabric8-maven-plugin/src/test/resources/unit/forked-project-attachments/mule-test/pom.xml#L38

Here is the test:

https://github.com/zenlambda/fabric8/blob/mule-enable_fabric_deploy/fabric8-maven-plugin/src/test/java/io/fabric8/maven/ForkedTestValidatorTest.java#L30

The mojo I am trying to execute fails here:

https://github.com/zenlambda/fabric8/blob/mule-enable_fabric_deploy/fabric8-maven-plugin/src/test/java/io/fabric8/maven/probes/AttachZipMojo.java#L52


Because of a null pointer exception here:

https://github.com/apache/maven/blob/maven-3.0.5/maven-core/src/main/java/org/apache/maven/project/DefaultMavenProjectHelper.java#L70

presumably because the requirement wasn't satisfied.

https://github.com/apache/maven/blob/maven-3.0.5/maven-core/src/main/java/org/apache/maven/project/DefaultMavenProjectHelper.java#L40

Stacktrace:

java.lang.NullPointerException
    at org.apache.maven.project.DefaultMavenProjectHelper.attachArtifact(DefaultMavenProjectHelper.java:70)
    at io.fabric8.maven.probes.AttachZipMojo.execute(AttachZipMojo.java:52)
    at io.fabric8.maven.ForkedTestValidatorTest.testNoApparentAttachmentsWhenMojoForksLifecycle(ForkedTestValidatorTest.java:37)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:84)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:74)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:211)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:67)

Why isn't plexus satisfying the requirement?

Thanks,

Frank

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


