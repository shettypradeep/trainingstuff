From users-return-137657-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Oct 29 22:41:53 2014
Return-Path: <users-return-137657-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 09F78173F9
	for <apmail-maven-users-archive@www.apache.org>; Wed, 29 Oct 2014 22:41:53 +0000 (UTC)
Received: (qmail 56167 invoked by uid 500); 29 Oct 2014 22:41:51 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 56078 invoked by uid 500); 29 Oct 2014 22:41:51 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 55970 invoked by uid 99); 29 Oct 2014 22:41:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2014 22:41:50 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ctrueden.wisc@gmail.com designates 209.85.223.171 as permitted sender)
Received: from [209.85.223.171] (HELO mail-ie0-f171.google.com) (209.85.223.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Oct 2014 22:41:24 +0000
Received: by mail-ie0-f171.google.com with SMTP id x19so4081260ier.30
        for <users@maven.apache.org>; Wed, 29 Oct 2014 15:40:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=cu5seQx7qGTZGyV5w8AC+XyRrOPybqzrMbe4bYzm8sk=;
        b=KgfbgPdSyF9j3qrIOSCRiM6qT7Zi8Rnh/YfmoDOLUkD48VHg80dacTvK8FU5iKNyAo
         IVCJiZF4/xvgpGfcQUc0indzwMDMOBbn0bsKe3QH5+uakTjMAM3vID23UsUiUvKfv4Jx
         vxZiRQgxbbahvyT35eAj+uS/ccbVBa+wYt4CjYzfBjIqcwBZKCWSYtNa5B2oZLZZdC1G
         WwPdu23eHJKCLzO4vdiiwY8H7rxNgA2dKPsts7LTt0DhcOraV1FN2AfSIFpkj0YSEMd7
         sX+FvNsqL3OkRV6SSxGcHwZtFDYUwoMMF6kaXzqw7/vu9KrpWzeqv/ZUXTfJLC9RwPK/
         hAZA==
X-Received: by 10.42.152.129 with SMTP id i1mr4747727icw.96.1414622438496;
 Wed, 29 Oct 2014 15:40:38 -0700 (PDT)
MIME-Version: 1.0
Sender: ctrueden.wisc@gmail.com
Received: by 10.107.43.199 with HTTP; Wed, 29 Oct 2014 15:40:08 -0700 (PDT)
In-Reply-To: <CADVp3v_Mb2z_qkYGjOFiFxFUw+iwNU=N-m60-4-g6Ym-dodhsw@mail.gmail.com>
References: <CAE8kHEwi-wqWygidE88k+SkM9zvoRyTro2GFEFmsW-ypkpSSiw@mail.gmail.com>
 <CADVp3v9Y+HTn-JPuYz_jAd3yoayW+xN0YyZZ5Gwof5=_fd9bEQ@mail.gmail.com>
 <CAE8kHEy7hsUUZx9webzFgELY1HsdZrVYvbr_j34BxB1kn-boHg@mail.gmail.com>
 <CADN69yn6Hp-e4faHw5SQK4uN1Lj1r_X5XZogC_yUdEcCv2NKmQ@mail.gmail.com> <CADVp3v_Mb2z_qkYGjOFiFxFUw+iwNU=N-m60-4-g6Ym-dodhsw@mail.gmail.com>
From: Curtis Rueden <ctrueden@wisc.edu>
Date: Wed, 29 Oct 2014 17:40:08 -0500
X-Google-Sender-Auth: QGf40Nr18_udz3EJbH7ZN2lWGpg
Message-ID: <CADN69ynKo4cyJamz5iDhV0TeqzLeY4zMPGUOY-Cmvfwtmzq3uA@mail.gmail.com>
Subject: Re: [pre-verify over deploy]
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=90e6ba6e86e8f020e7050697735f
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba6e86e8f020e7050697735f
Content-Type: text/plain; charset=UTF-8

Hi Barrie,

> Whether its Jenkins, or a developer, you've still pushed a release
> that could break the build.
>
> This is where you need some isolation available to your workflow.

Agreed!

However, for Fay's stated requirement, it may be sufficient to have a
broken master branch as long as the latest deployed SNAPSHOT is not broken,
since he stated:

> Currently my pain is our developer would deploy broken bytecode to our
> dev repository and broken others work.

Regards,
Curtis

On Wed, Oct 29, 2014 at 5:15 PM, Barrie Treloar <baerrach@gmail.com> wrote:

> On 30 October 2014 08:38, Curtis Rueden <ctrueden@wisc.edu> wrote:
>
> > Hi Fay,
> >
> > > Could i define a intermediate repository, everytime they deploy,
> > > jenkins will verify it.
> >
> > Why not have Jenkins do your deploys? I.e.: make it so that only Jenkins
> > has deploy permission to your remote repository. So your devs can no
> longer
> > run "mvn deploy" from the CLI and expect it to work, but instead just
> push
> > to master (or whatever integration branch) and then Jenkins runs the
> build.
> >
> > Once Jenkins does your deploys, you can set up your jobs to test for more
> > stringent conditions before actually doing the deploy. E.g.:
> >
> > $ git clean -fdx
> > $ mvn clean install
> > $ bin/verify-artifacts.sh
> > $ mvn deploy
> >
> > And "verify-artifacts.sh" does whatever further programmatic testing you
> > need.
> >
> > OTOH, in many cases, you don't need a shell script -- often times, you
> can
> > get what you need using Maven plugins like Surefire, Failsafe, and
> > Enforcer. If you go that route, it might be enough so that devs running
> > "mvn deploy" won't deploy bad stuff to the repo by default (unless they
> are
> > aggressive enough to run e.g. "mvn -DskipTests deploy" which would be
> > pretty bold).
> >
> > Regards,
> > Curtis
>
>
> Whether its Jenkins, or a developer, you've still pushed a release that
> could break the build.
>
> This is where you need some isolation available to your workflow.
>
> Stuff breaks - it happens, Fay needs to determine how they want to deal
> with it.
>

--90e6ba6e86e8f020e7050697735f--

