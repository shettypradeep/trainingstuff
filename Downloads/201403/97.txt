From users-return-135889-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Mar 20 19:32:59 2014
Return-Path: <users-return-135889-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E830108D0
	for <apmail-maven-users-archive@www.apache.org>; Thu, 20 Mar 2014 19:32:59 +0000 (UTC)
Received: (qmail 37912 invoked by uid 500); 20 Mar 2014 19:32:53 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 37835 invoked by uid 500); 20 Mar 2014 19:32:52 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 37812 invoked by uid 99); 20 Mar 2014 19:32:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2014 19:32:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of eric.kolotyluk@gmail.com designates 209.85.220.47 as permitted sender)
Received: from [209.85.220.47] (HELO mail-pa0-f47.google.com) (209.85.220.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Mar 2014 19:32:45 +0000
Received: by mail-pa0-f47.google.com with SMTP id lj1so1393574pab.20
        for <users@maven.apache.org>; Thu, 20 Mar 2014 12:32:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        bh=2dXDkuKNbxtnDin9kOsD1ruA7E3EpWUbZ3TASQtwsd8=;
        b=eE7KErZHr7L4T35z/XyPQb8F4bVmhrrY4VBr7cumh33MQ/hlXwh7JZO3CWRim9sABz
         RJGk8nRQx0K8a+SUJOD8GEhzAZUIBRFPCOdLl1EDd+rJCuWWigd/+gZPVOuN4Lp//QrW
         42tB4z6sjafsE2K0M5LrdBhwxdwB3j5pQ6fK36PWLEXfxHHf4VPahwupSwqjO7wniE2K
         QbgqGDVbVirge8WinGoL1w3m9ulIgTvWyGOJDeD4WZOzLoZqljDT8FFrjUlB4SgC8sEJ
         9sFIKHDJI04gWg5Oe2BWGhwRcvF4i2dWbCmA83YKeFETsf8f0kNdpY6uNbmCCpKY/EpY
         Gcjg==
X-Received: by 10.68.129.5 with SMTP id ns5mr26826479pbb.147.1395343942699;
        Thu, 20 Mar 2014 12:32:22 -0700 (PDT)
Received: from [192.168.0.17] (S0106602ad07f9cfa.vc.shawcable.net. [24.85.131.20])
        by mx.google.com with ESMTPSA id qq5sm5448827pbb.24.2014.03.20.12.32.21
        for <users@maven.apache.org>
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 20 Mar 2014 12:32:21 -0700 (PDT)
Message-ID: <532B4246.9050606@gmail.com>
Date: Thu, 20 Mar 2014 12:32:22 -0700
From: Eric Kolotyluk <eric.kolotyluk@gmail.com>
User-Agent: Mozilla/5.0 (Windows NT 6.3; WOW64; rv:24.0) Gecko/20100101 Thunderbird/24.4.0
MIME-Version: 1.0
To: maven users <users@maven.apache.org>
Subject: Forcing Integration Tests Before a Release
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am looking for some way to force my integration tests before a 
release, without explicitly using a profile.

For example,

       <plugin>
<artifactId>maven-release-plugin</artifactId>
         <configuration>
           <preparationGoals>clean verify site</preparationGoals>
         </configuration>
       </plugin>

But that doesn't work because unless the failsafe plugin is defined, it 
won't run the tests.

I thought of doing something like

   <profiles>
     <profile>
       <id>run-it</id>
       <activation>
         <file>
<missing>target/failsafe-reports</missing>
         </file>
       </activation>
       <build>
         <plugins>
           <plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-failsafe-plugin</artifactId>
             <version>2.17</version>
             <executions>
               <execution>
                 <goals>
                   <goal>integration-test</goal>
                   <goal>verify</goal>
                 </goals>
               </execution>
             </executions>
           </plugin>
         </plugins>
       </build>
     </profile>
   </profiles>

But that will cause the integration tests to be run after every clean.

Is there some way I can trigger the integration tests when doing a release

    mvn release:prepare

without having to do

    mvn release:prepare -P run-it

Cheers, Eric

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


