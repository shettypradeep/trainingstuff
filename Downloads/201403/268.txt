From users-return-135679-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Mar  4 11:34:08 2014
Return-Path: <users-return-135679-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5BEB910CB4
	for <apmail-maven-users-archive@www.apache.org>; Tue,  4 Mar 2014 11:34:08 +0000 (UTC)
Received: (qmail 39690 invoked by uid 500); 4 Mar 2014 11:34:04 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 39518 invoked by uid 500); 4 Mar 2014 11:33:49 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 39485 invoked by uid 99); 4 Mar 2014 11:33:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2014 11:33:46 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of balteo@gmail.com designates 74.125.82.179 as permitted sender)
Received: from [74.125.82.179] (HELO mail-we0-f179.google.com) (74.125.82.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Mar 2014 11:33:39 +0000
Received: by mail-we0-f179.google.com with SMTP id x48so4702715wes.38
        for <users@maven.apache.org>; Tue, 04 Mar 2014 03:33:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=vqVoHGDoT6sAO8cOlQcztTt/UKtzsMRLyuZg5Q87zLU=;
        b=VjoUD4jQVLKCS9KM3PDkqLt7JWIBCMJ+9HmBvpn/SfaILK51AUTcZyQbm2Ne6VPCvj
         b6rD3q+H0wGZHCaCWLgOVDvwuuywh72s3mGRNrv49KMaJxavTCmRcrZGcSMX7yawHTDC
         ARsHxx5x3W+YABZ0+NSSedjBjUHq5FKeYqSgP5ztcsM3+61A4VkTcmPQAMteJT9vhPez
         AVeIHqucmcEbI/PSuDNkRrJ7Q1nq8BxuIwuP4V+bwms6cGBmeJn1tSwY6rBPgQRKn5ni
         anqk5a9jiVuaB5soMAeQn3na2XS2smHSftyB151GtzlFZB5KPRpocraWgp21X4MwhxVU
         Tnsg==
MIME-Version: 1.0
X-Received: by 10.194.86.130 with SMTP id p2mr14824351wjz.88.1393932799507;
 Tue, 04 Mar 2014 03:33:19 -0800 (PST)
Received: by 10.227.9.71 with HTTP; Tue, 4 Mar 2014 03:33:19 -0800 (PST)
Date: Tue, 4 Mar 2014 12:33:19 +0100
Message-ID: <CA+uk_pJmX4fctyCsaSF5Th48DS6BmfveKDsxnV1474S6jnaVTA@mail.gmail.com>
Subject: Using filtered resources with the maven assembly plugin and the
 jar-with-dependencies descriptorRef
From: Julien Martin <balteo@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=089e0102eda45b026f04f3c6453c
X-Virus-Checked: Checked by ClamAV on apache.org

--089e0102eda45b026f04f3c6453c
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I am trying to filter resources before they are "fed" to  the maven
assembly plugin (with a jar-with-dependencies) to no avail.

Here are the relevant portions of my POM.xml:

...

 <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>

...
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.6</version>
                <executions>
                    <execution>
                        <id>copy-resources</id>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>target</outputDirectory>
                            <resources>
                                <resource>

<directory>misc/external-resources</directory>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <execution>
                        <id>dev</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>target/dev</outputDirectory>
                            <filters>

<filter>src/main/filters/dev.properties</filter>
                            </filters>
                        </configuration>
                    </execution>
                    <execution>
                        <id>prod</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>target/prod</outputDirectory>
                            <filters>

<filter>src/main/filters/prod.properties</filter>
                            </filters>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
...

            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <executions>
                    <execution>
                        <id>dev-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                        <configuration>
                            <archive>
                                <manifest>
                                    <addClasspath>true</addClasspath>
                                    <mainClass>com.ids.main.Main</mainClass>
                                </manifest>
                            </archive>
                            <descriptorRefs>

<descriptorRef>jar-with-dependencies</descriptorRef>
                            </descriptorRefs>
                            <filters>

<filter>src/main/filters/dev.properties</filter>
                            </filters>

<finalName>IDS-dev-${project.version}</finalName>
                            <appendAssemblyId>false</appendAssemblyId>
                        </configuration>
                    </execution>
                </executions>
            </plugin>


Can anyone please help?

Regards,

Julien.

--089e0102eda45b026f04f3c6453c--

