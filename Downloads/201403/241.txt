From users-return-135715-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Mar  6 09:49:45 2014
Return-Path: <users-return-135715-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 875F410A21
	for <apmail-maven-users-archive@www.apache.org>; Thu,  6 Mar 2014 09:49:45 +0000 (UTC)
Received: (qmail 18683 invoked by uid 500); 6 Mar 2014 09:49:41 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 18607 invoked by uid 500); 6 Mar 2014 09:49:33 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 18597 invoked by uid 99); 6 Mar 2014 09:49:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2014 09:49:33 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [209.85.213.175] (HELO mail-ig0-f175.google.com) (209.85.213.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Mar 2014 09:49:26 +0000
Received: by mail-ig0-f175.google.com with SMTP id ur14so10580284igb.2
        for <users@maven.apache.org>; Thu, 06 Mar 2014 01:49:05 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:date:from:to:message-id:in-reply-to:references
         :subject:mime-version:content-type;
        bh=HRUGYdobIodjWjHPglLFDsbeF00P0piaTudY84aRJ+Y=;
        b=QfmLpHLRkTXFXhRbkCqm7HC8cyTOJQgGWdpToVkGqoWeKn+oDeu2kwySaPd3l3Qvlb
         UWbf+Ty2LuG04HzSNAPd5PVbApoRuGs5weBIEOopfa4gYF4OT9Ns3iUZLaQVNVQXUPYN
         fb2kxbusVGOhTjUnZyf13k26KjPwawq5UVDgU6/kaZ4MXQBFMgyOicEPLw76Vnrzh1SU
         KWZvSjuef5+KG4vL7RxGVDRRlS73keaShJlLhM/nRXU6KS/WuOGcgzbQVwGBUvWiW2yl
         ZkHfVN0s/Q0SdxgITIgrQXytAH1AsfuNAJs69gykLyAdsfJcBiM7swTFLGgMyLZW3OmS
         gL2A==
X-Gm-Message-State: ALoCoQmT5EFyOrZyl3MVYHp0AirsWM/NclF7TLhalww4M1j8rsmXj+H5JorB0z85GQkj76+Dad+A
X-Received: by 10.50.92.102 with SMTP id cl6mr14404085igb.44.1394099344968;
        Thu, 06 Mar 2014 01:49:04 -0800 (PST)
Received: from Jordans-MacBook-Pro.local (cpe-907240009601.cpe.cableonda.net. [190.219.168.142])
        by mx.google.com with ESMTPSA id ji9sm54250137igb.1.2014.03.06.01.49.03
        for <users@maven.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 06 Mar 2014 01:49:04 -0800 (PST)
Date: Thu, 6 Mar 2014 04:48:47 -0500
From: Jordan Zimmerman <jordan@jordanzimmerman.com>
To: Maven Users List <users@maven.apache.org>
Message-ID: <etPan.5318448e.643c9869.193@Jordans-MacBook-Pro.local>
In-Reply-To: <etPan.531843fb.6b8b4567.193@Jordans-MacBook-Pro.local>
References: <etPan.53172b97.6a2342ec.9c7@Jordans-MacBook-Pro.local>
 <7459095.LZzBjmdzke@herve-desktop>
 <etPan.531843fb.6b8b4567.193@Jordans-MacBook-Pro.local>
Subject: Re: Deploying archetypes
X-Mailer: Airmail (231)
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="5318448e_66334873_193"
X-Virus-Checked: Checked by ClamAV on apache.org

--5318448e_66334873_193
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Wow - looks like I=E2=80=99m on the cutting edge. It seems the NPE is fix=
ed in 2.9 of the deploy plugin which isn=E2=80=99t released yet:

https://jira.codehaus.org/browse/MDEPLOY-174


=46rom:=C2=A0Jordan Zimmerman jordan=40jordanzimmerman.com
Reply:=C2=A0Jordan Zimmerman jordan=40jordanzimmerman.com
Date:=C2=A0March 6, 2014 at 4:46:37 AM
To:=C2=A0Maven Users List users=40maven.apache.org
Subject:=C2=A0 Re: Deploying archetypes =20

The archetype is packaging already. The only problem is the deploy. Maint=
aining the generated archetype by hand is out of the question and defeats=
 the purpose of the archetype. This is a sample/base application that is =
in constant development. The archetype needs to be up-to-date with any ch=
anges.=C2=A0

The maddening thing is that I=E2=80=99m able to install the archetype jus=
t fine via:

=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <plugin>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <artifactId>maven=
-install-plugin</artifactId>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <executions>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <ex=
ecution>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 <phase>install</phase>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 <goals>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 <goal>install-file</goal>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 </goals>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 <configuration>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 <file>=24=7Bproject.build.directory=7D/generated=
-sources/archetype/target/platform-sample-app-archetype-=24=7Bproject.ver=
sion=7D.jar</file>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 <pom=46ile>=24=7Bproject.build.directory=7D/gene=
rated-sources/archetype/pom.xml</pom=46ile>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 </configuration>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 </e=
xecution>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 </executions>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 </plugin>

However, doing this same thing with deploy generates an NPE exception:

=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <plugin>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <artifactId>maven=
-deploy-plugin</artifactId>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <executions>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <ex=
ecution>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 <phase>deploy</phase>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 <goals>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 <goal>deploy-file</goal>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 </goals>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 <configuration>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 <file>=24=7Bproject.build.directory=7D/generated=
-sources/archetype/target/platform-sample-app-archetype-=24=7Bproject.ver=
sion=7D.jar</file>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 <pom=46ile>=24=7Bproject.build.directory=7D/gene=
rated-sources/archetype/pom.xml</pom=46ile>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 </configuration>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 </e=
xecution>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 </executions>
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 </plugin>

=5BERROR=5D =46ailed to execute goal org.apache.maven.plugins:maven-deplo=
y-plugin:2.8.1:deploy-file (default) on project platform-sample-app: Exec=
ution default of goal org.apache.maven.plugins:maven-deploy-plugin:2.8.1:=
deploy-file failed. NullPointerException -> =5BHelp 1=5D
org.apache.maven.lifecycle.LifecycleExecutionException: =46ailed to execu=
te goal org.apache.maven.plugins:maven-deploy-plugin:2.8.1:deploy-file (d=
efault) on project platform-sample-app: Execution default of goal org.apa=
che.maven.plugins:maven-deploy-plugin:2.8.1:deploy-file failed.
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.=
java:224)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.=
java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.=
java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProjec=
t(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProjec=
t(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBui=
ld(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycle=
Starter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:317)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:152)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:555)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:214)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:158)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.j=
ava:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccess=
orImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:606)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launc=
her.java:289)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java=
:229)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Lau=
ncher.java:415)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:3=
56)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution de=
fault of goal org.apache.maven.plugins:maven-deploy-plugin:2.8.1:deploy-f=
ile failed.
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultB=
uildPluginManager.java:115)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.=
java:208)
... 19 more
Caused by: java.lang.NullPointerException
at org.apache.maven.artifact.repository.MavenArtifactRepository.protocol(=
MavenArtifactRepository.java:218)
at org.apache.maven.artifact.repository.MavenArtifactRepository.<init>(Ma=
venArtifactRepository.java:79)
at org.apache.maven.repository.legacy.repository.DefaultArtifactRepositor=
y=46actory.createArtifactRepository(DefaultArtifactRepository=46actory.ja=
va:129)
at org.apache.maven.repository.legacy.repository.DefaultArtifactRepositor=
y=46actory.createDeploymentArtifactRepository(DefaultArtifactRepository=46=
actory.java:78)
at org.apache.maven.artifact.repository.DefaultArtifactRepository=46actor=
y.createDeploymentArtifactRepository(DefaultArtifactRepository=46actory.j=
ava:67)
at org.apache.maven.plugin.deploy.Deploy=46ileMojo.execute(Deploy=46ileMo=
jo.java:233)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultB=
uildPluginManager.java:106)
... 20 more


=46rom:=C2=A0Herv=C3=A9 BOUTEMY herve.boutemy=40free.fr
Reply:=C2=A0Maven Users List users=40maven.apache.org
Date:=C2=A0March 6, 2014 at 2:20:03 AM
To:=C2=A0Maven Users List users=40maven.apache.org
Subject:=C2=A0 Re: Deploying archetypes

befaore deploying, you'll have to package, which usually attaches the art=
ifact
for later automatic deployment by deploy plugin
see http://maven.apache.org/archetype/maven-archetype-plugin/
and the maven-archetype packaging automating it
http://maven.apache.org/archetype/archetype-packaging/


but IMHO, trying to both generate an archetype, package it and deploy it =
from
the example project is a risky process, because your (example project) po=
m
will mix configuration for archetype generation/deployment with the valua=
ble
configuration you intend to have in the archetype

you really should use create-from-project once then maintain the generate=
d
archetype project (and in fact the generic example project in
src/main/resources)

Regards,

Herv=C3=A9

Le mercredi 5 mars 2014 08:50:00 Jordan Zimmerman a =C3=A9crit :
> Hello,
>
> I=E2=80=99d like to configure my project to auto-deploy my generated ar=
chetype as
> part of the deploy execution. Is there a way to do this=3F So, to creat=
e the
> archetype, I have this:
>
> <plugin>
> <artifactId>maven-archetype-plugin</artifactId>
> <configuration>
> <property=46ile>archetype.properties</property=46ile>
> </configuration>
> <executions>
> <execution>
> <phase>package</phase>
> <goals>
> <goal>create-from-project</goal>
> </goals>
> </execution>
> </executions>
> </plugin>
>
> Is there a way to configure the deploy plugin (or some other plugin) to=
 run
> a =E2=80=9Cdeploy=E2=80=9D goal on the generated archetype
> (in target/generated-sources/archetype/target)=3F
>
> Thanks=21
>
> -Jordan


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe=40maven.apache.org
=46or additional commands, e-mail: users-help=40maven.apache.org


--5318448e_66334873_193--


