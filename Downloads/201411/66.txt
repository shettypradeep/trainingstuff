From users-return-137847-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Nov 25 22:20:24 2014
Return-Path: <users-return-137847-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A172C10AF3
	for <apmail-maven-users-archive@www.apache.org>; Tue, 25 Nov 2014 22:20:24 +0000 (UTC)
Received: (qmail 8759 invoked by uid 500); 25 Nov 2014 22:20:22 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 8660 invoked by uid 500); 25 Nov 2014 22:20:22 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 8649 invoked by uid 99); 25 Nov 2014 22:20:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2014 22:20:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mgainty@hotmail.com designates 65.55.116.24 as permitted sender)
Received: from [65.55.116.24] (HELO BLU004-OMC1S13.hotmail.com) (65.55.116.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2014 22:19:56 +0000
Received: from BLU172-W44 ([65.55.116.8]) by BLU004-OMC1S13.hotmail.com over TLS secured channel with Microsoft SMTPSVC(7.5.7601.22751);
	 Tue, 25 Nov 2014 14:19:33 -0800
X-TMN: [n9dlc5YQLYaSY30VX+upAAZxmn2xFwq6]
X-Originating-Email: [mgainty@hotmail.com]
Message-ID: <BLU172-W4447F782B71A4E9988A234AE730@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_bd176e24-57fc-4109-8495-130309eb4795_"
From: Martin Gainty <mgainty@hotmail.com>
To: "users@maven.apache.org" <users@maven.apache.org>
Subject: RE: Maven use for integration
Date: Tue, 25 Nov 2014 17:19:32 -0500
Importance: Normal
In-Reply-To:
 <OF8090515E.1DC787FD-ON85257D9B.0073D2EF-85257D9B.0075C34B@belden.com>
References:
 <OFDF606594.F32EF26E-ON85257D9B.00556FC5-85257D9B.00578296@belden.com>
 <5474CB61.4050608@artifact-software.com>
 <OF37BD09A7.24B6D1A5-ON85257D9B.00661F2B-85257D9B.00670589@belden.com>
 <5474E176.6020102@artifact-software.com>,<OF8090515E.1DC787FD-ON85257D9B.0073D2EF-85257D9B.0075C34B@belden.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 25 Nov 2014 22:19:33.0666 (UTC) FILETIME=[E3E0E820:01D008FD]
X-Virus-Checked: Checked by ClamAV on apache.org

--_bd176e24-57fc-4109-8495-130309eb4795_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable




> To: users@maven.apache.org
> Subject: Re: Maven use for integration
> From: Alejandro.Endo@grassvalley.com
> Date: Tue=2C 25 Nov 2014 16:26:17 -0500
>=20
> No=2C not a zip. I just need the bundles to be in the file system so that=
=20
> when the server packaging starts=2C they get packaged.
>=20
> The job of the integrator is just to download the artifacts from nexus an=
d=20
> leave them in the filesystem of the server's image. The fact that i want=
=20
> to use the info in the poms to minimize maintenance of the integration=20
> list is kind of orthogonal=2C i could do everything just with wget=2C but=
 i=20
> would need a list of every single bundle to download.
>=20
> Maybe a bit of description of how building the server work will make it=20
> clearer. We download all the bundles from nexus (this is the part I do=20
> with maven)=2C compile kernel drivers unrelated to the bundles=2C prepare=
 OS=20
> configuration scripts=2C etc etc and then the whole system is packaged in=
to=20
> an image that gets deployed to the client. This packaging into an image=20
> has nothing to do with maven=2C only the artifact download is done by mav=
en=20
> at the server creation job (and not even for all the artifacts=2C just fo=
r=20
> OSGi bundle artifacts)
>=20
> And yes=2C you're right that for non-osgi artifacts this wouldn't work du=
e=20
> to the classloader=2C so I definitely understand the default behaviour of=
=20
> maven=2C but this is in an OSGi context. Is there any way to bypass this=
=20
> core behaviour? a system property=2C flag?? it is very convenient to do=20
> integrations with maven due to the rich info in the poms. But obviously=
=2C=20
> the pom data could be used outside of maven so maybe what I'm missing is =
a=20
> different tool altogether.
MG>Eclipse OSGI console would give you a high level view of your OSGI compo=
nents and access to commands such as  start=2C stop..
MG>https://wiki.eclipse.org/OSGI_component_support_in_Service_Creation#Exis=
ting_OSGI_tooling

>=20
> Another option would be a maven-plugin that creates its own dependency=20
> graph and doesn't rely on the one provided by maven core=2C which support=
s=20
> only a single version of a given artifact (at least that's what it looks=
=20
> like)
>=20
>=20
> Alejandro Endo | Software Designer/Concepteur de logiciels=20
>=20
>=20
>=20
>=20
> From:   Ron Wheeler <rwheeler@artifact-software.com>
> To:     users@maven.apache.org=2C=20
> Date:   2014-11-25 03:07 PM
> Subject:        Re: Maven use for integration
>=20
>=20
>=20
> It is still a bit unclear about what you will end up with if your idea=20
> works.
> Are you just hoping to get a zip file of OSGi artifacts that you can=20
> unzip to deploy?
>=20
> Multiple versions of non-OSGi artifacts will not work since the=20
> classloader will only load the first version that it finds.
>=20
>=20
> On 25/11/2014 1:45 PM=2C Alejandro.Endo@grassvalley.com wrote:
> > Hi Ron=2C
> > #1. I don't understand your question. You mean the poms of the artifact=
s
> > deployed in nexus? they each have their own pom and instructions on how=
=20
> to
> > build itself=2C just like a regular maven artifact
> > So I have an artifact A that gets deployed to nexus with groupId foo.ba=
r
> > and artifactId A and version 1.0 and then six months later A gets=20
> updated
> > to version 2.0
> > All this has nothing to do with integration
> >
> > Now the integration job will say=2C bring all the artifacts and their
> > dependencies to be able to run. One of them will be A 1.0.
> > Once a 2.0 is released=2C i don't want to integrate ONLY 2.0. I want to
> > integrate 1.0 and 2.0. So in my integration pom i have two dependencies=
=2C
> > one foo.bar:A:1.0 and another dependency foo.bar:A:2.0. This is were=20
> maven
> > core complains and ends up resolving one over the other=2C hence when i=
 do=20
> a
> > copy-dependencies it only ends up integrating one of them
> So the 2 versions of A are on a list that you manually maintain in an=20
> integration file.
> Could you not keep that outside a pom and just get each version from the=
=20
> repo and use the pom of foo.bar:A:1.0 and foo.bar:A:2.0 to get their=20
> respective dependencies to build a list of the other artifacts. As long=20
> as you are talking about OSGi=2C you are OK.
> >
> > #2. Yes=2C I am. The problem is that via the nexus API there's no way t=
o
> > have a list of ONLY entry points where i can say explicitly in a list
> > (that i'm trying to keep as small as possible) integrate A and that=20
> would
> > imply B and C if A depends on B and C. When I do it with maven=2C in my
> > integration pom I only declare a dependency on A and the dependency=20
> plugin
> > will copy transitive dependencies. This allows me to keep the manually
> > maintained list as small as possible and never forgetting to update it
> > when i introduce new dependencies since those new dependencies will be
> > pulled by the dependency plugin just because the POM already contains=20
> the
> > relationship information
> So once you have resolved the dependencies=2C you can get the Artifacts=20
> and repeat the resolution using these new dependencies eliminating=20
> duplicates if you find any.
>=20
> > I hope everything is clearer now=2C let me know
> You can use the Maven code to build the dependency resolution but you=20
> will have to glue this together with some top level code that reads your=
=20
> list of "seed" artifacts including the multiple versions of the ones=20
> that you care about and probably something to eliminate duplicate=20
> transitive dependencies and resolve version conflicts for non-OSGi=20
> artifacts if these are part of your requirement.
>=20
> It is hard to see how Maven alone is going to be happy building=20
> Artifacts that contain multiple versions of jar files without some help=20
> to let it know when it is OK and when it will lead to grief.
>=20
>=20
> > Thanks for replying
> >
> >
> > Alejandro Endo | Software Designer/Concepteur de logiciels
> >
> >
> >
> >
> > From:   Ron Wheeler <rwheeler@artifact-software.com>
> > To:     users@maven.apache.org=2C
> > Date:   2014-11-25 01:33 PM
> > Subject:        Re: Maven use for integration
> >
> >
> >
> > Since you are not getting any responses=2C let me ask some questions to
> > get some more details on the table.
> >
> > 1) Where is the definitive single source of dependency info that you us=
e
> > to create the GAV ids for Nexus? How can a single pom reference 2
> > versions of an artifact?
> >
> > 2) Are you aware of the API for Nexus? Can you use this to get the
> > artifacts once you have the list of artifacts?
> >
> > Perhaps these answers will stimulate some ideas.
> > Ron
> >
> > On 25/11/2014 10:55 AM=2C Alejandro.Endo@grassvalley.com wrote:
> >> Hello everyone=2C
> >>
> >> I wanted to ask what you guys though about using maven as an=20
> integration
> >> tool. Is it out of the scope of maven? is anyone else doing this? What=
=20
> I
> >> mean by integration is that the artifacts are built (also by maven but
> > in
> >> other jobs) and deployed to nexus=2C but I still need to download them=
=20
> all
> >> to a server for deployment.
> >> The build of this server invokes maven and I hooked to it via a pom=20
> that
> >> points to some artifacts that serve as an entry point to the dependenc=
y
> >> graph and then use the dependency:copy-dependencies goal. The point of
> >> this was to leverage the dependency information available in poms so I
> >> didn't have to keep a list of ALL the artifacts needed (osgi bundles
> > BTW)=2C
> >> just of an entry point for maven to crawl the graph and pull=20
> everything.
> >> The problem I'm encountering that tells me maybe Maven is not meant fo=
r
> >> this is that I need to pull two artifacts where only the version is
> >> different (since in OSGi both can coexist just fine) but maven chooses
> >> only one and the other one doesn't get integrated. So=2C are there way=
s=20
> to
> >> force maven to not drop the second version when resolving its model or
> > am
> >> I just stretching what maven can do? if so=2C are there any other tool=
s
> > that
> >> leverage pom information to download artifacts from a maven repo? i
> > don't
> >> want to have to maintain that dependency information in two different
> >> places
> >>
> >> Thank you=2C
> >>
> >> Alejandro Endo | Software Designer/Concepteur de logiciels
> >>
> >> DISCLAIMER:
> >> Privileged and/or Confidential information may be contained in this
> >> message. If you are not the addressee of this message=2C you may not
> >> copy=2C use or deliver this message to anyone. In such event=2C you
> >> should destroy the message and kindly notify the sender by reply
> >> e-mail. It is understood that opinions or conclusions that do not
> >> relate to the official business of the company are neither given
> >> nor endorsed by the company.
> >> Thank You.
> >>
> >
>=20
>=20
> --=20
> Ron Wheeler
> President
> Artifact Software Inc
> email: rwheeler@artifact-software.com
> skype: ronaldmwheeler
> phone: 866-970-2435=2C ext 102
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: users-unsubscribe@maven.apache.org
> For additional commands=2C e-mail: users-help@maven.apache.org
>=20
>=20
>=20
> DISCLAIMER:
> Privileged and/or Confidential information may be contained in this
> message. If you are not the addressee of this message=2C you may not
> copy=2C use or deliver this message to anyone. In such event=2C you
> should destroy the message and kindly notify the sender by reply
> e-mail. It is understood that opinions or conclusions that do not
> relate to the official business of the company are neither given
> nor endorsed by the company.
> Thank You.
 		 	   		  =

--_bd176e24-57fc-4109-8495-130309eb4795_--

