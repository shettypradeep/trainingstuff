From users-return-137751-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sat Nov 15 18:07:34 2014
Return-Path: <users-return-137751-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A768C817
	for <apmail-maven-users-archive@www.apache.org>; Sat, 15 Nov 2014 18:07:34 +0000 (UTC)
Received: (qmail 18589 invoked by uid 500); 15 Nov 2014 18:07:32 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 18496 invoked by uid 500); 15 Nov 2014 18:07:32 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 18485 invoked by uid 99); 15 Nov 2014 18:07:32 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2014 18:07:32 +0000
Received: from mail-qa0-f43.google.com (mail-qa0-f43.google.com [209.85.216.43])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id 73FC01A01AD
	for <users@maven.apache.org>; Sat, 15 Nov 2014 18:06:29 +0000 (UTC)
Received: by mail-qa0-f43.google.com with SMTP id bm13so2068676qab.16
        for <users@maven.apache.org>; Sat, 15 Nov 2014 10:07:28 -0800 (PST)
X-Received: by 10.224.96.136 with SMTP id h8mr12428633qan.13.1416074848632;
 Sat, 15 Nov 2014 10:07:28 -0800 (PST)
MIME-Version: 1.0
Received: by 10.140.43.7 with HTTP; Sat, 15 Nov 2014 10:07:08 -0800 (PST)
In-Reply-To: <m45j6h$g3q$1@ger.gmane.org>
References: <CAGr9p8CxcuY7L5UQkRAi2kSBLAYR4eDNkmshvebgp5fiGYDHCQ@mail.gmail.com>
 <m45j6h$g3q$1@ger.gmane.org>
From: Robert Metzger <rmetzger@apache.org>
Date: Sat, 15 Nov 2014 19:07:08 +0100
Message-ID: <CAGr9p8C++QGpP4NrGmM+9ygWQqUuHN2sBPV1q727JcaHr7fj8A@mail.gmail.com>
Subject: Re: Change dependency version through property
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=001a11c3ec6c5409130507e99e1c

--001a11c3ec6c5409130507e99e1c
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi,

thank you Ron and J=C3=B6rg for the responses!

Using the dependency management in the common parent pom resolved my
problem!


Thank you again,
Robert



On Fri, Nov 14, 2014 at 7:55 PM, J=C3=B6rg Schaible <joerg.schaible@gmx.de>
wrote:

> Hi Robert,
>
> Robert Metzger wrote:
>
> > Hi,
> >
> > I'm a developer at the Apache Flink (incubating) project. I'm trying to
> > pass the version of a dependency using a property from the command line
> to
> > the binary build. But it seems that the version I've set is not respect=
ed
> > everywhere.
> >
> >
> > We have the following setup:
> > - flink-parent
> >    - flink-core
> >    - ... more modules ...
> >    - flink-yarn
> >    - flink-dist
> >
> > The "flink-yarn" module (and others) have dependencies to Apache Hadoop=
.
> > We have a property (called hadoop.version) to have one place for settin=
g
> > the Hadoop version. The default Hadoop version 2.2.0.
> >
> > The "flink-dist" module is creating the binary release for Flink. It is
> > using the maven-assembly-plugin for that. All jars we depend on are
> placed
> > in the "lib" directory.
> > The "flink-dist" module has most of our modules (also the flink-yarn)
> > module as a dependency so that we can use the modules in the assembly.
> >
> >
> >
> > What I'm trying to do is building Flink for a different Hadoop version,
> > say "2.2.0-cdh5.0.0-beta-2". Therefore, I'm passing this version as
> > "-Dhadoop.version=3D2.2.0-cdh5.0.0-beta-2".
> >
> > However, some files from Hadoop "2.2.0" end up in the "lib" directory.
> >
> > mvn dependency:tree reveals for "flink-dist":
> >
> > [INFO] +- org.apache.flink:flink-yarn:jar:0.8-incubating-SNAPSHOT:compi=
le
> > [INFO] |  +- org.apache.hadoop:hadoop-yarn-client:jar:2.2.0:compile
> > [INFO] |  |  +- org.apache.hadoop:hadoop-yarn-api:jar:2.2.0:compile
> > [INFO] |  |  +- org.apache.hadoop:hadoop-yarn-common:jar:2.2.0:compile
> >
> > however, for "flink-yarn" the versions are correct:
> >
> > [INFO] +-
> > org.apache.hadoop:hadoop-yarn-client:jar:2.2.0-cdh5.0.0-beta-2:compile
> > [INFO] |  +- commons-logging:commons-logging:jar:1.1.3:compile
> > [INFO] |  +- commons-lang:commons-lang:jar:2.6:compile
> >
> > Here is the full dependency:tree output:
> > https://gist.github.com/rmetzger/70c5f35d4cfd06a91169
> >
> >
> > How can I create builds for different Hadoop versions using Maven?
>
> General rule:
> - don't use a version tag for direct dependencies
> - use a common parent for all modules with
>   - a dependency management section for any dependency you want to contro=
l
>   - use properties for these versions
>
> These properties can be overwritten from command line or setting the
> property again explicitly in a module.
>
> Cheers,
> J=C3=B6rg
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>
>

--001a11c3ec6c5409130507e99e1c--

