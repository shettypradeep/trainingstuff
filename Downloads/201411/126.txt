From users-return-137889-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sun Nov 30 21:22:51 2014
Return-Path: <users-return-137889-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3A8D11025B
	for <apmail-maven-users-archive@www.apache.org>; Sun, 30 Nov 2014 21:22:51 +0000 (UTC)
Received: (qmail 32407 invoked by uid 500); 30 Nov 2014 21:22:49 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 32324 invoked by uid 500); 30 Nov 2014 21:22:49 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 32298 invoked by uid 99); 30 Nov 2014 21:22:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Nov 2014 21:22:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bimargulies@gmail.com designates 209.85.214.181 as permitted sender)
Received: from [209.85.214.181] (HELO mail-ob0-f181.google.com) (209.85.214.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Nov 2014 21:22:21 +0000
Received: by mail-ob0-f181.google.com with SMTP id gq1so6813770obb.26
        for <users@maven.apache.org>; Sun, 30 Nov 2014 13:22:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=URB7pUzDVyH9EA9ZaBUWfns8RpTMQBEhMEflmRU0YC8=;
        b=jS9LAnk6mNTvDNyHx4kmmNDzazQLnlUZmNGwT55Ici7lQhLoA6dx+i6O0NOxTyf96P
         /yCd/wp9gxcLD1kGsYGrkaDSH1LaLtqFut3gmHtPpCJAmT1QPqzDiAn++xgC3FCLsh+J
         9JOc7R/tYn9MSme5ysxtfGrEJzv556l40GQNs7r+Mwvb2N+rCa1FfDL1b9t8VQwVXwOl
         VlM3YnbVuvu4bEeXlN/dQUHS5A1nN41S1MzJHuoW1EMOYgkxe7KG3kuhk9BjMe9zl8Bd
         EZoqtmjcfx30dQh+CgLu43NXyJB0thFWpGoFrCm266kwb+N2IpJB8hSoP7457npoL9p0
         wXxA==
MIME-Version: 1.0
X-Received: by 10.60.37.97 with SMTP id x1mr32403008oej.57.1417382540562; Sun,
 30 Nov 2014 13:22:20 -0800 (PST)
Received: by 10.202.1.70 with HTTP; Sun, 30 Nov 2014 13:22:20 -0800 (PST)
In-Reply-To: <7860a71d9a894fc185a680c8c31d46f6@AMSPR05MB0611.eurprd05.prod.outlook.com>
References: <4D781E28644D7B46878137FBCBC852F01269EB@gf0vswex001p.corp.int>
	<op.xp1p28hrkdkhrr@robertscholte.dynamic.ziggo.nl>
	<46b88b5354ce4ec3a8ef5307adcb4381@AMSPR05MB0611.eurprd05.prod.outlook.com>
	<CALhtWkfwxNPgoxpHfXik-Y2H4XgH=DR5TpQA6h80eA5MqzbhZA@mail.gmail.com>
	<7860a71d9a894fc185a680c8c31d46f6@AMSPR05MB0611.eurprd05.prod.outlook.com>
Date: Sun, 30 Nov 2014 16:22:20 -0500
Message-ID: <CALhtWkfCfVA9DD3ZTRZRQ3Z5-gb5ZqPT=x+ihn_2s1DN8dgLBQ@mail.gmail.com>
Subject: Re: Problems with the release plugin
From: Benson Margulies <bimargulies@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

The release plugin is a tool that does a specified set of steps. It's
built out of reusable components. Turning it into MS Word with
10,000,000 options is not, in my view, a good plan.

If you can write down a clear spec for an alternative workflow, you
can study the source and make a plugin. That's what the owners of the
gitflow-maven-plugin did. It's an alternative release plugin with a
different workflow.


On Sun, Nov 30, 2014 at 11:44 AM, Christofer Dutz
<christofer.dutz@c-ware.de> wrote:
> Unfortunately the world isn't as ideal as I would like it to be. There ar=
e sometimes constraints that lie outside of the reach of the developer(s) w=
orking on the projects build.
>
> In one case the company I worked for desperately needed to release parts =
of a multi module build separately. I know that this comes with problems, b=
ut as long as no other option comes up to reduce the amount of binary data =
of a new release having to be transfered over an Edge mobile connection, th=
ey will have to do partial releases.
>
> In my current case the entire company is being switched from Ant to Maven=
. Switching everything in one big step is completely out of the question. T=
he amount of simultaneous training needed for this is simply not possible. =
So we have to go a migration path which brings us closer and closer to the =
final goal of having everything in Maven and be able to use the default mav=
en-release-plugin. But till we are there it feels like there is no way with=
out patching this plugin in order to have an easy transition path.
>
> What about some "legacy" or "quirks" mode for the plugin that allows such=
 a thing ... it might even output warnings and pages of text explaining why=
 this mode sucks and should be avoided. All I am asking for is a way to use=
 the plugin without having to hack it which acknowledging that I know this =
is not ideal, but I am willing to accept the consequences.
>
> Chris
>
> -----Urspr=C3=BCngliche Nachricht-----
> Von: Benson Margulies [mailto:bimargulies@gmail.com]
> Gesendet: Sonntag, 30. November 2014 13:52
> An: Maven Users List
> Betreff: Re: Problems with the release plugin
>
> I'm going to attempt a summary here.
>
> The release plugin has a requirement. It must be true that you can go to =
the SCM, checkout a brand new copy of the tree rooted at the <scm/> element=
, _change the versions_ in the pom(s), and run a build as configured by the=
 profiles and goals. If that's not true, the release process will fail, and=
 possibly leave you with a manual cleanup in the SCM. There are many ways t=
o set up a build that seems just fine but fails this test.
>
> The top of this thread is a plea for a 'dry run' that is a perfect simula=
tion of this, so that users can flush this out before it bites them, and th=
at it should not be hard to ask for this.
>
> It seems to me that it should not be hard, in a typical automated build s=
ystem (Jenkins, etc.) to set up a build that does exactly this.
> Checkout a clean tree, run the maven-versions-plugin to set a dummy versi=
on, and run a build, with profiles and goals to match the eventual release.=
 Eat one of these apples every day, and you won't be visiting the maven doc=
tor so often.
>
> It seems to me that it should also not be terribly hard to make this a fe=
ature of the maven-release-plugin.
>
> As a further wrinkle, there's the question of tag management, which might=
 be seen as interrelated to the lengthy threads here and elsewhere about ne=
ver, ever, deleting a tag. I wonder about yet another m-r-p parameter: a st=
aging SCM URL, distinct from the <scm/> stock identifiers. m-r-p would pull=
 from <scm/> but push to this other place. Then, a human could decide if th=
e release is real, and, if so, push the commits and tag to the real, immuta=
ble, repo. I'm not qualifier to judge whether this can work for anything ot=
her than git, but git sure is popular.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


