From users-return-137712-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Nov  6 16:55:26 2014
Return-Path: <users-return-137712-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A09C2178A8
	for <apmail-maven-users-archive@www.apache.org>; Thu,  6 Nov 2014 16:55:26 +0000 (UTC)
Received: (qmail 54958 invoked by uid 500); 6 Nov 2014 16:55:24 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 54874 invoked by uid 500); 6 Nov 2014 16:55:24 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 54856 invoked by uid 99); 6 Nov 2014 16:55:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2014 16:55:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of calegria@gmail.com designates 209.85.212.177 as permitted sender)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2014 16:55:18 +0000
Received: by mail-wi0-f177.google.com with SMTP id ex7so2104674wid.4
        for <users@maven.apache.org>; Thu, 06 Nov 2014 08:54:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=+AUzeA5mAzWiR2rgadKtFSLXTqyaVHSMMNdjeKAMXOs=;
        b=sLOjmc4411hQfl72FAfby7Dfrfyru71bbUgfW3V53zL88WAEQ79H4RafJMqC4jsqU9
         h+rn8ogKoYZq1ZSjS5iKoxwA2Qq59vKnLm3odQPo+mMOdiE+FzdIg1A02OO0eHb3IEKa
         /sES+z5LZrJmog3riS9T+5MgOCMv1cnvsRm1savRYEzF2smIh6+bIeVUt0o84Cz/6XY2
         /F5vA24MlL9yqD9BlRLIIlbQSYEzWEhvV9avtNyU9B/shJiZM7YWhRFZEeXrYzRo794A
         o8GXhVn1ikpQByrwBfWIORTo+JF9nqnHZ2FzJdxTI8hPG4vc7e9vV76BSN/LG7hhBO4H
         G0wg==
MIME-Version: 1.0
X-Received: by 10.194.78.82 with SMTP id z18mr6338630wjw.120.1415292850628;
 Thu, 06 Nov 2014 08:54:10 -0800 (PST)
Received: by 10.27.11.35 with HTTP; Thu, 6 Nov 2014 08:54:10 -0800 (PST)
Date: Thu, 6 Nov 2014 10:54:10 -0600
Message-ID: <CAMo2C6xa5LqqYXEAU1NKnA0tStCuhRqbdtbMK9=v=M_+jHdZow@mail.gmail.com>
Subject: inclusion filter gets ignored in multi-module assembly
From: Carlos Alegria Galicia <calegria@gmail.com>
To: users@maven.apache.org
Content-Type: multipart/alternative; boundary=047d7bfcf1f29d6c450507338b4e
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7bfcf1f29d6c450507338b4e
Content-Type: text/plain; charset=UTF-8

Hi all,

I am trying to create an assembly in a multimodule project that has
child-parent and module-submodule relations. I want the assembly to contain
the artifact (a jar file) generated by one of the modules, as well as most
of its dependencies. I am using the following assembly descriptor:

 <?xml version="1.0" encoding="UTF-8"?>
<assembly
xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2
http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2">
<id>clasp</id>
<formats>
<format>zip</format>
</formats>
<includeBaseDirectory>false</includeBaseDirectory>
<moduleSets>
<moduleSet>
<useAllReactorProjects>true</useAllReactorProjects>
<includes>
<include>com.hp.hpl.intueri.clasp.metaphors:xyz-csv2vm</include>
</includes>
<sources>
<fileSets>
<fileSet>
<outputDirectory>/</outputDirectory>
<includes>
<include>src/main/resources/xyz_csv2vm_description.json</include>
<include>src/main/resources/icon.png</include>
</includes>
</fileSet>
</fileSets>
</sources>
<binaries>
<outputDirectory>/</outputDirectory>
<dependencySets>
<dependencySet>
<outputDirectory>/</outputDirectory>
<excludes>
<exclude>com.hp.hpl.clasp:clasp-sdk</exclude>
<exclude>org.json:json</exclude>
</excludes>
<useTransitiveDependencies>false</useTransitiveDependencies>
</dependencySet>
</dependencySets>
</binaries>
</moduleSet>
</moduleSets>
</assembly>

I am configuring the assembly in the parent POM, and assigning the assembly
plugin to the package phase of the module, as explained in the
documentation (
http://maven.apache.org/plugins/maven-assembly-plugin/examples/multimodule/module-binary-inclusion-simple.html).
While running the "mvn clear package", I am having the following error:

[DEBUG] All known ContainerDescriptorHandler components: [file-aggregator,
metaInf-services, plexus, metaInf-spring]
[WARNING] The following patterns were never triggered in this artifact
inclusion filter:
o  'com.hp.hpl.intueri.clasp.metaphors:xyz-csv2vm'

[DEBUG] Resolving project dependencies ONLY. Transitive dependencies WILL
NOT be included in the results.
[WARNING] The following patterns were never triggered in this artifact
inclusion filter:
o  'com.hp.hpl.intueri.clasp.metaphors:xyz-csv2vm'

...
..

[INFO]
------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] VastXML bindings .................................. SUCCESS [  3.997
s]
[INFO] CLASP service tools ............................... SUCCESS [  1.013
s]
[INFO] Visual metaphor generators ........................ SUCCESS [  0.004
s]
[INFO] StarBurst visual metaphor generator ............... SUCCESS [  0.918
s]
[INFO] StarBurstC visual metaphor generator .............. SUCCESS [  1.102
s]
[INFO] DandelionChina visual metaphor generator .......... SUCCESS [  0.921
s]
[INFO] MSComp CSV2VM ..................................... SUCCESS [  1.185
s]
[INFO] xyz-csv2vm visual metaphor generator .............. SUCCESS [  1.394
s]
[INFO] distribution ...................................... FAILURE [  1.109
s]
[INFO]
------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO]
------------------------------------------------------------------------
[INFO] Total time: 11.835 s
[INFO] Finished at: 2014-11-06T10:21:27-06:00
[INFO] Final Memory: 20M/224M
[INFO]
------------------------------------------------------------------------
[ERROR] Failed to execute goal
org.apache.maven.plugins:maven-assembly-plugin:2.5:single (make-assembly)
on project distribution: Failed to create assembly: Error creating assembly
archive clasp: You must set at least one file. -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute
goal org.apache.maven.plugins:maven-assembly-plugin:2.5:single
(make-assembly) on project distribution: Failed to create assembly: Error
creating assembly archive clasp: You must set at least one file.

I have tried to create the assembly using <dependencySets>, assign the
assembly plugin execution to the xyz-csv2vm module, and create a
distribution module as explained in the documentation and some forums, with
no sucess. I am doing anything wrong?, why is that my inclusion filter is
no recognizing my module?

Any help is appreciated,
Carlos Alegria

--047d7bfcf1f29d6c450507338b4e--

