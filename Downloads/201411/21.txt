From users-return-137880-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Fri Nov 28 18:49:42 2014
Return-Path: <users-return-137880-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC409C9C0
	for <apmail-maven-users-archive@www.apache.org>; Fri, 28 Nov 2014 18:49:41 +0000 (UTC)
Received: (qmail 47340 invoked by uid 500); 28 Nov 2014 18:49:40 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 47245 invoked by uid 500); 28 Nov 2014 18:49:40 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 47234 invoked by uid 99); 28 Nov 2014 18:49:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2014 18:49:39 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prvs=840953b2ee=Alejandro.Endo@grassvalley.com designates 12.161.118.91 as permitted sender)
Received: from [12.161.118.91] (HELO mx2.belden.com) (12.161.118.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2014 18:49:35 +0000
X-AuditID: 0a01015b-b7fb28e000000cb3-19-5478c3aae0e6
Received: from bdcnotes1.belden.com ( [10.1.1.71])
	by mx2.belden.com (Service Ready) with SMTP id 52.B8.03251.AA3C8745; Fri, 28 Nov 2014 13:49:15 -0500 (EST)
In-Reply-To: <op.xp1qawdgkdkhrr@robertscholte.dynamic.ziggo.nl>
References: <OFA2E1BE63.3A77C845-ON85257D9D.00817D6E-85257D9D.008354E4@belden.com> <op.xp1qawdgkdkhrr@robertscholte.dynamic.ziggo.nl>
To: "Maven Users List" <users@maven.apache.org>
MIME-Version: 1.0
Subject: Re: release plugin issue
X-KeepSent: 98967939:A808FCCE-85257D9E:00673D66;
 type=4; name=$KeepSent
X-Mailer: Lotus Notes Release 8.5.3FP2 SHF99 September 04, 2012
From: Alejandro.Endo@grassvalley.com
Message-ID: <OF98967939.A808FCCE-ON85257D9E.00673D66-85257D9E.006762B9@belden.com>
Date: Fri, 28 Nov 2014 13:49:15 -0500
X-MIMETrack: Serialize by Router on BDCNotes1/BeldenCDT(Release 9.0.1FP2|August  03, 2014) at
 11/28/2014 01:49:15 PM,
	Serialize complete at 11/28/2014 01:49:15 PM
Content-Type: multipart/alternative; boundary="=_alternative 0067629985257D9E_="
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFnrLIsWRmVeSWpSXmKPExsXCxcjorrv6cEWIwf35TBaPtl5ndGD0aH8q
	FMAY1cBok5RYUhacmZ6nb2eTmJeXX5JYkqqQklqcbKvklJqTkpqn4JJZnJyTmJmbWqTrGeyv
	a2FhaqmkkJliq2SkpFCQk5icmpuaV2KrlFhQkJqXomTHpYABbIDKMvMUUvOS81My89JtlUJD
	3HQtlOxcPIOdE1pZM158n8teMMWxYsfHg0wNjB9Muxg5OSQETCSO313DAmGLSVy4t54NxBYS
	mM8o8X5WGojNKWAv0bh5G1MXIxdQvJVR4vyzS2ANIgL6EssO3gezeQUEJU7OfAJmCwsoShy/
	upwVYqinxNK/K6Fse4nvjz6A1bAJqEhM+3uHEaI3SOLznyNgNouAqsSG+U/YQJZJCCxjlDgx
	fy7YRcwCARJ7GptYJjDyz0KybxaSFIStI3Fi1TFmCFtbYtGVn+wLGFlWMfLlVhjpJYHDWi85
	P3cTIyTKoncwHvuheohRgINRiYeXx6wiRIg1say4MvcQowQHs5IIb+NGoBBvSmJlVWpRfnxR
	aU5q8SHGIKA7JzJLcSfnAxNAXkm8sYEBkRwlcd5Tl3JChATSgSkgOzW1ILUIZigTByfIUi4p
	kWJgFKcWJZaWZMSD0k18MTDhSDUwet99sO7oDO0V35bc3nSfP1ImSURifea+T6tiV3Fs3nT3
	Qsv6E8/mLvp24v+CHYvnPHk47dzx2C3/Vhx7YLVn2/INmvekG9qfctj+ON3x/sW5ozn707Oc
	Vi+f4+v1PUoiIlWo5+/t8y+dvnRu3nBscc7ralm+n4LXc5tqGddsVui7In0t/4lo5ucAJZbi
	jERDLeai4kQAVYng+QADAAA=
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0067629985257D9E_=
Content-Type: text/plain; charset="US-ASCII"

That's good to know Robert, thank you

I will add that to our release dryrun and hopefully it will catch more of 
the uncaught problems early on

Alejandro Endo | Software Designer/Concepteur de logiciels 





From:   "Robert Scholte" <rfscholte@apache.org>
To:     "Maven Users List" <users@maven.apache.org>, 
Date:   2014-11-28 12:46 PM
Subject:        Re: release plugin issue



Op Fri, 28 Nov 2014 00:54:29 +0100 schreef 
<Alejandro.Endo@grassvalley.com>:

> I'm using the release-plugin v2.5.1 and I'm often encountering two
> recurring stories with failed releases
>
> 1) Now the release can fail due to errors in the javadoc. This is not a
> problem, the problem is that IF there are problems in the javadoc the
> release doesn't complete but the two commits and the tag has been done 
so
> after fixing the javadoc I need to reset the git repo to right before 
the
> failed released AND I have to remove the tag to try again. I am 
releasing
> from jenkins so the resume flag is set to false. if something fails we
> start from the beginning, which makes sense in a build server IMO. My
> suggestion here would be to generate all those artifacts (javadoc and
> source) before committing and tagging the code, that way if they fail, 
> the
> repo is not in an invalid state. Another option would be improvement #2
>
> 2) Very often the dryRun succeeds but the real release fails, to the 
> point
> where the dryRun is meaningless. This defeats the whole purpose of a
> dry-run. The problem is that the dry run is over simplified. For 
example,
> again, if there are javadoc problems they won't be spotted because the
> dry-run doesn't run javadoc generation. Anything that's part of the real
> build should be run on the dry-run except for things that make 
persistent
> changes. Another problem I encounter often is that the real release 
fails
> because the tag already exists in SCM (leftover from a previous failed
> release). This should also be validated by the dryRun. If a real release
> can fail because a tag is already present then the dry run should fail 
if
> the tag is already present
>
> What do you guys think? If these points are considered valid I will open 
 
> a
> ticket at least for the second one, which is the worse of the two
>

It's also possible to do a dryrun for the release:perform since version 
2.3 [1]
That's still not the default of the jenkins m2-release-plugin, but it 
works.

Robert

[1] https://jira.codehaus.org/browse/MRELEASE-736

>
> Alejandro Endo | Software Designer/Concepteur de logiciels
>
>
> DISCLAIMER:
> Privileged and/or Confidential information may be contained in this
> message. If you are not the addressee of this message, you may not
> copy, use or deliver this message to anyone. In such event, you
> should destroy the message and kindly notify the sender by reply
> e-mail. It is understood that opinions or conclusions that do not
> relate to the official business of the company are neither given
> nor endorsed by the company.
> Thank You.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org



DISCLAIMER:
Privileged and/or Confidential information may be contained in this
message. If you are not the addressee of this message, you may not
copy, use or deliver this message to anyone. In such event, you
should destroy the message and kindly notify the sender by reply
e-mail. It is understood that opinions or conclusions that do not
relate to the official business of the company are neither given
nor endorsed by the company.
Thank You.

--=_alternative 0067629985257D9E_=--

