From users-return-137870-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Nov 27 13:15:28 2014
Return-Path: <users-return-137870-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D0D3910B24
	for <apmail-maven-users-archive@www.apache.org>; Thu, 27 Nov 2014 13:15:28 +0000 (UTC)
Received: (qmail 12150 invoked by uid 500); 27 Nov 2014 13:15:26 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 12057 invoked by uid 500); 27 Nov 2014 13:15:26 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 12030 invoked by uid 99); 27 Nov 2014 13:15:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2014 13:15:25 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of C.Dutz@ing-diba.de designates 194.127.138.18 as permitted sender)
Received: from [194.127.138.18] (HELO mail2.ing-diba.de) (194.127.138.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2014 13:14:59 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
  d=ing-diba.de; q=dns/txt; s=mailkey; t=1417094119;
  x=1448630119;
  h=from:to:subject:date:message-id:
   content-transfer-encoding;
  bh=N4spOfkoNkzcVSYDr0jAf1HLDBKr3Vcd7FjSN4aRDyQ=;
  b=NtdQHTTbyh+wuVrb6n5rr6XGU1KDOiqgGTMmssORMI47trx/SxMUDD39
   meqYrqWYsE8Y5DnZryG88K7VGD+/4OeD49n/OP0Q4iVwCicfZuE1291iA
   1zeEnolOBKk6V/D8uw7bHR+I7OO1Cq9cTGv5q+ESJc05KLPhC31/xqgsP
   U=;
From: "Dutz, Christofer" <C.Dutz@ing-diba.de>
To: "'users@maven.apache.org'" <users@maven.apache.org>
Subject: Problems with the release plugin
Thread-Topic: Problems with the release plugin
Thread-Index: AdAKPRrNeNhgM+z+QnigxnOcqOU3bQ==
Date: Thu, 27 Nov 2014 13:12:58 +0000
Message-ID: <4D781E28644D7B46878137FBCBC852F01269EB@gf0vswex001p.corp.int>
Accept-Language: de-DE, en-US
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-Type: multipart/alternative;
	boundary="_000_4D781E28644D7B46878137FBCBC852F01269EBgf0vswex001pcorpi_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_4D781E28644D7B46878137FBCBC852F01269EBgf0vswex001pcorpi_
Content-Type: text/plain; charset="iso-8859-1"
MIME-Version: 1.0
Content-Transfer-Encoding: quoted-printable

Hi,

I just ran into a problem I was having a few times now with the release plu=
gin. This time the usage scenario is different, but the code needed to be c=
hanged is still the same.

This time I am helping migrate a large set of projects from Ant to Maven. A=
s this involves a large amount of training the transition is done project b=
y project.
Currently as a first step all projects are changed to deploy SNAPSHOT and r=
elease versions to Nexus instead of deploying to an Ivy repo. For this all =
Ant builds were extended to produce and deploy artifacts useable by Maven a=
nd the Ant builds are configured to use Nexus instead of Ivy.

Now whenever a release is done there actually have to be two releases perfo=
rmed. One Ant and one Maven release. For the Maven part we wanted to use th=
e default release plugin. For this we are planning on providing the release=
 and development version for each artifact as described in this article: ht=
tp://maven.apache.org/maven-release/maven-release-plugin/examples/non-inter=
active-release.html
For the Ant part we have created an Ant task that updates the ivy.xml to th=
e correct versions, which understands the same syntax of providing dev and =
rel versions as that of the Maven release plugin.

Now the problem is that AbstractRewritePomsPhase only seems to process the =
version numbers of artifacts that are in the reactor:

https://github.com/apache/maven-release/blob/trunk/maven-release-manager/sr=
c/main/java/org/apache/maven/shared/release/phase/AbstractRewritePomsPhase.=
java

Wouldn't it be possible to leave the version map the way it is, without fil=
tering anything out? If a user provides the rel version and the dev version=
 for an artifact I would assume that he actually should have a reason for d=
oing this. This behaviour is causing quite some difficulties here.

I would be glad to assitst in finding a good solution for this, if there is=
 no chance in getting this changed, we will propably have to work on a cust=
om version oft he release plugin, which I would really like to avoid.

Chris

--

ING-DiBa AG, Frankfurt am Main. Registernummer HRB 7727, Handelsregister
Amtsgericht Frankfurt am Main. Vorstand: Roland Boekhout (Vorsitzender),
Herbert Willius (stellv. Vorsitzender), Bernd Geilen, Katharina Herrmann, M=
artin Krebs, Remco Nieland.
Aufsichtsrat: Ben Tellings (Vorsitzender)

Diese E-Mail enth=E4lt vertrauliche und/oder rechtlich gesch=FCtzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrt=FCmlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese Mail.
Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser Mail ist
nicht gestattet.

This e-mail may contain confidential and/or privileged information. If
you are not the intended recipient (or have received this e-mail in
error) please notify the sender immediately and destroy this e-mail. Any
unauthorized copying, disclosure or distribution of the material in this
e-mail is strictly forbidden.

ING-DiBa AG, Frankfurt am Main. Registernummer HRB 7727, Handelsregister
Amtsgericht Frankfurt am Main. Vorstand: Roland Boekhout (Vorsitzender),
Bernd Geilen, Katharina Herrmann, Martin Krebs, Remco Nieland.
Aufsichtsrat: Ben Tellings (Vorsitzender)

Diese E-Mail enth=E4lt vertrauliche und/oder rechtlich gesch=FCtzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrt=FCmlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese Mail.
Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser Mail ist
nicht gestattet.

This e-mail may contain confidential and/or privileged information. If
you are not the intended recipient (or have received this e-mail in
error) please notify the sender immediately and destroy this e-mail. Any
unauthorized copying, disclosure or distribution of the material in this
e-mail is strictly forbidden.

--_000_4D781E28644D7B46878137FBCBC852F01269EBgf0vswex001pcorpi_--


