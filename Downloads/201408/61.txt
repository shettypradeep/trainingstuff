From users-return-137085-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Aug 19 18:46:42 2014
Return-Path: <users-return-137085-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 135D611FDF
	for <apmail-maven-users-archive@www.apache.org>; Tue, 19 Aug 2014 18:46:42 +0000 (UTC)
Received: (qmail 75460 invoked by uid 500); 19 Aug 2014 18:46:38 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 75373 invoked by uid 500); 19 Aug 2014 18:46:38 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 75356 invoked by uid 99); 19 Aug 2014 18:46:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2014 18:46:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jmartx@yahoo.com designates 216.109.114.236 as permitted sender)
Received: from [216.109.114.236] (HELO nm43-vm5.bullet.mail.bf1.yahoo.com) (216.109.114.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2014 18:46:10 +0000
Received: from [98.139.215.141] by nm43.bullet.mail.bf1.yahoo.com with NNFMP; 19 Aug 2014 18:46:08 -0000
Received: from [98.139.212.199] by tm12.bullet.mail.bf1.yahoo.com with NNFMP; 19 Aug 2014 18:46:08 -0000
Received: from [127.0.0.1] by omp1008.mail.bf1.yahoo.com with NNFMP; 19 Aug 2014 18:46:08 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 615367.43006.bm@omp1008.mail.bf1.yahoo.com
Received: (qmail 68422 invoked by uid 60001); 19 Aug 2014 18:46:08 -0000
X-YMail-OSG: 45eZNWUVM1niPjIxktYGOMN.W8IsKAeEi2UoK42yYcH0VNj
 fRgZ9AqGHmjJapgvZgOd9Hwt3oEsgdU_wFZL8tXOjTzHCVsT7Ny9C3Ng7pRi
 ENyM3TyzFK7zPgSGLouJ1IherjP37XAFpzEysJrRx.6saiQOoxFJNI8Bk5vk
 FCudqdiMsrX45LBKSq8jzu_brcHs4WRLdHJR.grInrEEX2UkMuR9PE9nAU31
 3Oi3_Excb4ZPzZGVvJ1KYKu5NOGdvmgo89QJq3KXCPuUj9sf6MCG3.lWtOgS
 LXDqGfzJlX_zNgxuQak7Bi2kGPSvUeSiPtQlhRtGzBD70bvA0kWbxpRT009y
 wVL7bVr9OjkxB.keP2oCK6GvbGCg6.mOpqQ21jsJJ6j.6gQNe4VZs87gfIsF
 atKZIAeYi8hLPQ8eFKMznknJSN32KGYDoia1edOGUM7pvjZ4Yu.32VWzOzY7
 vDnjO88m7Zh_k9HPzAKcpadphevsfCaV09T3lLrR_1.TV7SR6.DgFBfFG5ai
 PmUpLY.cBxUPKtr1X3PWw9wEM6gy5UvNlyV1E7rYGwNWgEH9ckwk-
Received: from [8.25.146.11] by web161503.mail.bf1.yahoo.com via HTTP; Tue, 19 Aug 2014 11:46:08 PDT
X-Rocket-MIMEInfo: 002.001,SGVsbG8sCgpJJ3ZlIG1hZGUgc29tZSBwcm9ncmVzcyBvbiB0aGlzIGFuZCBoYXZlIGEgcHJvYmxlbSB3aXRoIE1hdmVuIGZpbmRpbmcgbXkgY3VzdG9tIHBsdWdpbidzIGNsYXNzLgoKPT09PT09PT09PT09PQpbRVJST1JdIEZhaWxlZCB0byBleGVjdXRlIGdvYWwgb3JnLmFwYWNoZS5tYXZlbi5wbHVnaW5zOm1hdmVuLXJlc291cmNlcy1wbHVnaW46Mi42OnJlc291cmNlcyAoZGVmYXVsdC1yZXNvdXJjZXMpIG9uIHByb2plY3Qgcm9jOiBqYXZhLnV0aWwuTm9TdWNoRWxlbWVudEV4Y2VwdGlvbiBbRVJST1JdIHIBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.201.700
References: <1408374170.39344.YahooMailNeo@web161504.mail.bf1.yahoo.com> <53F2405C.3030507@gmx.de> <1408388910.1705.YahooMailNeo@web161504.mail.bf1.yahoo.com>
Message-ID: <1408473968.35259.YahooMailNeo@web161503.mail.bf1.yahoo.com>
Date: Tue, 19 Aug 2014 11:46:08 -0700
From: Jose Martinez <jmartx@yahoo.com.INVALID>
Reply-To: Jose Martinez <jmartx@yahoo.com>
Subject: Re: creating custom Maven resource filter
To: Maven Users List <users@maven.apache.org>,
  "info@soebes.de" <info@soebes.de>, Jose Martinez <jmartx@yahoo.com>
In-Reply-To: <1408388910.1705.YahooMailNeo@web161504.mail.bf1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1524547028-1170054548-1408473968=:35259"
X-Virus-Checked: Checked by ClamAV on apache.org

--1524547028-1170054548-1408473968=:35259
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,=0A=0AI've made some progress on this and have a problem with Maven f=
inding my custom plugin's class.=0A=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=0A[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resourc=
es-plugin:2.6:resources (default-resources) on project roc: java.util.NoSuc=
hElementException [ERROR] role: org.apache.maven.shared.filtering.MavenReso=
urcesFiltering [ERROR] roleHint: ResourceFilter [ERROR] -> [Help 1]=0A=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0AI created a class that implements=
 MavenResourcesFiltering, and added the plexus javadoc comments as instruct=
ed. =A0=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A/**=0A=A0*=0A=A0* @auth=
or jmartinez=0A=A0*=0A=A0* @plexus.component role=3D"org.apache.maven.share=
d.filtering.MavenResourcesFiltering"=A0=0A=A0* =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 role-hint=3D"ResourceFilter"=0A=A0*/=0Apublic class ResourceFilter =
implements MavenResourcesFiltering {=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=0A=0AI also added to the main project's POM the maven-re=
sources-plugin with the dependency and maven filtering hints. =A0The proble=
m I am having is that Maven cannot find my MavenResourcesFiltering class. =
=A0Its suppose to be able to find it using the role-hint.=0A=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=0A=A0 =A0 =A0 =A0 <pluginManagement>=0A=A0 =A0 =A0=
 =A0 =A0 =A0 <plugins>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <plugin>=0A=A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <groupId>org.apache.maven.plugins</groupId=
>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <artifactId>maven-resources-plu=
gin</artifactId>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <version>2.6</ve=
rsion>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <configuration>=0A=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <dependencies>=0A=A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <dependency>=0A=A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <groupId>com.xxxx</groupId>=0A=
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <artifactId=
>xxxx-rfp-maven-plugin</artifactId>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 <version>0.2</version>=0A=A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 </dependency>=0A=A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0 </dependencies>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 <mavenFilteringHints>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 <mavenFilteringHint>ResourceFilter</mavenFilteringHint=
>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 </mavenFilteringHints>=
=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 </configuration>=0A=A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 </plugin>=0A=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=0A=0AI suspect the problem is that my plugin's jar is not being loaded to =
the maven-resources-plugin classpath. =A0I suspect this because my jar was =
not being downloaded until I added it to the pom's dependencies list, versu=
s it being downloaded when it was just in the maven-resources-plugin depend=
ency list.=0A=0AAm I missing something here?=0A=0Athanks=A0=0A=0Ajose=0A=0A=
=0AOn Monday, August 18, 2014 3:08 PM, Jose Martinez <jmartx@yahoo.com.INVA=
LID> wrote:=0A =0A=0A=0AKarl,=0A=0AThank you for responding. =A0Yes I can g=
o into more detail. =A0=0A=0ALets go back to my example of the mysql DB cre=
dentials. =A0Lets say I have five environments. =A0So that means I have 3 v=
ariables times 5 environments and that comes out to 15 various values. =A0F=
rom what I understand about the=A0maven-resources-plugin that would mean I =
would have to do one of the following:=A0=0A=0A1) =A0Stick those 15 values =
in the pom and then maybe use 5 different profiles, one for each env. =A0Th=
is can get quite cumbersome and our deployment scripts would have to call m=
vn with the correct profile.=0A=0A2) =A0 Use system variables. =A0Have some=
 code called at some point before the maven build that would know which env=
ironment it is in and retrieve all the values for each known property and m=
ake system variables out of them. =A0From what I understand this might stil=
l require I have them in the POM; I'm not sure if=A0maven-resources-plugin =
would automatically replace each ${propertyName} with the proertyName syste=
m variable without having to have the propertyName in the POM?=0A=0A3) Is t=
here another way that I am missing that this can be done using maven-resour=
ces-plugin? =A0I can see that it is very powerful tool, as everything in Ma=
ven has proven to me to be so I'm probably missing another approach.=0A=0AA=
 few things to consider that I would like to have...=0A1) Centralized view =
into all our properties that can be queried and have tools built on top of =
(e.g. a maven resource filter).=0A=0A2) Minimal entries of propertyName. =
=A0Essentially the ${propertyName} should only be entered into the property=
 file and after that just the entries that go into the central data store. =
=A0The pom is left alone.=0A=0A3) Environments can be easily added and remo=
ved and altered by only touching the centralized datastore.=0A=0AI guess th=
ose three things have one thing in common, benefits of having our propertie=
s in a centralized datastore. =A0At my current employer they built just suc=
h a system that works off of web services (managed global properties on a p=
er environment basis). =A0It is not in production yet so from my point of v=
iew I will interface out the Dao and just swap implementations when its rea=
dy... using a simple relational DB at first.=A0=0A=0Athanks=0Ajose=0A=0A=0A=
On Monday, August 18, 2014 2:06 PM, Karl Heinz Marbaise <khmarbaise@gmx.de>=
 wrote:=0A=0A=0A=0AHi Jose,=0A=0A=0Acan you elaborate a little bit more why=
 you are not using the default =0Afiltering capabilities of maven-resources=
-plugin etc. ?=0A=0ACan you explain what exactly you like to achieve?=0A=0A=
=0A=0A> Hello,=0A>=0A> We have projects with many property and xml files th=
at need resource filtering per environment.=0A>=0A> For example in a proper=
ty file one might see ${mysqlDbHost}, ${mysqlDbPw}, and ${mysqlDbUser}.=A0 =
There would also be a system variable called ENVIRONMENT.=A0 Based on the $=
{propertyName} and ENVIRONMENT value, the resource filter would replace wit=
h the correct value.=A0 This can be done with a DB (SELECT value FROM prope=
rties WHERE env=3D"env" and name=3D"propertyName") or via a web service (ge=
tPropertyValue?env=3Denv&name=3DpropertyName).=0A>=0A> On the Maven side th=
e solution seem to be to create a custom MavenResourcesFiltering.=A0 The cu=
stom MavenResourcesFiltering implementation would do the lookups I mentione=
d above for each ${propertyName} encountered in the resource files.=0A>=0A>=
 1)=A0 Is my assessment that creating a custom MavenResourcesFiltering is t=
he way to go?=A0 Maybe this problem is already solved already, since it doe=
s not seem unique?=0A>=0A> 2)=A0 I have visited multiple Maven articles on =
this but still have no idea how to implement it, the sites I visited are li=
sted below.=A0 Does anyone know of any document or can provide feedback on =
how to implement a custom MavenResourcesFiltering?=0A>=0A> It seems to me t=
hat at some point I would need a method that has either gets a list of all =
the ${propertyName}'s found in a file and the ability to provide the value =
for that property name.=A0 Following the links I found I cannot tell where =
that method should be implemented and how to get it called from MyMojo.exec=
ute().=0A>=0A> 1:=A0 http://maven.apache.org/shared/maven-filtering/=0A> 2:=
=A0 http://maven.apache.org/shared/maven-filtering/usage.html=0A> 3:=A0 htt=
p://maven.apache.org/guides/plugin/guide-java-plugin-development.html=0A>=
=0A> Thank you!=0A> jose=0A>=0A=0AKind regards=0AKarl-Heinz Marbaise=0A=0A-=
--------------------------------------------------------------------=0ATo u=
nsubscribe, e-mail: users-unsubscribe@maven.apache.org=0AFor additional com=
mands, e-mail: users-help@maven.apache.org
--1524547028-1170054548-1408473968=:35259--

