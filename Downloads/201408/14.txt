From users-return-137095-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Aug 20 17:13:08 2014
Return-Path: <users-return-137095-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2041711D19
	for <apmail-maven-users-archive@www.apache.org>; Wed, 20 Aug 2014 17:13:08 +0000 (UTC)
Received: (qmail 20525 invoked by uid 500); 20 Aug 2014 17:13:04 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 20450 invoked by uid 500); 20 Aug 2014 17:13:04 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 20438 invoked by uid 99); 20 Aug 2014 17:13:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2014 17:13:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmartx@yahoo.com designates 98.139.212.175 as permitted sender)
Received: from [98.139.212.175] (HELO nm16.bullet.mail.bf1.yahoo.com) (98.139.212.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2014 17:12:57 +0000
Received: from [66.196.81.172] by nm16.bullet.mail.bf1.yahoo.com with NNFMP; 20 Aug 2014 17:12:36 -0000
Received: from [98.139.212.212] by tm18.bullet.mail.bf1.yahoo.com with NNFMP; 20 Aug 2014 17:12:36 -0000
Received: from [127.0.0.1] by omp1021.mail.bf1.yahoo.com with NNFMP; 20 Aug 2014 17:12:36 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 876184.72638.bm@omp1021.mail.bf1.yahoo.com
Received: (qmail 50664 invoked by uid 60001); 20 Aug 2014 17:12:36 -0000
X-YMail-OSG: EHvxZqsVM1mgZAooXN5QhXmDYeOPlGmo88_WgC_pOyG9SAU
 T1mZzJAJiDc8ePGOwx3c2YCVRTKTlyW.vFEdYSt_MF_DW.onxplczOJfhM4L
 hTWdSMIgQm1_PQsbMp_YjYjeE0gI.9ohko8vXk9VlW.Z5TPsY7k14loi3TMD
 VIX8ojio9XzcKxwDR68er7Wjx2RvcMtKnO3wHbs0_px5nqY2sgPeHuiwogxA
 9hZee0TkAylQ2XfHhJd_bMC7qPMRWlSS2MlEJ_Q6SthlB4g_BY9doIO2JEvh
 DOewgSwWBL8wvOgavV39u9NJXjeETBx1F5E8d428xZPSkCVW4TA2i4rbOZPg
 AysZ1JoceNST_5v7L_zBVawJEQTPeO8.bYwv1oHxmUnH0gI1_nl9ioZogdVL
 pcgUpZPqZQjkTVigcY1xxHo5dnog2joAZos2IZqctkNyUDnlQky1NMGEx2_L
 esLo.OQvf.3J7yzQvFU8Ba8paCZCZeFeSTRbQi6D8bHBBltPcc1y9Jhk3KOL
 ZpzZPYcUeh_jxLayKIekgGPlmvbFWqikCrSdrr8fSn.t71ZZFmKKiGxVmiah
 _czP00VeKJ48_xrBZOKoE1et4XlJKFpFHK0blc0XIMmPe_UO8LpsURNI.Cj0
 AgudQlYoDm41hHR7tQg--
Received: from [8.25.146.11] by web161503.mail.bf1.yahoo.com via HTTP; Wed, 20 Aug 2014 10:12:36 PDT
X-Rocket-MIMEInfo: 002.001,T2sgaXRzIGZpZ3VyZWQgb3V0LiDCoEhhZCB0byB3cml0ZSBteSBvd27CoE1hdmVuRmlsZUZpbHRlciBhbmQgdXNlIHBsZXh1cyB0byB3aXJlIGl0IGluLgoKVGhlIG9ubHkgcXVlc3Rpb24gSSBub3cgaGF2ZSBpcyBob3cgdG8gc2V0IHRoZSByb2xlLWhpbnQgZm9yIG91ciBjdXN0b20gTWF2ZW5GaWxlRmlsdGVyIGluIGEgcG9tIGZpbGU_IMKgVG8gaGF2ZSBvdXIgY3VzdG9tIE1hdmVuRmlsZUZpbHRlciBiZSB3aXJlZCBpbiBJIHN0b2xlIHRoZSByb2xlLWhpbnQgImRlZmF1bHQiLiDCoEJ1dCBJIHdvdWxkIGwBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.201.700
References: <1408374170.39344.YahooMailNeo@web161504.mail.bf1.yahoo.com> <53F2405C.3030507@gmx.de> <1408388910.1705.YahooMailNeo@web161504.mail.bf1.yahoo.com> <1408473968.35259.YahooMailNeo@web161503.mail.bf1.yahoo.com> <1408477424.46892.YahooMailNeo@web161506.mail.bf1.yahoo.com> <op.xkuv5nvrkdkhrr@robertscholte.dynamic.ziggo.nl> <1408543352.38494.YahooMailNeo@web161506.mail.bf1.yahoo.com>
Message-ID: <1408554756.50013.YahooMailNeo@web161503.mail.bf1.yahoo.com>
Date: Wed, 20 Aug 2014 10:12:36 -0700
From: Jose Martinez <jmartx@yahoo.com.INVALID>
Reply-To: Jose Martinez <jmartx@yahoo.com>
Subject: Re: creating custom Maven resource filter
To: Maven Users List <users@maven.apache.org>
In-Reply-To: <1408543352.38494.YahooMailNeo@web161506.mail.bf1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1524547028-653104692-1408554756=:50013"
X-Virus-Checked: Checked by ClamAV on apache.org

--1524547028-653104692-1408554756=:50013
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Ok its figured out. =A0Had to write my own=A0MavenFileFilter and use plexus=
 to wire it in.=0A=0AThe only question I now have is how to set the role-hi=
nt for our custom MavenFileFilter in a pom file? =A0To have our custom Mave=
nFileFilter be wired in I stole the role-hint "default". =A0But I would lik=
e to use my own role-hint because there is another "default" implementation=
 and I do not want it to use that one. =A0I do not know if it is by chance =
that our implementation is being used.=0A=0AFor the MavenResourcesFiltering=
 I was able to set the role-hint the=A0mavenFilteringHints tag. =A0I guess =
what I am asking for is the equivalent tag for setting the MavenFileFilter =
implementation?=0A=0Athanks=A0=0A=0Ajose=0A=0A=0AOn Wednesday, August 20, 2=
014 10:02 AM, Jose Martinez <jmartx@yahoo.com> wrote:=0A =0A=0A=0ACool, tha=
nks Robert.=0A=0ASo now that I have the plugin functioning and my=A0MavenRe=
sourcesFiltering's=A0filterResources(mre) method being called, what can I d=
o with the=A0MavenResourcesExecution to access the ${propertyNames} in my r=
esources and set their values?=0A=0AI pulled the List<Resource> from the=A0=
MavenResourcesExecution, but I can't figure out how to get the ${propertyNa=
mes} from my resources or set their values?=0A=A0=0Athanks=0Ajose=0A=0A=0AO=
n Tuesday, August 19, 2014 4:21 PM, Robert Scholte <rfscholte@apache.org> w=
rote:=0A =0A=0A=0ADone, see MRESOURCES-182[1]=0AWill be updated with the ne=
xt release.=0A=0Athanks,=0ARobert=0A=0A[1] https://jira.codehaus.org/browse=
/MRESOURCES-182=0A=0AOp Tue, 19 Aug 2014 21:43:44 +0200 schreef Jose Martin=
ez=A0 =0A<jmartx@yahoo.com.invalid>:=0A=0A> Problem resolved.=A0 The docume=
ntation in this link has the dependency=A0 =0A> tags in the wrong place... =
=0A> http://maven.apache.org/plugins/maven-resources-plugin/examples/custom=
-resource-filters.html#Dependency_declaration=0A>=A0 When I moved the plugi=
n's dependencies tag outside of the configuration=A0 =0A> tags then everyth=
ing worked.=A0 Who ever manages that link please=A0 =0A> investigate.=A0 Ev=
erything else on the site was spot on.=0A>=A0 thanks=0A> jose=0A>=0A>=0A> O=
n Tuesday, August 19, 2014 2:46 PM, Jose Martinez <jmartx@yahoo.com>=A0 =0A=
> wrote:=0A>=0A>=0A> Hello,=0A>=0A> I've=0A made some progress on this and =
have a problem with Maven finding my=A0 =0A> custom plugin's class.=0A>=0A>=
 =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A> [ERROR] Failed to execute goal=
=A0 =0A> org.apache.maven.plugins:maven-resources-plugin:2.6:resources=A0 =
=0A> (default-resources) on project roc: java.util.NoSuchElementException=
=A0 =0A> [ERROR] role: org.apache.maven.shared.filtering.MavenResourcesFilt=
ering=A0 =0A> [ERROR] roleHint: ResourceFilter [ERROR] -> [Help 1]=0A> =3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A>=0A> I created a class that impleme=
nts MavenResourcesFiltering, and added the=A0 =0A> plexus javadoc comments =
as instructed. =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A> /**=0A>=A0 *=0A>=
=A0 * @author jmartinez=0A>=A0 *=0A>=A0 * @plexus.component=A0 =0A> role=3D=
"org.apache.maven.shared.filtering.MavenResourcesFiltering" =0A>=A0 *=A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  role-hint=3D"ResourceFilter"=0A>=A0 */=0A>=
 public class ResourceFilter implements MavenResourcesFiltering {=0A> =3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A>=0A> I also added to=
 the main project's POM the maven-resources-plugin=0A with=A0 =0A> the depe=
ndency and maven filtering hints.=A0 The problem I am having is=A0 =0A> tha=
t Maven cannot find my MavenResourcesFiltering class.=A0 Its suppose to=A0 =
=0A> be able to find it using the role-hint.=0A> =3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=0A>=A0 =A0 =A0 =A0  <pluginManagement>=0A>=A0 =A0 =A0 =A0 =
=A0 =A0  <plugins>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <plugin>=0A>=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <groupId>org.apache.maven.plugins</groupId=
>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =0A <artifactId>maven-resource=
s-plugin</artifactId>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <version>=
2.6</version>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <configuration>=
=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <dependencies>=0A>=A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <dependency>=0A>=A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <groupId>com.x=
xxx</groupId>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=0A=
 =A0 =A0 =A0 =0A> <artifactId>xxxx-rfp-maven-plugin</artifactId>=0A>=A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <version>0.2</ver=
sion>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  </depende=
ncy>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  </dependencies>=0A=
>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <mavenFilteringHints>=0A>=
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =0A>=0A <mavenF=
ilteringHint>ResourceFilter</mavenFilteringHint>=0A>=A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0  </mavenFilteringHints>=0A>=A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0 =A0 =A0  </configuration>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  </pl=
ugin>=0A>=0A> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A>=0A> I suspect the=
 problem is that my plugin's jar is not being loaded to the=A0 =0A> maven-r=
esources-plugin classpath.=A0 I suspect this because my jar was not=A0 =0A>=
 being downloaded until I added it to the pom's dependencies list, versus=
=A0 =0A> it being downloaded when it was just in the maven-resources-plugin=
=A0 =0A> dependency list.=0A>=0A> Am I missing something here?=0A>=0A> than=
ks=0A> jose=0A>=0A>=0A> On Monday, August 18, 2014 3:08 PM, Jose Martinez=
=A0 =0A> <jmartx@yahoo.com.INVALID> wrote:=0A>=0A>=0A> Karl,=0A>=0A> Thank =
you for responding.=A0 Yes I can go into more detail.=A0 =0A> Lets go back =
to my example of the mysql DB credentials.=A0 Lets say I have=A0 =0A> five =
environments.=A0 So that means I have 3 variables times 5=A0 =0A> environme=
nts and that comes out to 15=0A>=A0 various values.=A0 From what I understa=
nd about the=A0 =0A> maven-resources-plugin that would mean I would have to=
 do one of the=A0 =0A> following:=0A> 1)=A0 Stick those 15 values in the po=
m and then maybe use 5 different=A0 =0A> profiles, one for each env.=A0 Thi=
s can get quite cumbersome and our=A0 =0A> deployment scripts=0A would have=
 to call mvn with the correct profile.=0A>=0A> 2)=A0  Use system variables.=
=A0 Have some code called at some point before=A0 =0A> the maven build that=
 would know which environment it is in and retrieve=A0 =0A> all the values =
for each known property and make system variables out of=A0 =0A> them.=A0 F=
rom what I understand this might still require I have them in=A0 =0A> the P=
OM; I'm not sure if maven-resources-plugin would automatically=A0 =0A> repl=
ace each ${propertyName} with the proertyName system variable=A0 =0A> witho=
ut having to have the propertyName in the POM?=0A>=0A>=0A 3) Is there anoth=
er way that I am missing that this can be done using=A0 =0A> maven-resource=
s-plugin?=A0 I can see that it is very powerful tool, as=A0 =0A> everything=
 in Maven has proven to me to be so I'm probably missing=A0 =0A> another ap=
proach.=0A>=0A> A few things to consider that I would like to have...=0A> 1=
) Centralized view into all our properties that can be queried and have=A0 =
=0A> tools built on top of (e.g. a maven resource filter).=0A>=0A> 2) Minim=
al entries of propertyName.=A0 Essentially the ${propertyName}=A0 =0A> shou=
ld only be entered into the property file and after=0A that just the=A0 =0A=
> entries that go into the central data store.=A0 The pom is left alone.=0A=
>=0A> 3) Environments can be easily added and removed and altered by only=
=A0 =0A> touching the centralized datastore.=0A>=0A> I guess those three=0A=
>=A0 things have one thing in common, benefits of having our properties in =
a=A0 =0A> centralized datastore.=A0 At my current employer they built just =
such a=A0 =0A> system that works off of web services (managed global proper=
ties on a=A0 =0A> per environment basis).=A0 It is not in production yet so=
 from my point of=A0 =0A> view I will interface out the Dao and just swap i=
mplementations when its=A0 =0A> ready... using a simple relational DB at fi=
rst.=0A> thanks=0A> jose=0A>=0A>=0A> On Monday, August 18, 2014 2:06 PM, Ka=
rl Heinz Marbaise=A0 =0A> <khmarbaise@gmx.de> wrote:=0A>=0A>=0A>=0A> Hi Jos=
e,=0A>=0A>=0A> can you elaborate a little bit more why you are=0A not using=
 the=0A>=A0 default=0A> filtering capabilities of maven-resources-plugin et=
c. ?=0A>=0A> Can you explain what exactly you like to achieve?=0A>=0A>=0A>=
=0A>> Hello,=0A>>=0A>> We have projects with many property and xml files th=
at need resource=A0 =0A>> filtering per environment.=0A>>=0A>> For example =
in a property file one might see ${mysqlDbHost},=A0 =0A>> ${mysqlDbPw}, and=
 ${mysqlDbUser}.=A0 There would also be a system=A0 =0A>> variable called E=
NVIRONMENT.=A0 Based on the ${propertyName} and=A0 =0A>> ENVIRONMENT value,=
 the resource filter would replace with the correct=A0 =0A>> value.=A0 This=
 can be done with a DB (SELECT value FROM properties WHERE=A0 =0A>> env=3D"=
env" and name=3D"propertyName") or via a web service=A0 =0A>> (getPropertyV=
alue?env=3Denv&name=3DpropertyName).=0A>>=0A>> On the Maven side the soluti=
on seem to be to create a custom=A0 =0A>> MavenResourcesFiltering.=A0 The c=
ustom MavenResourcesFiltering=A0 =0A>> implementation would do the lookups =
I mentioned above for each=A0 =0A>> ${propertyName} encountered in the reso=
urce files.=0A>>=0A>> 1)=A0 Is my assessment that creating a custom MavenRe=
sourcesFiltering is=A0 =0A>> the way to go?=A0 Maybe this problem is alread=
y solved already, since it=A0 =0A>> does not seem unique?=0A>>=0A>> 2)=A0 I=
 have visited multiple Maven articles on this but still have no=A0 =0A>> id=
ea how to implement it, the sites I visited are listed below.=A0 Does=A0 =
=0A>> anyone know of any document or can provide feedback on how to impleme=
nt=A0 =0A>> a custom MavenResourcesFiltering?=0A>>=0A>> It seems to me that=
 at some point I would need a method that has either=A0 =0A>> gets a list o=
f all the ${propertyName}'s found in a=0A>=A0 file and the ability to provi=
de the value for that property name.=A0 =0A> Following the links I found I =
cannot tell where that method should be=A0 =0A> implemented and how to get =
it called from MyMojo.execute().=0A>>=0A>> 1:=A0 http://maven.apache.org/sh=
ared/maven-filtering/=0A>> 2:=A0 http://maven.apache.org/shared/maven-filte=
ring/usage.html=0A>> 3:=A0 =0A>> http://maven.apache.org/guides/plugin/guid=
e-java-plugin-development.html=0A>>=0A>> Thank you!=0A>> jose=0A>>=0A>=0A> =
Kind regards=0A> Karl-Heinz Marbaise=0A>=0A> ------------------------------=
---------------------------------------=0A> To unsubscribe, e-mail: users-u=
nsubscribe@maven.apache.org=0A> For additional commands, e-mail: users-help=
@maven.apache.org=0A=0A=0A-------------------------------------------------=
--------------------=0ATo unsubscribe, e-mail: users-unsubscribe@maven.apac=
he.org=0AFor additional commands, e-mail: users-help@maven.apache.org
--1524547028-653104692-1408554756=:50013--

