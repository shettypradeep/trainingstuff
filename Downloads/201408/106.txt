From users-return-137086-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Aug 19 19:44:16 2014
Return-Path: <users-return-137086-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 32C0A11248
	for <apmail-maven-users-archive@www.apache.org>; Tue, 19 Aug 2014 19:44:16 +0000 (UTC)
Received: (qmail 56594 invoked by uid 500); 19 Aug 2014 19:44:12 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 56517 invoked by uid 500); 19 Aug 2014 19:44:12 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 56493 invoked by uid 99); 19 Aug 2014 19:44:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2014 19:44:12 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmartx@yahoo.com designates 98.139.213.162 as permitted sender)
Received: from [98.139.213.162] (HELO nm19-vm0.bullet.mail.bf1.yahoo.com) (98.139.213.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Aug 2014 19:44:06 +0000
Received: from [66.196.81.173] by nm19.bullet.mail.bf1.yahoo.com with NNFMP; 19 Aug 2014 19:43:44 -0000
Received: from [98.139.212.200] by tm19.bullet.mail.bf1.yahoo.com with NNFMP; 19 Aug 2014 19:43:44 -0000
Received: from [127.0.0.1] by omp1009.mail.bf1.yahoo.com with NNFMP; 19 Aug 2014 19:43:44 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 399936.2293.bm@omp1009.mail.bf1.yahoo.com
Received: (qmail 14776 invoked by uid 60001); 19 Aug 2014 19:43:44 -0000
X-YMail-OSG: 0YRu9OcVM1nz43h2mV4bWsC9_6OcV_S8dUjORNXOhSnmlvp
 guY_Zwc9qGheQABSv4qwM6XsrZN_f6MCnaEvWfVsS.l1dv8doAMiwYqnN09f
 QJkF4nJWbLQnv1jOaAKHfRrvN2ZxyBzLlb_4qrXDOZDXPpR9LyWBJBvxTv9O
 vCJPpJAZBT9wDmvverw_bBO97R14bRjwwNSl0TFnrzHO_1FrHmvQvxacCmhL
 bLaEHFQ5Ym5b8RxCw4yOGIziZy6vYvXlv9A.CmC.a7XaaLs1xe75snt4LaMO
 1WtdxI._foz.EzG0j49rAd2BHzPaq0MnaKOOIG4DR.9SXl9GZRZmPBUCQHgf
 kht74_2VJnAQcMSjAT9JB1MxT50okO5QDv3tEO0.TbmfgIDp.rkks190f5aK
 tppVKF5raH2OF96W4OMOyMimE77265NxWb23XDmZJ0igpzk9XEYpBYpaATZW
 99C_bf5aObrBvVnPSfT59DYwIJMtH0e8NHUkYfm8grDwBei_5Ziq.ofUfAAh
 h6jb2.A9ZkRHau4H9qe1ROLPkt9Hrm52JeLDZ_QZgde31a7C8
Received: from [8.25.146.11] by web161506.mail.bf1.yahoo.com via HTTP; Tue, 19 Aug 2014 12:43:44 PDT
X-Rocket-MIMEInfo: 002.001,UHJvYmxlbSByZXNvbHZlZC4gwqBUaGUgZG9jdW1lbnRhdGlvbiBpbiB0aGlzIGxpbmsgaGFzIHRoZSBkZXBlbmRlbmN5IHRhZ3MgaW4gdGhlIHdyb25nIHBsYWNlLi4uwqAKaHR0cDovL21hdmVuLmFwYWNoZS5vcmcvcGx1Z2lucy9tYXZlbi1yZXNvdXJjZXMtcGx1Z2luL2V4YW1wbGVzL2N1c3RvbS1yZXNvdXJjZS1maWx0ZXJzLmh0bWwjRGVwZW5kZW5jeV9kZWNsYXJhdGlvbgrCoApXaGVuIEkgbW92ZWQgdGhlIHBsdWdpbidzIGRlcGVuZGVuY2llcyB0YWcgb3V0c2lkZSBvZiB0aGUgY29uZmlndXJhdGlvbiABMAEBAQE-
X-Mailer: YahooMailWebService/0.8.201.700
References: <1408374170.39344.YahooMailNeo@web161504.mail.bf1.yahoo.com> <53F2405C.3030507@gmx.de> <1408388910.1705.YahooMailNeo@web161504.mail.bf1.yahoo.com> <1408473968.35259.YahooMailNeo@web161503.mail.bf1.yahoo.com>
Message-ID: <1408477424.46892.YahooMailNeo@web161506.mail.bf1.yahoo.com>
Date: Tue, 19 Aug 2014 12:43:44 -0700
From: Jose Martinez <jmartx@yahoo.com.INVALID>
Reply-To: Jose Martinez <jmartx@yahoo.com>
Subject: Re: creating custom Maven resource filter
To: Jose Martinez <jmartx@yahoo.com>,
  Maven Users List <users@maven.apache.org>, "info@soebes.de" <info@soebes.de>
In-Reply-To: <1408473968.35259.YahooMailNeo@web161503.mail.bf1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-537478627-1037763254-1408477424=:46892"
X-Virus-Checked: Checked by ClamAV on apache.org

---537478627-1037763254-1408477424=:46892
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Problem resolved. =A0The documentation in this link has the dependency tags=
 in the wrong place...=A0=0Ahttp://maven.apache.org/plugins/maven-resources=
-plugin/examples/custom-resource-filters.html#Dependency_declaration=0A=A0=
=0AWhen I moved the plugin's dependencies tag outside of the configuration =
tags then everything worked. =A0Who ever manages that link please investiga=
te. =A0Everything else on the site was spot on.=0A=A0=0Athanks=0Ajose=0A=0A=
=0AOn Tuesday, August 19, 2014 2:46 PM, Jose Martinez <jmartx@yahoo.com> wr=
ote:=0A =0A=0A=0AHello,=0A=0AI've made some progress on this and have a pro=
blem with Maven finding my custom plugin's class.=0A=0A=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=0A[ERROR] Failed to execute goal org.apache.maven.plu=
gins:maven-resources-plugin:2.6:resources (default-resources) on project ro=
c: java.util.NoSuchElementException [ERROR] role: org.apache.maven.shared.f=
iltering.MavenResourcesFiltering [ERROR] roleHint: ResourceFilter [ERROR] -=
> [Help 1]=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0AI created a class=
 that implements MavenResourcesFiltering, and added the plexus javadoc comm=
ents as instructed. =A0=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A/**=0A=
=A0*=0A=A0* @author jmartinez=0A=A0*=0A=A0* @plexus.component role=3D"org.a=
pache.maven.shared.filtering.MavenResourcesFiltering"=A0=0A=A0* =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0 role-hint=3D"ResourceFilter"=0A=A0*/=0Apublic clas=
s ResourceFilter implements MavenResourcesFiltering {=0A=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0AI also added to the main project'=
s POM the maven-resources-plugin with the dependency and maven filtering hi=
nts. =A0The problem I am having is that Maven cannot find my MavenResources=
Filtering class. =A0Its suppose to be able to find it using the role-hint.=
=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=A0 =A0 =A0 =A0 <pluginManagem=
ent>=0A=A0 =A0 =A0 =A0 =A0 =A0 <plugins>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
<plugin>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <groupId>org.apache.mave=
n.plugins</groupId>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <artifactId>m=
aven-resources-plugin</artifactId>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 <version>2.6</version>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <confi=
guration>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <dependencies>=
=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <dependency>=0A=
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <groupId>co=
m.xxxx</groupId>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 <artifactId>xxxx-rfp-maven-plugin</artifactId>=0A=A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <version>0.2</version>=0A=
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 </dependency>=0A=A0=
 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 </dependencies>=0A=A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <mavenFilteringHints>=0A=A0 =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 <mavenFilteringHint>ResourceFilter=
</mavenFilteringHint>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 </m=
avenFilteringHints>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 </configurati=
on>=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 </plugin>=0A=0A=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=0A=0AI suspect the problem is that my plugin's jar is no=
t being loaded to the maven-resources-plugin classpath. =A0I suspect this b=
ecause my jar was not being downloaded until I added it to the pom's depend=
encies list, versus it being downloaded when it was just in the maven-resou=
rces-plugin dependency list.=0A=0AAm I missing something here?=0A=0Athanks=
=A0=0A=0Ajose=0A=0A=0AOn Monday, August 18, 2014 3:08 PM, Jose Martinez <jm=
artx@yahoo.com.INVALID> wrote:=0A =0A=0A=0AKarl,=0A=0AThank you for respond=
ing. =A0Yes I can go into more detail. =A0=0A=0ALets go back to my example =
of the mysql DB credentials. =A0Lets say I have five environments. =A0So th=
at means I have 3 variables times 5 environments and that comes out to 15=
=0A various values. =A0From what I understand about the=A0maven-resources-p=
lugin that would mean I would have to do one of the following:=A0=0A=0A1) =
=A0Stick those 15 values in the pom and then maybe use 5 different profiles=
, one for each env. =A0This can get quite cumbersome and our deployment scr=
ipts would have to call mvn with the correct profile.=0A=0A2) =A0 Use syste=
m variables. =A0Have some code called at some point before the maven build =
that would know which environment it is in and retrieve all the values for =
each known property and make system variables out of them. =A0From what I u=
nderstand this might still require I have them in the POM; I'm not sure if=
=A0maven-resources-plugin would automatically replace each ${propertyName} =
with the proertyName system variable without having to have the propertyNam=
e in the POM?=0A=0A3) Is there another way that I am missing that this can =
be done using maven-resources-plugin? =A0I can see that it is very powerful=
 tool, as everything in Maven has proven to me to be so I'm probably missin=
g another approach.=0A=0AA few things to consider that I would like to have=
...=0A1) Centralized view into all our properties that can be queried and h=
ave tools built on top of (e.g. a maven resource filter).=0A=0A2) Minimal e=
ntries of propertyName. =A0Essentially the ${propertyName} should only be e=
ntered into the property file and after that just the entries that go into =
the central data store. =A0The pom is left alone.=0A=0A3) Environments can =
be easily added and removed and altered by only touching the centralized da=
tastore.=0A=0AI guess those three=0A things have one thing in common, benef=
its of having our properties in a centralized datastore. =A0At my current e=
mployer they built just such a system that works off of web services (manag=
ed global properties on a per environment basis). =A0It is not in productio=
n yet so from my point of view I will interface out the Dao and just swap i=
mplementations when its ready... using a simple relational DB at first.=A0=
=0A=0Athanks=0Ajose=0A=0A=0AOn Monday, August 18, 2014 2:06 PM, Karl Heinz =
Marbaise <khmarbaise@gmx.de> wrote:=0A=0A=0A=0AHi Jose,=0A=0A=0Acan you ela=
borate a little bit more why you are not using the=0A default =0Afiltering =
capabilities of maven-resources-plugin etc. ?=0A=0ACan you explain what exa=
ctly you like to achieve?=0A=0A=0A=0A> Hello,=0A>=0A> We have projects with=
 many property and xml files that need resource filtering per environment.=
=0A>=0A> For example in a property file one might see ${mysqlDbHost}, ${mys=
qlDbPw}, and ${mysqlDbUser}.=A0 There would also be a system variable calle=
d ENVIRONMENT.=A0 Based on the ${propertyName} and ENVIRONMENT value, the r=
esource filter would replace with the correct value.=A0 This can be done wi=
th a DB (SELECT value FROM properties WHERE env=3D"env" and name=3D"propert=
yName") or via a web service (getPropertyValue?env=3Denv&name=3DpropertyNam=
e).=0A>=0A> On the Maven side the solution seem to be to create a custom Ma=
venResourcesFiltering.=A0 The custom MavenResourcesFiltering implementation=
 would do the lookups I mentioned above for each ${propertyName} encountere=
d in the resource files.=0A>=0A> 1)=A0 Is my assessment that creating a cus=
tom MavenResourcesFiltering is the way to go?=A0 Maybe this problem is alre=
ady solved already, since it does not seem unique?=0A>=0A> 2)=A0 I have vis=
ited multiple Maven articles on this but still have no idea how to implemen=
t it, the sites I visited are listed below.=A0 Does anyone know of any docu=
ment or can provide feedback on how to implement a custom MavenResourcesFil=
tering?=0A>=0A> It seems to me that at some point I would need a method tha=
t has either gets a list of all the ${propertyName}'s found in a=0A file an=
d the ability to provide the value for that property name.=A0 Following the=
 links I found I cannot tell where that method should be implemented and ho=
w to get it called from MyMojo.execute().=0A>=0A> 1:=A0 http://maven.apache=
.org/shared/maven-filtering/=0A> 2:=A0 http://maven.apache.org/shared/maven=
-filtering/usage.html=0A> 3:=A0 http://maven.apache.org/guides/plugin/guide=
-java-plugin-development.html=0A>=0A> Thank you!=0A> jose=0A>=0A=0AKind reg=
ards=0AKarl-Heinz Marbaise=0A=0A-------------------------------------------=
--------------------------=0ATo unsubscribe, e-mail: users-unsubscribe@mave=
n.apache.org=0AFor additional commands, e-mail: users-help@maven.apache.org
---537478627-1037763254-1408477424=:46892--

