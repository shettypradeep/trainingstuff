From users-return-137100-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Aug 21 15:07:56 2014
Return-Path: <users-return-137100-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3CAFB1149E
	for <apmail-maven-users-archive@www.apache.org>; Thu, 21 Aug 2014 15:07:56 +0000 (UTC)
Received: (qmail 24411 invoked by uid 500); 21 Aug 2014 15:07:54 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 24324 invoked by uid 500); 21 Aug 2014 15:07:54 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 24313 invoked by uid 99); 21 Aug 2014 15:07:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2014 15:07:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mgainty@hotmail.com designates 65.55.116.34 as permitted sender)
Received: from [65.55.116.34] (HELO BLU004-OMC1S23.hotmail.com) (65.55.116.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Aug 2014 15:07:49 +0000
Received: from BLU172-W15 ([65.55.116.7]) by BLU004-OMC1S23.hotmail.com with Microsoft SMTPSVC(7.5.7601.22712);
	 Thu, 21 Aug 2014 08:07:28 -0700
X-TMN: [rwXRf4+gIu5RSj/gcfokxs53B//0Vopt]
X-Originating-Email: [mgainty@hotmail.com]
Message-ID: <BLU172-W15A459B1641311C477DF7EAED30@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_369117a2-b07e-4355-a06c-2e0bed4883ed_"
From: Martin Gainty <mgainty@hotmail.com>
To: "users@maven.apache.org" <users@maven.apache.org>
Subject: RE: maven + SNI == problems?
Date: Thu, 21 Aug 2014 11:07:27 -0400
Importance: Normal
In-Reply-To: <BFDF1A2F-B90A-4BEE-8641-3ECCFB8EFC70@sharp.fm>
References: <BFDF1A2F-B90A-4BEE-8641-3ECCFB8EFC70@sharp.fm>
MIME-Version: 1.0
X-OriginalArrivalTime: 21 Aug 2014 15:07:28.0388 (UTC) FILETIME=[9F8D6C40:01CFBD51]
X-Virus-Checked: Checked by ClamAV on apache.org

--_369117a2-b07e-4355-a06c-2e0bed4883ed_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable




> From: minfrin@sharp.fm
> Subject: maven + SNI =3D=3D problems?
> Date: Wed=2C 20 Aug 2014 22:37:36 +0200
> To: users@maven.apache.org
>=20
> Hi all=2C
>=20
> I just tied to do a simple =93mvn install=94 against a long-since-working=
 maven repository that is hosted on an SSL client-certificate protected ser=
ver using SNI=2C and I get the exception below.
>=20
> I see in the stacktrace the default is httpclient=2C which has very patch=
y support for SSL/SNI. Is there a workaround to downgrade to a wagon that w=
orks with SSL and SNI?
>=20
> Apache Maven 3.2.3 (33f8c3e1027c3ddde99d3cdebad2656a31e8fdf4=3B 2014-08-1=
1T22:58:10+02:00)
> Java version: 1.8.0_11=2C vendor: Oracle Corporation
>=20
> [ERROR] Failed to execute goal on project XXX: Could not resolve dependen=
cies for project XXX:war:1.0.0-SNAPSHOT: Failed to collect dependencies at =
XXX:jar:1.23: Failed to read artifact descriptor for XXX:jar:1.23: Could no=
t transfer artifact XXX from/to XXX (https://repo.example.com/XXX/maven2): =
hostname in certificate didn't match: <repo.example.com> !=3D <nexus.exampl=
e.com> OR <nexus.example.com> OR <nexus.slg.example.com> OR <nexus.slg1.exa=
mple.com> OR <nexus.slg2.example.com> -> [Help 1]
> org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute=
 goal on project XXX: Could not resolve dependencies for project XXX:war:1.=
0.0-SNAPSHOT: Failed to collect dependencies at XXX:jar:1.23
> 	at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDe=
pendencies(LifecycleDependencyResolver.java:220)
> 	at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resol=
veProjectDependencies(LifecycleDependencyResolver.java:127)
> 	at org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAr=
eResolved(MojoExecutor.java:257)
> 	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor=
.java:200)
> 	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor=
.java:153)
> 	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor=
.java:145)
> 	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje=
ct(LifecycleModuleBuilder.java:116)
> 	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje=
ct(LifecycleModuleBuilder.java:80)
> 	at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThre=
adedBuilder.build(SingleThreadedBuilder.java:51)
> 	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycl=
eStarter.java:120)
> 	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:347)
> 	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:154)
> 	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:582)
> 	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:214)
> 	at org.apache.maven.cli.MavenCli.main(MavenCli.java:158)
> 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.=
java:62)
> 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces=
sorImpl.java:43)
> 	at java.lang.reflect.Method.invoke(Method.java:483)
> 	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Laun=
cher.java:289)
> 	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.jav=
a:229)
> 	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La=
uncher.java:415)
> 	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:=
356)
> Caused by: org.apache.maven.project.DependencyResolutionException: Could =
not resolve dependencies for project XXX:war:1.0.0-SNAPSHOT: Failed to coll=
ect dependencies at XXX:jar:1.23
> 	at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(D=
efaultProjectDependenciesResolver.java:167)
> 	at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDe=
pendencies(LifecycleDependencyResolver.java:195)
> 	... 22 more
> Caused by: org.eclipse.aether.collection.DependencyCollectionException: F=
ailed to collect dependencies at XXX:jar:1.23
> 	at org.eclipse.aether.internal.impl.DefaultDependencyCollector.collectDe=
pendencies(DefaultDependencyCollector.java:292)
> 	at org.eclipse.aether.internal.impl.DefaultRepositorySystem.collectDepen=
dencies(DefaultRepositorySystem.java:317)
> 	at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(D=
efaultProjectDependenciesResolver.java:159)
> 	... 23 more
> Caused by: org.eclipse.aether.resolution.ArtifactDescriptorException: Fai=
led to read artifact descriptor for XXX:jar:1.23
> 	at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.=
loadPom(DefaultArtifactDescriptorReader.java:349)
> 	at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.=
readArtifactDescriptor(DefaultArtifactDescriptorReader.java:231)
> 	at org.eclipse.aether.internal.impl.DefaultDependencyCollector.process(D=
efaultDependencyCollector.java:461)
> 	at org.eclipse.aether.internal.impl.DefaultDependencyCollector.collectDe=
pendencies(DefaultDependencyCollector.java:261)
> 	... 25 more
> Caused by: org.eclipse.aether.resolution.ArtifactResolutionException: Cou=
ld not transfer artifact XXX:pom:1.23 from/to XXX (https://repo.example.com=
/XXX/maven2): hostname in certificate didn't match: <repo.example.com> !=3D=
 <nexus.example.com> OR <nexus.example.com> OR <nexus.slg.example.com> OR <=
nexus.slg1.example.com> OR <nexus.slg2.example.com>
MG>
MG>The hostname that the cert is bound to !=3D HostNameYouAreProviding
MG>determine the hostname which the cert is using and use that instead
MG>OR create a new cert from the key provided (jks)..here are the instructi=
ons
MG>http://docs.oracle.com/cd/E19798-01/821-1841/gjrgy/index.html
MG>pay particular attention to host=3D attribute which usually is localhost
MG>
> 	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(Defa=
ultArtifactResolver.java:459)
> 	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtif=
acts(DefaultArtifactResolver.java:262)
> 	at org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtif=
act(DefaultArtifactResolver.java:239)
> 	at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.=
loadPom(DefaultArtifactDescriptorReader.java:334)
> 	... 28 more
> Caused by: org.eclipse.aether.transfer.ArtifactTransferException: Could n=
ot transfer artifact XXX:pom:1.23 from/to XXX (https://repo.example.com/XXX=
/maven2): hostname in certificate didn't match: <repo.example.com> !=3D <ne=
xus.example.com> OR <nexus.example.com> OR <nexus.slg.example.com> OR <nexu=
s.slg1.example.com> OR <nexus.slg2.example.com>
> 	at org.eclipse.aether.connector.wagon.WagonRepositoryConnector$6.wrap(Wa=
gonRepositoryConnector.java:1016)
> 	at org.eclipse.aether.connector.wagon.WagonRepositoryConnector$6.wrap(Wa=
gonRepositoryConnector.java:1004)
> 	at org.eclipse.aether.connector.wagon.WagonRepositoryConnector$GetTask.r=
un(WagonRepositoryConnector.java:725)
> 	at org.eclipse.aether.util.concurrency.RunnableErrorForwarder$1.run(Runn=
ableErrorForwarder.java:67)
> 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.=
java:1142)
> 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor=
.java:617)
> 	at java.lang.Thread.run(Thread.java:745)
> Caused by: org.apache.maven.wagon.TransferFailedException: hostname in ce=
rtificate didn't match: <repo.example.com> !=3D <nexus.example.com> OR <nex=
us.example.com> OR <nexus.slg.example.com> OR <nexus.slg1.example.com> OR <=
nexus.slg2.example.com>
> 	at org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.fillInp=
utData(AbstractHttpClientWagon.java:935)
> 	at org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:11=
6)
> 	at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
> 	at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
> 	at org.eclipse.aether.connector.wagon.WagonRepositoryConnector$GetTask.r=
un(WagonRepositoryConnector.java:660)
> 	... 4 more
> Caused by: javax.net.ssl.SSLException: hostname in certificate didn't mat=
ch: <repo.example.com> !=3D <nexus.example.com> OR <nexus.example.com> OR <=
nexus.slg.example.com> OR <nexus.slg1.example.com> OR <nexus.slg2.example.c=
om>
> 	at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.AbstractVer=
ifier.verify(AbstractVerifier.java:231)
> 	at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.BrowserComp=
atHostnameVerifier.verify(BrowserCompatHostnameVerifier.java:54)
> 	at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.AbstractVer=
ifier.verify(AbstractVerifier.java:152)
> 	at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.AbstractVer=
ifier.verify(AbstractVerifier.java:133)
> 	at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.SSLConnecti=
onSocketFactory.verifyHostname(SSLConnectionSocketFactory.java:291)
> 	at org.apache.maven.wagon.providers.http.httpclient.conn.ssl.SSLConnecti=
onSocketFactory.connectSocket(SSLConnectionSocketFactory.java:262)
> 	at org.apache.maven.wagon.providers.http.httpclient.impl.conn.HttpClient=
ConnectionOperator.connect(HttpClientConnectionOperator.java:118)
> 	at org.apache.maven.wagon.providers.http.httpclient.impl.conn.PoolingHtt=
pClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:31=
4)
> 	at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.MainC=
lientExec.establishRoute(MainClientExec.java:357)
> 	at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.MainC=
lientExec.execute(MainClientExec.java:218)
> 	at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.Proto=
colExec.execute(ProtocolExec.java:194)
> 	at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.Retry=
Exec.execute(RetryExec.java:85)
> 	at org.apache.maven.wagon.providers.http.httpclient.impl.execchain.Redir=
ectExec.execute(RedirectExec.java:108)
> 	at org.apache.maven.wagon.providers.http.httpclient.impl.client.Internal=
HttpClient.doExecute(InternalHttpClient.java:186)
> 	at org.apache.maven.wagon.providers.http.httpclient.impl.client.Closeabl=
eHttpClient.execute(CloseableHttpClient.java:82)
> 	at org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.execute=
(AbstractHttpClientWagon.java:756)
> 	at org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.fillInp=
utData(AbstractHttpClientWagon.java:854)
> 	... 8 more
> [ERROR]=20
> [ERROR]=20
> [ERROR] For more information about the errors and possible solutions=2C p=
lease read the following articles:
> [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/Depende=
ncyResolutionException
>=20
> Regards=2C
> Graham
> =97
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: users-unsubscribe@maven.apache.org
> For additional commands=2C e-mail: users-help@maven.apache.org
>=20
 		 	   		  =

--_369117a2-b07e-4355-a06c-2e0bed4883ed_--

