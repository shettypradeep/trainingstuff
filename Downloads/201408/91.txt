From users-return-137094-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Aug 20 14:03:08 2014
Return-Path: <users-return-137094-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 129581152F
	for <apmail-maven-users-archive@www.apache.org>; Wed, 20 Aug 2014 14:03:08 +0000 (UTC)
Received: (qmail 1611 invoked by uid 500); 20 Aug 2014 14:03:01 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 1530 invoked by uid 500); 20 Aug 2014 14:03:01 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 1518 invoked by uid 99); 20 Aug 2014 14:03:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2014 14:03:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmartx@yahoo.com designates 98.139.213.140 as permitted sender)
Received: from [98.139.213.140] (HELO nm12-vm0.bullet.mail.bf1.yahoo.com) (98.139.213.140)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2014 14:02:55 +0000
Received: from [66.196.81.174] by nm12.bullet.mail.bf1.yahoo.com with NNFMP; 20 Aug 2014 14:02:34 -0000
Received: from [98.139.212.231] by tm20.bullet.mail.bf1.yahoo.com with NNFMP; 20 Aug 2014 14:02:34 -0000
Received: from [127.0.0.1] by omp1040.mail.bf1.yahoo.com with NNFMP; 20 Aug 2014 14:02:34 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 58974.43512.bm@omp1040.mail.bf1.yahoo.com
Received: (qmail 48383 invoked by uid 60001); 20 Aug 2014 14:02:33 -0000
X-YMail-OSG: 7Fd7DZ8VM1l4cks3lkcUJUezV6apTVPhnZXGBIwIKaP.3Cg
 U95qMwJZ9FeitqSWxR9XVfkMSvXGblyb99aInot83MRrCGobkWF.QAmUF5Eb
 pCGVK1LbH73gQV5ld7Ds3r2DakDAHexcuH31N6KAtLGVu4jX.TiqOD7m2_9i
 WXLBWTvyqn4HtQC3ndDvy5pV192L.O2opuFlUPLAyNWQ8tY4l.PJPQ8t3B62
 sqoWhesUPDnHfJdhSzWwrotajwWzW8BZans3E7KUHvytfPZODQigZTXYLzlS
 CGmwqqjCiPCVHlUpUUdTxTxt3FR.Kk0U5SngyzRRtzJaCHScVdbLFEpslQEE
 Ee5_w0fDEbT4uEpkwg4arwQ.dm.gIhXupZkzCMXLDDq.z_sUOAZgVO7ifihD
 qyxYveoKLrx5Y90K5Kw34w3Xse.l05_eeajAG1nAkAiEN_IZDH9qda9OkyR1
 byvnY5bxaBooyD.DlRffYLv9vI98kCBGZWrDpLg7CmzdssCWyaK6PkTuzMoP
 UZPIszHkLdcuINGec9XUYbECyrRGXecmCqYzeWv0m9GK2trv68New_hIYPpY
 8JvzwjtQWfpJU5bEY28tRjzdzMqN7YD6pWJ2eHxFvD.Z_fUOmKS8wPd8Ba7c
 CpV8tGTWGgkOphjcFmEurBcRXqg--
Received: from [8.25.146.11] by web161506.mail.bf1.yahoo.com via HTTP; Wed, 20 Aug 2014 07:02:32 PDT
X-Rocket-MIMEInfo: 002.001,Q29vbCwgdGhhbmtzIFJvYmVydC4KClNvIG5vdyB0aGF0IEkgaGF2ZSB0aGUgcGx1Z2luIGZ1bmN0aW9uaW5nIGFuZCBtecKgTWF2ZW5SZXNvdXJjZXNGaWx0ZXJpbmcnc8KgZmlsdGVyUmVzb3VyY2VzKG1yZSkgbWV0aG9kIGJlaW5nIGNhbGxlZCwgd2hhdCBjYW4gSSBkbyB3aXRoIHRoZcKgTWF2ZW5SZXNvdXJjZXNFeGVjdXRpb24gdG8gYWNjZXNzIHRoZSAke3Byb3BlcnR5TmFtZXN9IGluIG15IHJlc291cmNlcyBhbmQgc2V0IHRoZWlyIHZhbHVlcz8KCkkgcHVsbGVkIHRoZSBMaXN0PFJlc291cmNlPiBmcm8BMAEBAQE-
X-Mailer: YahooMailWebService/0.8.201.700
References: <1408374170.39344.YahooMailNeo@web161504.mail.bf1.yahoo.com> <53F2405C.3030507@gmx.de> <1408388910.1705.YahooMailNeo@web161504.mail.bf1.yahoo.com> <1408473968.35259.YahooMailNeo@web161503.mail.bf1.yahoo.com> <1408477424.46892.YahooMailNeo@web161506.mail.bf1.yahoo.com> <op.xkuv5nvrkdkhrr@robertscholte.dynamic.ziggo.nl>
Message-ID: <1408543352.38494.YahooMailNeo@web161506.mail.bf1.yahoo.com>
Date: Wed, 20 Aug 2014 07:02:32 -0700
From: Jose Martinez <jmartx@yahoo.com.INVALID>
Reply-To: Jose Martinez <jmartx@yahoo.com>
Subject: Re: creating custom Maven resource filter
To: Maven Users List <users@maven.apache.org>
In-Reply-To: <op.xkuv5nvrkdkhrr@robertscholte.dynamic.ziggo.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-537478627-1532804351-1408543352=:38494"
X-Virus-Checked: Checked by ClamAV on apache.org

---537478627-1532804351-1408543352=:38494
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Cool, thanks Robert.=0A=0ASo now that I have the plugin functioning and my=
=A0MavenResourcesFiltering's=A0filterResources(mre) method being called, wh=
at can I do with the=A0MavenResourcesExecution to access the ${propertyName=
s} in my resources and set their values?=0A=0AI pulled the List<Resource> f=
rom the=A0MavenResourcesExecution, but I can't figure out how to get the ${=
propertyNames} from my resources or set their values?=0A=A0=0Athanks=0Ajose=
=0A=0A=0AOn Tuesday, August 19, 2014 4:21 PM, Robert Scholte <rfscholte@apa=
che.org> wrote:=0A =0A=0A=0ADone, see MRESOURCES-182[1]=0AWill be updated w=
ith the next release.=0A=0Athanks,=0ARobert=0A=0A[1] https://jira.codehaus.=
org/browse/MRESOURCES-182=0A=0AOp Tue, 19 Aug 2014 21:43:44 +0200 schreef J=
ose Martinez=A0 =0A<jmartx@yahoo.com.invalid>:=0A=0A> Problem resolved.=A0 =
The documentation in this link has the dependency=A0 =0A> tags in the wrong=
 place... =0A> http://maven.apache.org/plugins/maven-resources-plugin/examp=
les/custom-resource-filters.html#Dependency_declaration=0A>=A0 When I moved=
 the plugin's dependencies tag outside of the configuration=A0 =0A> tags th=
en everything worked.=A0 Who ever manages that link please=A0 =0A> investig=
ate.=A0 Everything else on the site was spot on.=0A>=A0 thanks=0A> jose=0A>=
=0A>=0A> On Tuesday, August 19, 2014 2:46 PM, Jose Martinez <jmartx@yahoo.c=
om>=A0 =0A> wrote:=0A>=0A>=0A> Hello,=0A>=0A> I've made some progress on th=
is and have a problem with Maven finding my=A0 =0A> custom plugin's class.=
=0A>=0A> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A> [ERROR] Failed to exec=
ute goal=A0 =0A> org.apache.maven.plugins:maven-resources-plugin:2.6:resour=
ces=A0 =0A> (default-resources) on project roc: java.util.NoSuchElementExce=
ption=A0 =0A> [ERROR] role: org.apache.maven.shared.filtering.MavenResource=
sFiltering=A0 =0A> [ERROR] roleHint: ResourceFilter [ERROR] -> [Help 1]=0A>=
 =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A>=0A> I created a class that imp=
lements MavenResourcesFiltering, and added the=A0 =0A> plexus javadoc comme=
nts as instructed. =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A> /**=0A>=A0 *=
=0A>=A0 * @author jmartinez=0A>=A0 *=0A>=A0 * @plexus.component=A0 =0A> rol=
e=3D"org.apache.maven.shared.filtering.MavenResourcesFiltering" =0A>=A0 *=
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  role-hint=3D"ResourceFilter"=0A>=A0 */=
=0A> public class ResourceFilter implements MavenResourcesFiltering {=0A> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A>=0A> I also added=
 to the main project's POM the maven-resources-plugin with=A0 =0A> the depe=
ndency and maven filtering hints.=A0 The problem I am having is=A0 =0A> tha=
t Maven cannot find my MavenResourcesFiltering class.=A0 Its suppose to=A0 =
=0A> be able to find it using the role-hint.=0A> =3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=0A>=A0 =A0 =A0 =A0  <pluginManagement>=0A>=A0 =A0 =A0 =A0 =
=A0 =A0  <plugins>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <plugin>=0A>=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <groupId>org.apache.maven.plugins</groupId=
>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <artifactId>maven-resources-p=
lugin</artifactId>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <version>2.6=
</version>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <configuration>=0A>=
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <dependencies>=0A>=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <dependency>=0A>=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <groupId>com.xxxx<=
/groupId>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =0A> <artifactId>xxxx-rfp-maven-plugin</artifactId>=0A>=A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <version>0.2</version>=
=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  </dependency>=
=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  </dependencies>=0A>=A0=
 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <mavenFilteringHints>=0A>=A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =0A> <mavenFilterin=
gHint>ResourceFilter</mavenFilteringHint>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0  </mavenFilteringHints>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0  </configuration>=0A>=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  </plugin>=
=0A>=0A> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A>=0A> I suspect the prob=
lem is that my plugin's jar is not being loaded to the=A0 =0A> maven-resour=
ces-plugin classpath.=A0 I suspect this because my jar was not=A0 =0A> bein=
g downloaded until I added it to the pom's dependencies list, versus=A0 =0A=
> it being downloaded when it was just in the maven-resources-plugin=A0 =0A=
> dependency list.=0A>=0A> Am I missing something here?=0A>=0A> thanks=0A> =
jose=0A>=0A>=0A> On Monday, August 18, 2014 3:08 PM, Jose Martinez=A0 =0A> =
<jmartx@yahoo.com.INVALID> wrote:=0A>=0A>=0A> Karl,=0A>=0A> Thank you for r=
esponding.=A0 Yes I can go into more detail.=A0 =0A> Lets go back to my exa=
mple of the mysql DB credentials.=A0 Lets say I have=A0 =0A> five environme=
nts.=A0 So that means I have 3 variables times 5=A0 =0A> environments and t=
hat comes out to 15=0A>=A0 various values.=A0 From what I understand about =
the=A0 =0A> maven-resources-plugin that would mean I would have to do one o=
f the=A0 =0A> following:=0A> 1)=A0 Stick those 15 values in the pom and the=
n maybe use 5 different=A0 =0A> profiles, one for each env.=A0 This can get=
 quite cumbersome and our=A0 =0A> deployment scripts would have to call mvn=
 with the correct profile.=0A>=0A> 2)=A0  Use system variables.=A0 Have som=
e code called at some point before=A0 =0A> the maven build that would know =
which environment it is in and retrieve=A0 =0A> all the values for each kno=
wn property and make system variables out of=A0 =0A> them.=A0 From what I u=
nderstand this might still require I have them in=A0 =0A> the POM; I'm not =
sure if maven-resources-plugin would automatically=A0 =0A> replace each ${p=
ropertyName} with the proertyName system variable=A0 =0A> without having to=
 have the propertyName in the POM?=0A>=0A> 3) Is there another way that I a=
m missing that this can be done using=A0 =0A> maven-resources-plugin?=A0 I =
can see that it is very powerful tool, as=A0 =0A> everything in Maven has p=
roven to me to be so I'm probably missing=A0 =0A> another approach.=0A>=0A>=
 A few things to consider that I would like to have...=0A> 1) Centralized v=
iew into all our properties that can be queried and have=A0 =0A> tools buil=
t on top of (e.g. a maven resource filter).=0A>=0A> 2) Minimal entries of p=
ropertyName.=A0 Essentially the ${propertyName}=A0 =0A> should only be ente=
red into the property file and after that just the=A0 =0A> entries that go =
into the central data store.=A0 The pom is left alone.=0A>=0A> 3) Environme=
nts can be easily added and removed and altered by only=A0 =0A> touching th=
e centralized datastore.=0A>=0A> I guess those three=0A>=A0 things have one=
 thing in common, benefits of having our properties in a=A0 =0A> centralize=
d datastore.=A0 At my current employer they built just such a=A0 =0A> syste=
m that works off of web services (managed global properties on a=A0 =0A> pe=
r environment basis).=A0 It is not in production yet so from my point of=A0=
 =0A> view I will interface out the Dao and just swap implementations when =
its=A0 =0A> ready... using a simple relational DB at first.=0A> thanks=0A> =
jose=0A>=0A>=0A> On Monday, August 18, 2014 2:06 PM, Karl Heinz Marbaise=A0=
 =0A> <khmarbaise@gmx.de> wrote:=0A>=0A>=0A>=0A> Hi Jose,=0A>=0A>=0A> can y=
ou elaborate a little bit more why you are not using the=0A>=A0 default=0A>=
 filtering capabilities of maven-resources-plugin etc. ?=0A>=0A> Can you ex=
plain what exactly you like to achieve?=0A>=0A>=0A>=0A>> Hello,=0A>>=0A>> W=
e have projects with many property and xml files that need resource=A0 =0A>=
> filtering per environment.=0A>>=0A>> For example in a property file one m=
ight see ${mysqlDbHost},=A0 =0A>> ${mysqlDbPw}, and ${mysqlDbUser}.=A0 Ther=
e would also be a system=A0 =0A>> variable called ENVIRONMENT.=A0 Based on =
the ${propertyName} and=A0 =0A>> ENVIRONMENT value, the resource filter wou=
ld replace with the correct=A0 =0A>> value.=A0 This can be done with a DB (=
SELECT value FROM properties WHERE=A0 =0A>> env=3D"env" and name=3D"propert=
yName") or via a web service=A0 =0A>> (getPropertyValue?env=3Denv&name=3Dpr=
opertyName).=0A>>=0A>> On the Maven side the solution seem to be to create =
a custom=A0 =0A>> MavenResourcesFiltering.=A0 The custom MavenResourcesFilt=
ering=A0 =0A>> implementation would do the lookups I mentioned above for ea=
ch=A0 =0A>> ${propertyName} encountered in the resource files.=0A>>=0A>> 1)=
=A0 Is my assessment that creating a custom MavenResourcesFiltering is=A0 =
=0A>> the way to go?=A0 Maybe this problem is already solved already, since=
 it=A0 =0A>> does not seem unique?=0A>>=0A>> 2)=A0 I have visited multiple =
Maven articles on this but still have no=A0 =0A>> idea how to implement it,=
 the sites I visited are listed below.=A0 Does=A0 =0A>> anyone know of any =
document or can provide feedback on how to implement=A0 =0A>> a custom Mave=
nResourcesFiltering?=0A>>=0A>> It seems to me that at some point I would ne=
ed a method that has either=A0 =0A>> gets a list of all the ${propertyName}=
's found in a=0A>=A0 file and the ability to provide the value for that pro=
perty name.=A0 =0A> Following the links I found I cannot tell where that me=
thod should be=A0 =0A> implemented and how to get it called from MyMojo.exe=
cute().=0A>>=0A>> 1:=A0 http://maven.apache.org/shared/maven-filtering/=0A>=
> 2:=A0 http://maven.apache.org/shared/maven-filtering/usage.html=0A>> 3:=
=A0 =0A>> http://maven.apache.org/guides/plugin/guide-java-plugin-developme=
nt.html=0A>>=0A>> Thank you!=0A>> jose=0A>>=0A>=0A> Kind regards=0A> Karl-H=
einz Marbaise=0A>=0A> -----------------------------------------------------=
----------------=0A> To unsubscribe, e-mail: users-unsubscribe@maven.apache=
.org=0A> For additional commands, e-mail: users-help@maven.apache.org=0A=0A=
=0A---------------------------------------------------------------------=0A=
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org=0AFor additional=
 commands, e-mail: users-help@maven.apache.org
---537478627-1532804351-1408543352=:38494--

