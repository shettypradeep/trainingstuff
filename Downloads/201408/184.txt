From users-return-137098-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Aug 20 20:38:09 2014
Return-Path: <users-return-137098-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5187117CC
	for <apmail-maven-users-archive@www.apache.org>; Wed, 20 Aug 2014 20:38:08 +0000 (UTC)
Received: (qmail 52534 invoked by uid 500); 20 Aug 2014 20:38:04 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 52452 invoked by uid 500); 20 Aug 2014 20:38:04 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 52435 invoked by uid 99); 20 Aug 2014 20:38:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2014 20:38:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of minfrin@sharp.fm designates 80.168.143.5 as permitted sender)
Received: from [80.168.143.5] (HELO monica.sharp.fm) (80.168.143.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Aug 2014 20:37:58 +0000
Received: from [192.168.88.249] (unknown [192.168.88.249])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(Client did not present a certificate)
	(Authenticated sender: minfrin@sharp.fm)
	by monica.sharp.fm (Postfix) with ESMTPSA id 3E6AD810BB
	for <users@maven.apache.org>; Wed, 20 Aug 2014 21:37:37 +0100 (BST)
From: Graham Leggett <minfrin@sharp.fm>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
Subject: maven + SNI == problems?
Message-Id: <BFDF1A2F-B90A-4BEE-8641-3ECCFB8EFC70@sharp.fm>
Date: Wed, 20 Aug 2014 22:37:36 +0200
To: Maven Users List <users@maven.apache.org>
Mime-Version: 1.0 (Mac OS X Mail 7.3 \(1878.6\))
X-Mailer: Apple Mail (2.1878.6)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I just tied to do a simple =93mvn install=94 against a =
long-since-working maven repository that is hosted on an SSL =
client-certificate protected server using SNI, and I get the exception =
below.

I see in the stacktrace the default is httpclient, which has very patchy =
support for SSL/SNI. Is there a workaround to downgrade to a wagon that =
works with SSL and SNI?

Apache Maven 3.2.3 (33f8c3e1027c3ddde99d3cdebad2656a31e8fdf4; =
2014-08-11T22:58:10+02:00)
Java version: 1.8.0_11, vendor: Oracle Corporation

[ERROR] Failed to execute goal on project XXX: Could not resolve =
dependencies for project XXX:war:1.0.0-SNAPSHOT: Failed to collect =
dependencies at XXX:jar:1.23: Failed to read artifact descriptor for =
XXX:jar:1.23: Could not transfer artifact XXX from/to XXX =
(https://repo.example.com/XXX/maven2): hostname in certificate didn't =
match: <repo.example.com> !=3D <nexus.example.com> OR =
<nexus.example.com> OR <nexus.slg.example.com> OR =
<nexus.slg1.example.com> OR <nexus.slg2.example.com> -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to =
execute goal on project XXX: Could not resolve dependencies for project =
XXX:war:1.0.0-SNAPSHOT: Failed to collect dependencies at XXX:jar:1.23
	at =
org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDepende=
ncies(LifecycleDependencyResolver.java:220)
	at =
org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resolvePro=
jectDependencies(LifecycleDependencyResolver.java:127)
	at =
org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAreReso=
lved(MojoExecutor.java:257)
	at =
org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java=
:200)
	at =
org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java=
:153)
	at =
org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java=
:145)
	at =
org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(Li=
fecycleModuleBuilder.java:116)
	at =
org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(Li=
fecycleModuleBuilder.java:80)
	at =
org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedB=
uilder.build(SingleThreadedBuilder.java:51)
	at =
org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStar=
ter.java:120)
	at =
org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:347)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:154)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:582)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:214)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:158)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at =
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:=
62)
	at =
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorIm=
pl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at =
org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.=
java:289)
	at =
org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229=
)
	at =
org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launche=
r.java:415)
	at =
org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
Caused by: org.apache.maven.project.DependencyResolutionException: Could =
not resolve dependencies for project XXX:war:1.0.0-SNAPSHOT: Failed to =
collect dependencies at XXX:jar:1.23
	at =
org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(Defaul=
tProjectDependenciesResolver.java:167)
	at =
org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDepende=
ncies(LifecycleDependencyResolver.java:195)
	... 22 more
Caused by: org.eclipse.aether.collection.DependencyCollectionException: =
Failed to collect dependencies at XXX:jar:1.23
	at =
org.eclipse.aether.internal.impl.DefaultDependencyCollector.collectDepende=
ncies(DefaultDependencyCollector.java:292)
	at =
org.eclipse.aether.internal.impl.DefaultRepositorySystem.collectDependenci=
es(DefaultRepositorySystem.java:317)
	at =
org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(Defaul=
tProjectDependenciesResolver.java:159)
	... 23 more
Caused by: org.eclipse.aether.resolution.ArtifactDescriptorException: =
Failed to read artifact descriptor for XXX:jar:1.23
	at =
org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadP=
om(DefaultArtifactDescriptorReader.java:349)
	at =
org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readA=
rtifactDescriptor(DefaultArtifactDescriptorReader.java:231)
	at =
org.eclipse.aether.internal.impl.DefaultDependencyCollector.process(Defaul=
tDependencyCollector.java:461)
	at =
org.eclipse.aether.internal.impl.DefaultDependencyCollector.collectDepende=
ncies(DefaultDependencyCollector.java:261)
	... 25 more
Caused by: org.eclipse.aether.resolution.ArtifactResolutionException: =
Could not transfer artifact XXX:pom:1.23 from/to XXX =
(https://repo.example.com/XXX/maven2): hostname in certificate didn't =
match: <repo.example.com> !=3D <nexus.example.com> OR =
<nexus.example.com> OR <nexus.slg.example.com> OR =
<nexus.slg1.example.com> OR <nexus.slg2.example.com>
	at =
org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolve(DefaultAr=
tifactResolver.java:459)
	at =
org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifacts(=
DefaultArtifactResolver.java:262)
	at =
org.eclipse.aether.internal.impl.DefaultArtifactResolver.resolveArtifact(D=
efaultArtifactResolver.java:239)
	at =
org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadP=
om(DefaultArtifactDescriptorReader.java:334)
	... 28 more
Caused by: org.eclipse.aether.transfer.ArtifactTransferException: Could =
not transfer artifact XXX:pom:1.23 from/to XXX =
(https://repo.example.com/XXX/maven2): hostname in certificate didn't =
match: <repo.example.com> !=3D <nexus.example.com> OR =
<nexus.example.com> OR <nexus.slg.example.com> OR =
<nexus.slg1.example.com> OR <nexus.slg2.example.com>
	at =
org.eclipse.aether.connector.wagon.WagonRepositoryConnector$6.wrap(WagonRe=
positoryConnector.java:1016)
	at =
org.eclipse.aether.connector.wagon.WagonRepositoryConnector$6.wrap(WagonRe=
positoryConnector.java:1004)
	at =
org.eclipse.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(Wa=
gonRepositoryConnector.java:725)
	at =
org.eclipse.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableE=
rrorForwarder.java:67)
	at =
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:=
1142)
	at =
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java=
:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.apache.maven.wagon.TransferFailedException: hostname in =
certificate didn't match: <repo.example.com> !=3D <nexus.example.com> OR =
<nexus.example.com> OR <nexus.slg.example.com> OR =
<nexus.slg1.example.com> OR <nexus.slg2.example.com>
	at =
org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.fillInputDat=
a(AbstractHttpClientWagon.java:935)
	at =
org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:116)
	at =
org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
	at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
	at =
org.eclipse.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(Wa=
gonRepositoryConnector.java:660)
	... 4 more
Caused by: javax.net.ssl.SSLException: hostname in certificate didn't =
match: <repo.example.com> !=3D <nexus.example.com> OR =
<nexus.example.com> OR <nexus.slg.example.com> OR =
<nexus.slg1.example.com> OR <nexus.slg2.example.com>
	at =
org.apache.maven.wagon.providers.http.httpclient.conn.ssl.AbstractVerifier=
.verify(AbstractVerifier.java:231)
	at =
org.apache.maven.wagon.providers.http.httpclient.conn.ssl.BrowserCompatHos=
tnameVerifier.verify(BrowserCompatHostnameVerifier.java:54)
	at =
org.apache.maven.wagon.providers.http.httpclient.conn.ssl.AbstractVerifier=
.verify(AbstractVerifier.java:152)
	at =
org.apache.maven.wagon.providers.http.httpclient.conn.ssl.AbstractVerifier=
.verify(AbstractVerifier.java:133)
	at =
org.apache.maven.wagon.providers.http.httpclient.conn.ssl.SSLConnectionSoc=
ketFactory.verifyHostname(SSLConnectionSocketFactory.java:291)
	at =
org.apache.maven.wagon.providers.http.httpclient.conn.ssl.SSLConnectionSoc=
ketFactory.connectSocket(SSLConnectionSocketFactory.java:262)
	at =
org.apache.maven.wagon.providers.http.httpclient.impl.conn.HttpClientConne=
ctionOperator.connect(HttpClientConnectionOperator.java:118)
	at =
org.apache.maven.wagon.providers.http.httpclient.impl.conn.PoolingHttpClie=
ntConnectionManager.connect(PoolingHttpClientConnectionManager.java:314)
	at =
org.apache.maven.wagon.providers.http.httpclient.impl.execchain.MainClient=
Exec.establishRoute(MainClientExec.java:357)
	at =
org.apache.maven.wagon.providers.http.httpclient.impl.execchain.MainClient=
Exec.execute(MainClientExec.java:218)
	at =
org.apache.maven.wagon.providers.http.httpclient.impl.execchain.ProtocolEx=
ec.execute(ProtocolExec.java:194)
	at =
org.apache.maven.wagon.providers.http.httpclient.impl.execchain.RetryExec.=
execute(RetryExec.java:85)
	at =
org.apache.maven.wagon.providers.http.httpclient.impl.execchain.RedirectEx=
ec.execute(RedirectExec.java:108)
	at =
org.apache.maven.wagon.providers.http.httpclient.impl.client.InternalHttpC=
lient.doExecute(InternalHttpClient.java:186)
	at =
org.apache.maven.wagon.providers.http.httpclient.impl.client.CloseableHttp=
Client.execute(CloseableHttpClient.java:82)
	at =
org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.execute(Abst=
ractHttpClientWagon.java:756)
	at =
org.apache.maven.wagon.providers.http.AbstractHttpClientWagon.fillInputDat=
a(AbstractHttpClientWagon.java:854)
	... 8 more
[ERROR]=20
[ERROR]=20
[ERROR] For more information about the errors and possible solutions, =
please read the following articles:
[ERROR] [Help 1] =
http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionExcep=
tion

Regards,
Graham
=97


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


