From users-return-137066-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Mon Aug 18 19:09:02 2014
Return-Path: <users-return-137066-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46C9711C85
	for <apmail-maven-users-archive@www.apache.org>; Mon, 18 Aug 2014 19:09:02 +0000 (UTC)
Received: (qmail 87622 invoked by uid 500); 18 Aug 2014 19:08:58 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 87541 invoked by uid 500); 18 Aug 2014 19:08:58 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 87504 invoked by uid 99); 18 Aug 2014 19:08:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2014 19:08:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmartx@yahoo.com designates 98.139.212.174 as permitted sender)
Received: from [98.139.212.174] (HELO nm15.bullet.mail.bf1.yahoo.com) (98.139.212.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Aug 2014 19:08:51 +0000
Received: from [66.196.81.171] by nm15.bullet.mail.bf1.yahoo.com with NNFMP; 18 Aug 2014 19:08:30 -0000
Received: from [98.139.212.197] by tm17.bullet.mail.bf1.yahoo.com with NNFMP; 18 Aug 2014 19:08:30 -0000
Received: from [127.0.0.1] by omp1006.mail.bf1.yahoo.com with NNFMP; 18 Aug 2014 19:08:30 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 560176.84519.bm@omp1006.mail.bf1.yahoo.com
Received: (qmail 3144 invoked by uid 60001); 18 Aug 2014 19:08:30 -0000
X-YMail-OSG: 5LbLkRcVM1meucl3IQ9YnAg0rvd09Yma77Et_o6DdaCBsCA
 TfKIW71knUYxiRSOgSgiMK3d550u2T_At04gjofMXiE.dQVpjr0db_3xdxyY
 c6A1PpQMUfmpdoPzCnmIeYx3jSeWuzIaVXu5C20fWkfeAKUEZZxY04C29gaX
 00I174r5F8Xn9De67YAcief7OTsdYRUoPMnYE9eSwrNp.5rQSAx7d4eQqK0G
 tU4LCbrtMtVAzQahaZp1MYDNk3r3n.flYLGclvr0zfWzUYnQzJ0cyirN5Mv3
 YfF43akqTWw8leJTV6BflsKAbhNzFVwbWf4FbheFjDAvYZjMEXu_TNuTk5.Q
 plivA.0WXmqGDiLWXxwpmDTsiQAf7DjFiMy29pDdFsGm3Zf1idpHIFFCwIal
 1ml1wc4.wqBW5baoOzIA2NM_vVwFxBdcgLBadth1HjC5VyGez83xMYDMEgr_
 0xV67jvINzDBtpl7cj_2kU7JcjSwhZPmJomvezz0NHZHHnHFiSHa_cTmBxAr
 f7RFEY0l4jgC6ItjrFGanMr0IOHlfflq2CgQMHHsBuabmupH50Ls-
Received: from [8.25.146.11] by web161504.mail.bf1.yahoo.com via HTTP; Mon, 18 Aug 2014 12:08:30 PDT
X-Rocket-MIMEInfo: 002.001,S2FybCwKClRoYW5rIHlvdSBmb3IgcmVzcG9uZGluZy4gwqBZZXMgSSBjYW4gZ28gaW50byBtb3JlIGRldGFpbC4gwqAKCkxldHMgZ28gYmFjayB0byBteSBleGFtcGxlIG9mIHRoZSBteXNxbCBEQiBjcmVkZW50aWFscy4gwqBMZXRzIHNheSBJIGhhdmUgZml2ZSBlbnZpcm9ubWVudHMuIMKgU28gdGhhdCBtZWFucyBJIGhhdmUgMyB2YXJpYWJsZXMgdGltZXMgNSBlbnZpcm9ubWVudHMgYW5kIHRoYXQgY29tZXMgb3V0IHRvIDE1IHZhcmlvdXMgdmFsdWVzLiDCoEZyb20gd2hhdCBJIHVuZGVyc3RhbmQgYWJvdXQBMAEBAQE-
X-Mailer: YahooMailWebService/0.8.201.700
References: <1408374170.39344.YahooMailNeo@web161504.mail.bf1.yahoo.com> <53F2405C.3030507@gmx.de>
Message-ID: <1408388910.1705.YahooMailNeo@web161504.mail.bf1.yahoo.com>
Date: Mon, 18 Aug 2014 12:08:30 -0700
From: Jose Martinez <jmartx@yahoo.com.INVALID>
Reply-To: Jose Martinez <jmartx@yahoo.com>
Subject: Re: creating custom Maven resource filter
To: Maven Users List <users@maven.apache.org>,
  "info@soebes.de" <info@soebes.de>
In-Reply-To: <53F2405C.3030507@gmx.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1835785293-1299839997-1408388910=:1705"
X-Virus-Checked: Checked by ClamAV on apache.org

--1835785293-1299839997-1408388910=:1705
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Karl,=0A=0AThank you for responding. =A0Yes I can go into more detail. =A0=
=0A=0ALets go back to my example of the mysql DB credentials. =A0Lets say I=
 have five environments. =A0So that means I have 3 variables times 5 enviro=
nments and that comes out to 15 various values. =A0From what I understand a=
bout the=A0maven-resources-plugin that would mean I would have to do one of=
 the following:=A0=0A=0A1) =A0Stick those 15 values in the pom and then may=
be use 5 different profiles, one for each env. =A0This can get quite cumber=
some and our deployment scripts would have to call mvn with the correct pro=
file.=0A=0A2) =A0 Use system variables. =A0Have some code called at some po=
int before the maven build that would know which environment it is in and r=
etrieve all the values for each known property and make system variables ou=
t of them. =A0From what I understand this might still require I have them i=
n the POM; I'm not sure if=A0maven-resources-plugin would automatically rep=
lace each ${propertyName} with the proertyName system variable without havi=
ng to have the propertyName in the POM?=0A=0A3) Is there another way that I=
 am missing that this can be done using maven-resources-plugin? =A0I can se=
e that it is very powerful tool, as everything in Maven has proven to me to=
 be so I'm probably missing another approach.=0A=0AA few things to consider=
 that I would like to have...=0A1) Centralized view into all our properties=
 that can be queried and have tools built on top of (e.g. a maven resource =
filter).=0A=0A2) Minimal entries of propertyName. =A0Essentially the ${prop=
ertyName} should only be entered into the property file and after that just=
 the entries that go into the central data store. =A0The pom is left alone.=
=0A=0A3) Environments can be easily added and removed and altered by only t=
ouching the centralized datastore.=0A=0AI guess those three things have one=
 thing in common, benefits of having our properties in a centralized datast=
ore. =A0At my current employer they built just such a system that works off=
 of web services (managed global properties on a per environment basis). =
=A0It is not in production yet so from my point of view I will interface ou=
t the Dao and just swap implementations when its ready... using a simple re=
lational DB at first.=A0=0A=0Athanks=0Ajose=0A=0A=0AOn Monday, August 18, 2=
014 2:06 PM, Karl Heinz Marbaise <khmarbaise@gmx.de> wrote:=0A =0A=0A=0AHi =
Jose,=0A=0A=0Acan you elaborate a little bit more why you are not using the=
 default =0Afiltering capabilities of maven-resources-plugin etc. ?=0A=0ACa=
n you explain what exactly you like to achieve?=0A=0A=0A=0A> Hello,=0A>=0A>=
 We have projects with many property and xml files that need resource filte=
ring per environment.=0A>=0A> For example in a property file one might see =
${mysqlDbHost}, ${mysqlDbPw}, and ${mysqlDbUser}.=A0 There would also be a =
system variable called ENVIRONMENT.=A0 Based on the ${propertyName} and ENV=
IRONMENT value, the resource filter would replace with the correct value.=
=A0 This can be done with a DB (SELECT value FROM properties WHERE env=3D"e=
nv" and name=3D"propertyName") or via a web service (getPropertyValue?env=
=3Denv&name=3DpropertyName).=0A>=0A> On the Maven side the solution seem to=
 be to create a custom MavenResourcesFiltering.=A0 The custom MavenResource=
sFiltering implementation would do the lookups I mentioned above for each $=
{propertyName} encountered in the resource files.=0A>=0A> 1)=A0 Is my asses=
sment that creating a custom MavenResourcesFiltering is the way to go?=A0 M=
aybe this problem is already solved already, since it does not seem unique?=
=0A>=0A> 2)=A0 I have visited multiple Maven articles on this but still hav=
e no idea how to implement it, the sites I visited are listed below.=A0 Doe=
s anyone know of any document or can provide feedback on how to implement a=
 custom MavenResourcesFiltering?=0A>=0A> It seems to me that at some point =
I would need a method that has either gets a list of all the ${propertyName=
}'s found in a file and the ability to provide the value for that property =
name.=A0 Following the links I found I cannot tell where that method should=
 be implemented and how to get it called from MyMojo.execute().=0A>=0A> 1:=
=A0 http://maven.apache.org/shared/maven-filtering/=0A> 2:=A0 http://maven.=
apache.org/shared/maven-filtering/usage.html=0A> 3:=A0 http://maven.apache.=
org/guides/plugin/guide-java-plugin-development.html=0A>=0A> Thank you!=0A>=
 jose=0A>=0A=0AKind regards=0AKarl-Heinz Marbaise=0A=0A--------------------=
-------------------------------------------------=0ATo unsubscribe, e-mail:=
 users-unsubscribe@maven.apache.org=0AFor additional commands, e-mail: user=
s-help@maven.apache.org
--1835785293-1299839997-1408388910=:1705--

