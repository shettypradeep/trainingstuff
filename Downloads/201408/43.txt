From users-return-137148-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Fri Aug 29 02:29:48 2014
Return-Path: <users-return-137148-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD07611E70
	for <apmail-maven-users-archive@www.apache.org>; Fri, 29 Aug 2014 02:29:47 +0000 (UTC)
Received: (qmail 93995 invoked by uid 500); 29 Aug 2014 02:29:46 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 93913 invoked by uid 500); 29 Aug 2014 02:29:46 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 93901 invoked by uid 99); 29 Aug 2014 02:29:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2014 02:29:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of juvenshun@gmail.com designates 209.85.220.42 as permitted sender)
Received: from [209.85.220.42] (HELO mail-pa0-f42.google.com) (209.85.220.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Aug 2014 02:29:19 +0000
Received: by mail-pa0-f42.google.com with SMTP id lf10so5068566pab.29
        for <users@maven.apache.org>; Thu, 28 Aug 2014 19:29:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=date:from:to:message-id:in-reply-to:references:subject:mime-version
         :content-type;
        bh=sf7cz+tNOeAjZEkxIKiCkQ5HXzmUSyPFDAKTGnzIl1Q=;
        b=aPydcJwMeycpqn7WHx1QmZoDCtGAWcE6V93uHsM56lCV+GX4bZdn5bOmE+HRtOIfeQ
         a+PPI019Cw+dXDAWbK27h1303QMY5u26jnlgZ8AA4aiTolf1ubjjU7nl22qb4kzUb6p0
         4ipwwXEcqaeLCTowTehWDfFsZKnhd90l9Pn1Vzgct9hKnzi1HyiFXsbz+/A8Jn2ME8KL
         n18f64WDdm17LdFNCns/iw8YU1nVCDpusyFsETVAX1mnrO9aPOS64qQMjZmrV4jNLD4j
         fFNy5PoXOBBhKXD3w1nriJHTiXMm0MuCWX71THbWZLxC1oilEjsdiLfaXuLI/ZbtjqUx
         AfUg==
X-Received: by 10.66.246.109 with SMTP id xv13mr11431179pac.144.1409279357343;
        Thu, 28 Aug 2014 19:29:17 -0700 (PDT)
Received: from [10.19.200.109] ([202.55.20.10])
        by mx.google.com with ESMTPSA id ek9sm7694655pdb.55.2014.08.28.19.29.15
        for <users@maven.apache.org>
        (version=TLSv1 cipher=RC4-SHA bits=128/128);
        Thu, 28 Aug 2014 19:29:16 -0700 (PDT)
Date: Fri, 29 Aug 2014 10:29:11 +0800
From: Juven Xu <juvenshun@gmail.com>
To: Maven Users List <users@maven.apache.org>
Message-ID: <58F0D57CFF6C411685A878A05542A18A@gmail.com>
In-Reply-To: <4AEC4DAA-5750-44E6-A84F-F8D480CF78AE@gmail.com>
References: <3C8773DCAF2F48179EE39D482559C6CB@gmail.com>
 <4AEC4DAA-5750-44E6-A84F-F8D480CF78AE@gmail.com>
Subject: Re: maven 3.1.1 crashes on GC overhead limit exceeded with
 millions of org.eclipse.aether.graph.DefaultDependencyNode
X-Mailer: sparrow 1.6.4 (build 1178)
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="53ffe577_4c2a7166_ef"
X-Virus-Checked: Checked by ClamAV on apache.org

--53ffe577_4c2a7166_ef
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

The background is, i=E2=80=99m helping migrating a huge project from mave=
n2 to maven3, and I noticed this project is using dozens of SNAPSHOT depe=
ndencies, and more than hundred  transitive SNAPSHOT dependencies, after =
updating most of the SNAPSHOT direct dependencies to RELEASE dependencies=
, the crash issue is mitigated a lot, but build is still slow, but at lea=
st it can pass.

Thanks,
Juven


On Wednesday, August 27, 2014 at 7:18 PM, Stuart McCulloch wrote:

> I wonder if this might be related to https://bugs.eclipse.org/bugs/show=
=5Fbug.cgi=3Fid=3D418250 =3F
> =20
> On 27 Aug 2014, at 04:35, Juven Xu <juvenshun=40gmail.com (mailto:juven=
shun=40gmail.com)> wrote:
> =20
> > maven: 3.1.1 =20
> > jdk: 1.7.0=5F25 Java HotSpot(TM) Server VM (build 23.25-b01, mixed mo=
de)
> > =20
> > the error message is:
> > =20
> > =5BIN=46O=5D Building buy-client 1.1.8-o2o630-SNAPSHOT
> > =5BIN=46O=5D --------------------------------------------------------=
---------------- =20
> > =5BWARNING=5D The POM for com.taobao.logistics:logistics-common:jar:2=
.4.5 is invalid, transitive dependencies (if any) will not be available, =
enable debug logging for more details =20
> > =5BWARNING=5D The POM for com.taobao.thboss:thboss-common:jar:1.0.2-2=
0131230.121421-32 is invalid, transitive dependencies (if any) will not b=
e available, enable debug logging for more details =20
> > =5BWARNING=5D The POM for com.taobao.hbaseextend:hbase-client:jar:1.0=
.1-20121211.063750-2 is invalid, transitive dependencies (if any) will no=
t be available, enable debug logging for more details =20
> > =5BWARNING=5D The POM for com.taobao.hbaseextend:hbasetransit-client:=
jar:1.0.1-20121211.064048-1 is invalid, transitive dependencies (if any) =
will not be available, enable debug logging for more details =20
> > =5BWARNING=5D The POM for com.taobao.sharereport:share-report-common:=
jar:1.5.1-20121030.080558-17 is invalid, transitive dependencies (if any)=
 will not be available, enable debug logging for more details =20
> > =5BWARNING=5D The POM for com.taobao.trade:tradeback-client:jar:1.0.0=
-20131118.063752-35 is invalid, transitive dependencies (if any) will not=
 be available, enable debug logging for more details =20
> > =5BERROR=5D GC overhead limit exceeded -> =5BHelp 1=5D =20
> > =5BERROR=5D =20
> > =5BERROR=5D To see the full stack trace of the errors, re-run Maven w=
ith the -e switch. =20
> > =5BERROR=5D Re-run Maven using the -X switch to enable full debug log=
ging. =20
> > =5BERROR=5D =20
> > =5BERROR=5D =46or more information about the errors and possible solu=
tions, please read the following articles: =20
> > =5BERROR=5D =5BHelp 1=5D http://cwiki.apache.org/confluence/display/M=
AVEN/OutOfMemoryError
> > =20
> > =20
> > the jvm is full and a log of full gc happening, gc stat:
> > =20
> > S0 S1 E O P YGC YGCT =46GC =46GCT GCT
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 39 101.650 107.575
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 39 101.650 107.575
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 39 101.650 107.575
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 40 104.805 110.730
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 40 104.805 110.730
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 40 104.805 110.730
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 41 107.840 113.765
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 41 107.840 113.765
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 41 107.840 113.765
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 42 110.864 116.788
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 42 110.864 116.788
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 42 110.864 116.788
> > 0.00 0.00 95.86 100.00 67.33 50 5.925 42 114.029 119.954
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 43 114.029 119.954
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 43 114.029 119.954
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 43 114.029 119.954
> > 0.00 0.00 100.00 100.00 67.33 50 5.925 44 117.087 123.011
> > =20
> > and the vm is full of org.eclipse.aether.graph.DefaultDependencyNode
> > =20
> > =24 jmap -histo 4072 =7C head -30
> > =20
> > num =23instances =23bytes class name
> > ----------------------------------------------
> > 1: 5019593 281097208 org.eclipse.aether.graph.DefaultDependencyNode
> > 2: 6075641 145815384 java.util.ArrayList
> > 3: 6076588 116705216 =5BLjava.lang.Object;
> > 4: 2375373 76011936 org.eclipse.aether.internal.impl.DataPool=24Graph=
Key
> > 5: 2439860 58556640 java.util.HashMap=24Entry
> > 6: 231529 34940048 =5BLjava.util.HashMap=24Entry;
> > 7: 231420 34810936 =5BLorg.eclipse.aether.graph.Exclusion;
> > 8: 598180 28712640 org.eclipse.aether.repository.RemoteRepository
> > 9: 839969 26879008 java.util.LinkedHashMap=24Entry
> > 10: 597260 15767704 =5BLorg.eclipse.aether.repository.RemoteRepositor=
y;
> > 11: 208071 11651976 java.util.LinkedHashMap
> > 12: 597288 9556608 java.util.Arrays=24ArrayList
> > 13: 597269 9556304 java.util.Collections=24UnmodifiableRandomAccessLi=
st
> > 14: 125479 7259280 =5BC
> > 15: 29099 3530504 <constMethodKlass>
> > 16: 197851 3165616 java.util.Collections=24SingletonList
> > 17: 197706 3163296 java.util.HashMap=24KeySet
> > 18: 197476 3159616 java.util.LinkedHashSet
> > 19: 197349 3157584 org.eclipse.aether.util.graph.selector.AndDependen=
cySelector
> > 20: 197347 3157552 org.eclipse.aether.util.graph.selector.ExclusionDe=
pendencySelector
> > 21: 124674 2992176 java.lang.String
> > 22: 29099 2564344 <methodKlass>
> > 23: 54598 2183920 org.eclipse.aether.artifact.DefaultArtifact
> > 24: 3089 1623136 <constantPoolKlass>
> > 25: 54968 1319232 org.eclipse.aether.graph.Dependency
> > 26: 3089 1237432 <instanceKlassKlass>
> > 27: 23456 1125888 java.util.HashMap
> > =20
> > =24mvn dependency:tree works well
> > =20
> > Sorry i can not paste the full project=E2=80=99s POM for company secu=
rity reasons, but let me know if any other info I missed.
> > =20
> > Thanks
> > -- =20
> > Juven Xu
> > Sent with Sparrow (http://www.sparrowmailapp.com/=3Fsig)
> > =20
> =20
> =20
> =20



--53ffe577_4c2a7166_ef--


