From users-return-136783-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Jul 16 18:27:14 2014
Return-Path: <users-return-136783-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1794A1061A
	for <apmail-maven-users-archive@www.apache.org>; Wed, 16 Jul 2014 18:27:14 +0000 (UTC)
Received: (qmail 43212 invoked by uid 500); 16 Jul 2014 18:27:12 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 43131 invoked by uid 500); 16 Jul 2014 18:27:12 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 43117 invoked by uid 99); 16 Jul 2014 18:27:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2014 18:27:12 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ctrueden.wisc@gmail.com designates 209.85.220.179 as permitted sender)
Received: from [209.85.220.179] (HELO mail-vc0-f179.google.com) (209.85.220.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2014 18:27:07 +0000
Received: by mail-vc0-f179.google.com with SMTP id hq11so1002702vcb.24
        for <users@maven.apache.org>; Wed, 16 Jul 2014 11:26:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:from:date:message-id
         :subject:to:content-type;
        bh=mtayJYsmYiHc5H7F5LJWc97NUBvF5a3gSBo9+8DqzYM=;
        b=fZXLvqew3Kfgy+DPIgC0rWESlg/nPDixMK/blqDJribfIOLzx06copnCgUNnDjitAa
         /hQi2uEyCKKDZq+WspVyxkDFzVPk5OL0S5+Y7LT7pT2a+iCwqbcH3Fp9h2bk43NGdj67
         V2f1mI/HsrWdi+hzsPIb3bkYHgN4a1Sd0m5LAJTbFMuLwucXNrRDZpRp7BMWoa+D/kXa
         sU/9xOWijT9R9J9dYuc0WOqUpcciKkhBRDfwLZgD9ovKByW83gli3+ToIQhgpcedP5Zo
         NYCxMN0UT2CJNDJn1rPeg0x5l0f/JkB+2WV58LF7lR9BJPr8aWeTfS9GDuDHDBdGE/2h
         RAqw==
X-Received: by 10.52.33.202 with SMTP id t10mr3616699vdi.97.1405535206574;
 Wed, 16 Jul 2014 11:26:46 -0700 (PDT)
MIME-Version: 1.0
Sender: ctrueden.wisc@gmail.com
Received: by 10.58.114.101 with HTTP; Wed, 16 Jul 2014 11:26:16 -0700 (PDT)
In-Reply-To: <OF1F05DF42.E00CE028-ON85257D17.0063A305-85257D17.00648730@belden.com>
References: <OF1F05DF42.E00CE028-ON85257D17.0063A305-85257D17.00648730@belden.com>
From: Curtis Rueden <ctrueden@wisc.edu>
Date: Wed, 16 Jul 2014 13:26:16 -0500
X-Google-Sender-Auth: 1COn8CnW-V28dMswXk9j9wVisBM
Message-ID: <CADN69ymG8f7j19xuCtUqdXx8yJoLYgaNGuHiyrQcUApdhcUJxA@mail.gmail.com>
Subject: Re: move data from pom to class or class to pom
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=20cf3079bc30b5108304fe53aa1a
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3079bc30b5108304fe53aa1a
Content-Type: text/plain; charset=UTF-8

Hi Alejandro,

> I have a java class that has a constant in it (static final String).
> This string is a version number, e.g. "1.3.2-test".

Beware: the Java compiler often inlines constants, _including String
constants_, into classes that reference the value. So if you compile a
class "Foo" against version 1 of library "bar", then run with version 2 of
"bar" in the classpath, Foo will still see the constant value as 1 instead
of 2.

http://javasplitter.blogspot.com/2011/10/static-final-inline-trap.html

Much, much better to embed the version number into the JAR manifest, and/or
read it out of the Maven POM which the maven-jar-plugin embeds in the JAR
file.

Regards,
Curtis


On Wed, Jul 16, 2014 at 1:18 PM, <Alejandro.Endo@miranda.com> wrote:

> I have a java class that has a constant in it (static final String). This
> string is a version number, e.g. "1.3.2-test". I need to have this same
> value in a maven plugin configuration (the jaxb plugin) so I am wondering,
> is it better to keep the actual declaration in the code and somehow tell
> maven to take it from the code, or is it better to declare it in the pom
> and tell java to take the literal value to define the constant from the
> pom??
>
> I don't know how to do either so I would also like to hear some ideas. I
> am hoping i don't have to use resource filtering since having a source
> file as a resource is kind of problematic to me. It has to be ONLY that
> file that gets filtered, it would need to be in a non-standard location
> not src/main/java (maybe this is not true), and in general, it seems to me
> that treating source code as resource is counter-intuitive
>
> Has anyone else solved this issue with the DRY principle across behaviour
> and build system?
>
> The short background is that maven generates an XML schema via jaxb and
> this schema file is then made available at runtime via a service
>
> Thank you,
>
> Alejandro Endo | Software Designer/Concepteur de logiciels
>
>
> DISCLAIMER:
> Privileged and/or Confidential information may be contained in this
> message. If you are not the addressee of this message, you may not
> copy, use or deliver this message to anyone. In such event, you
> should destroy the message and kindly notify the sender by reply
> e-mail. It is understood that opinions or conclusions that do not
> relate to the official business of the company are neither given
> nor endorsed by the company.
> Thank You.
>

--20cf3079bc30b5108304fe53aa1a--

