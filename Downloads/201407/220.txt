From users-return-136722-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Jul  3 14:35:38 2014
Return-Path: <users-return-136722-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2C2A81177E
	for <apmail-maven-users-archive@www.apache.org>; Thu,  3 Jul 2014 14:35:38 +0000 (UTC)
Received: (qmail 44134 invoked by uid 500); 3 Jul 2014 14:35:36 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 44057 invoked by uid 500); 3 Jul 2014 14:35:36 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 44046 invoked by uid 99); 3 Jul 2014 14:35:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2014 14:35:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Roland.Asmann@cyannetworks.com designates 86.59.36.111 as permitted sender)
Received: from [86.59.36.111] (HELO mail.prosec.cc) (86.59.36.111)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2014 14:35:29 +0000
Received: from owa.cyan-networks.com (owa.cyan-networks.com [212.69.162.197])
	by mail.prosec.cc (Postfix) with ESMTP id 45F2ACEC31A
	for <users@maven.apache.org>; Thu,  3 Jul 2014 16:35:06 +0200 (CEST)
Received: from owa.cyan-networks.com ([fe80::3879:1b9b:c40e:f164]) by
 owa.cyan-networks.com ([fe80::3879:1b9b:c40e:f164%11]) with mapi; Thu, 3 Jul
 2014 16:35:06 +0200
From: Roland Asmann <Roland.Asmann@cyannetworks.com>
To: "users@maven.apache.org" <users@maven.apache.org>
Date: Thu, 3 Jul 2014 16:35:11 +0200
Subject: Problem with iso9660-maven-plugin
Thread-Topic: Problem with iso9660-maven-plugin
Thread-Index: Ac+Wy/uHWACqRuZ9TOmwZfaR+9dOCw==
Message-ID: <53B56A1F.1080603@cyannetworks.com>
Accept-Language: en-US, de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
user-agent: Mozilla/5.0 (X11; Linux x86_64; rv:24.0) Gecko/20100101
 Thunderbird/24.6.0
acceptlanguage: en-US, de-DE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I am trying to switch one of our 'projects' to Maven and am running into=20
some problems.

The project consists of some shell-scripts (which I want to replace with=20
Maven) and configurations to build an Ubuntu pre-seed Image. What the=20
scripts do in short:
- Mount an Ubuntu image
- Copy its content to a directory to work in
- Add our configurations
- Create a new Image

I have found a plugin to extract the image without mounting it (getting=20
rid of the need for 'sudo' in our script) and copying the configurations=20
is peanuts any day.
To repackage the image, I looked into the iso9660-maven-plugin, which=20
was said to do just that.

Now, when I run my project, it always stops with the following error:

[ERROR] Failed to execute goal=20
com.github.stephenc.java-iso-tools:iso9660-maven-plugin:2.0.0:iso=20
(default) on project test: Execution default of goal=20
com.github.stephenc.java-iso-tools:iso9660-maven-plugin:2.0.0:iso=20
failed: String index out of range: 41 -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to=20
execute goal=20
com.github.stephenc.java-iso-tools:iso9660-maven-plugin:2.0.0:iso=20
(default) on project test: Execution default of goal=20
com.github.stephenc.java-iso-tools:iso9660-maven-plugin:2.0.0:iso=20
failed: String index out of range: 41
	at=20
org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:=
225)
	at=20
org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:=
153)
	at=20
org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:=
145)
	at=20
org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(Lif=
ecycleModuleBuilder.java:84)
	at=20
org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(Lif=
ecycleModuleBuilder.java:59)
	at=20
org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(Li=
fecycleStarter.java:183)
	at=20
org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStart=
er.java:161)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at=20
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:5=
7)
	at=20
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImp=
l.java:43)
	at java.lang.reflect.Method.invoke(Method.java:622)
	at=20
org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.j=
ava:290)
	at=20
org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
	at=20
org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher=
.java:409)
	at=20
org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution=20
default of goal=20
com.github.stephenc.java-iso-tools:iso9660-maven-plugin:2.0.0:iso=20
failed: String index out of range: 41
	at=20
org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildP=
luginManager.java:110)
	at=20
org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:=
209)
	... 19 more
Caused by: java.lang.StringIndexOutOfBoundsException: String index out=20
of range: 41
	at java.lang.String.substring(String.java:1946)
	at=20
com.github.stephenc.javaisotools.joliet.impl.JolietNamingConventions.apply(=
JolietNamingConventions.java:89)
	at=20
com.github.stephenc.javaisotools.iso9660.NamingConventions.processDirectory=
(NamingConventions.java:233)
	at=20
com.github.stephenc.javaisotools.iso9660.impl.ISO9660Factory.applyNamingCon=
ventions(ISO9660Factory.java:79)
	at=20
com.github.stephenc.javaisotools.joliet.impl.JolietHandler.<init>(JolietHan=
dler.java:60)
	at=20
com.github.stephenc.javaisotools.iso9660.impl.CreateISO.process(CreateISO.j=
ava:52)
	at=20
com.github.stephenc.javaisotools.maven.PackageMojo.execute(PackageMojo.java=
:317)
	at=20
org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildP=
luginManager.java:101)
	... 20 more

Looking through the code, it seems the plugin thinks the filename is too=20
long. I added some logging and built a SNAPSHOT version to play with,=20
but I am not quite sure about the calculation of the filename-length.=20
All names that go in are exactly 64 characters long, but the plugin=20
wants to shorten them still.

I was hoping that Mr. Connolly could perhaps take another look at it and=20
give me some pointer/update the current version to work correctly.

A simple test-case is to just unpack an Ubuntu image (I was testing with=20
10.04.4 amd64) and try to repackage it.

Thanks.

Roland

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


