From users-return-136945-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Jul 29 19:13:16 2014
Return-Path: <users-return-136945-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 79EDD11886
	for <apmail-maven-users-archive@www.apache.org>; Tue, 29 Jul 2014 19:13:16 +0000 (UTC)
Received: (qmail 30735 invoked by uid 500); 29 Jul 2014 19:13:15 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 30644 invoked by uid 500); 29 Jul 2014 19:13:15 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 30628 invoked by uid 99); 29 Jul 2014 19:13:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2014 19:13:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of thomas.larsson@klarna.com designates 209.85.217.176 as permitted sender)
Received: from [209.85.217.176] (HELO mail-lb0-f176.google.com) (209.85.217.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2014 19:13:10 +0000
Received: by mail-lb0-f176.google.com with SMTP id u10so85816lbd.7
        for <users@maven.apache.org>; Tue, 29 Jul 2014 12:12:49 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=3vMD6xEdILirnOL17XsNLj3magEbUvsoyRyoIY77eIo=;
        b=H3x8xGve/fjeCLRvxakkOuS6A/ASfPU2SewGJljo5ze9wLF5FLVmuBEeCy4wZrxSMP
         11aGwgOppy1lO49ZfS/TVmPlT1TgGYRgIVZJTzKB1DQo+j5oANMpUmo2ZR65mqFVZpp3
         wKlqmWgeyudXznS4k8OzdUNSu2CDiPopq5fO64jMzQxLdeMKRyi8DsdKb6GR1+K5F9tR
         U22sOkarwYi6of3jHEpJ3KH0uTcSBiGijp6QrTE4TER4EDWH6DzQeu3u7S+tH+15c6mM
         WOYCGKr3bRtGOXbt++7evxdg01HsiaJ+KTUphykCAULC6WhLIyC7u9N1RMkn2GCPyM6J
         OksA==
X-Gm-Message-State: ALoCoQkEd/lsY5hITuiv6Kbz1wizYuBqd48O+UBFHVmiQWAYcgm7DXEpbe4n1WOY7Arc/f8bfkBB
MIME-Version: 1.0
X-Received: by 10.152.216.228 with SMTP id ot4mr4631686lac.40.1406661168957;
 Tue, 29 Jul 2014 12:12:48 -0700 (PDT)
Received: by 10.114.18.98 with HTTP; Tue, 29 Jul 2014 12:12:48 -0700 (PDT)
In-Reply-To: <CALhtWkdqp=4V77rt+2bzS_FO881hXAv+pq-c8zq2TmjZa3ReOw@mail.gmail.com>
References: <CAP4oMn_+dbHEQ+qcg=KWv8T-Ndd-XoKO3iZMPOR8sBoZSvjP7g@mail.gmail.com>
	<CALhtWke5UVckkVGRZoA1tQo+dQxCPeBx3Ypeb5uEUpmG7eOZxA@mail.gmail.com>
	<CAP4oMn-LuBxG9tALX61if3e1jAqUHgLArD0jaVj611Vtm0AfEw@mail.gmail.com>
	<CALhtWkdqp=4V77rt+2bzS_FO881hXAv+pq-c8zq2TmjZa3ReOw@mail.gmail.com>
Date: Tue, 29 Jul 2014 21:12:48 +0200
Message-ID: <CAP4oMn-mAjmib5ds604qtHHN8q2-rKB5JZN_7uE9_V5_394m0w@mail.gmail.com>
Subject: Re: Why doesn't wagon ssh look at exit codes instead of error stream content
From: Thomas Larsson <thomas.larsson@klarna.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=001a11345ee44baa7304ff59d317
X-Virus-Checked: Checked by ClamAV on apache.org

--001a11345ee44baa7304ff59d317
Content-Type: text/plain; charset=UTF-8

Thank you.

I'm still interested in the wagon code btw.


On Tue, Jul 29, 2014 at 8:21 PM, Benson Margulies <bimargulies@gmail.com>
wrote:

> http://evgeny-goldin.com/wiki/Sshexec-maven-plugin?
>
> On Tue, Jul 29, 2014 at 10:04 AM, Thomas Larsson
> <thomas.larsson@klarna.com> wrote:
> > Well, the use case is that we perform an integration test of an Apache
> > Oozie workflow and one step in this test is to verify that some hive
> > databases have been deleted.
> > Since the tests are not run locally but on a cluster, we need to execute
> > some commands on that cluster over ssh.
> >
> > An obvious follow-up question is, is there any recommended maven plugin
> for
> > executing ssh commands?
> >
> > But on a more philosophical level I am also interested in why the Wagon
> > code looks like it does.
> >
> > Best Regards
> > Thomas
> >
> >
> > On Tue, Jul 29, 2014 at 3:49 PM, Benson Margulies <bimargulies@gmail.com
> >
> > wrote:
> >
> >> In my experience, trying to use the wagon-maven-plugin to do anything
> >> except move Maven artifacts around is a really exciting experience. If
> >> you describe your entire use case perhaps someone can offer another
> >> approach?
> >>
> >> On Tue, Jul 29, 2014 at 9:47 AM, Thomas Larsson
> >> <thomas.larsson@klarna.com> wrote:
> >> > Hello all,
> >> >
> >> > I am wondering why it is that
> >> > org.apache.maven.wagon.providers.ssh.jsch.AbstractJschWagon is not
> >> looking
> >> > at non-zero exit codes instead of non-null error streams to determine
> >> > whether a command has succeeded or not?
> >> >
> >> > We have a case where we execute an Apache Hive query over ssh using
> the
> >> > maven wagon plugin, with a command looking something like "hive -e
> 'show
> >> > databases'".
> >> > When doing this, hive outputs parts of the result over stderr (which
> is
> >> > very weird I grant) but the command exits with exit code 0, i.e. no
> >> error.
> >> > However, since wagon (and in extension the wagon-plugin) sees stderr
> >> > content, it considers this a failed step.
> >> >
> >> > I found some TODOs in the code surrounding this but no JIRA Issue.
> >> > So I am wondering what the concrete reason is for doing it in this
> >> slightly
> >> > weird way.
> >> >
> >> > Best Regards
> >> > Thomas
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> >> For additional commands, e-mail: users-help@maven.apache.org
> >>
> >>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>
>

--001a11345ee44baa7304ff59d317--

