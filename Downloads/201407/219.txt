From users-return-136911-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sat Jul 26 00:39:02 2014
Return-Path: <users-return-136911-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3776A11449
	for <apmail-maven-users-archive@www.apache.org>; Sat, 26 Jul 2014 00:39:02 +0000 (UTC)
Received: (qmail 67603 invoked by uid 500); 26 Jul 2014 00:39:00 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 67530 invoked by uid 500); 26 Jul 2014 00:39:00 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 67518 invoked by uid 99); 26 Jul 2014 00:38:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2014 00:38:59 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,MANY_SPAN_IN_TEXT,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adavidson2@apple.com designates 17.151.62.28 as permitted sender)
Received: from [17.151.62.28] (HELO mail-in6.apple.com) (17.151.62.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2014 00:38:55 +0000
DKIM-Signature: v=1; a=rsa-sha256; d=apple.com; s=mailout2048s; c=relaxed/simple;
	q=dns/txt; i=@apple.com; t=1406335108; x=2270248708;
	h=From:Sender:Reply-To:Subject:Date:Message-id:To:Cc:MIME-version:Content-type:
	Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:
	Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-reply-to:References:List-Id:
	List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
	bh=P7fG0/lUSNh4seLi/0BnA5xXThUZOf8AmpQeT+txLAg=;
	b=GjobB739YMfci4gicaaYIKE64kAsj8FudEGxoT9wOfEPzYIN8gQfP4RCmh8EUAqW
	VZy0FKJxDseDbzIcFskTD3ATzO4XJFPmFHdU15d9s2tHeoKJXTDXuWszZeNjyUGf
	ONmZlukNWIEKF2BOrlutpyB1cT0ZFHh05UKhxRu30UfgQmGK6QT6WUS8rRn+JkAo
	DsNw7VxOS32/3trrDdSKo0lTRD3UQC+98gdg5VdsQvBAFfS7baJue0xLxDhtd2pn
	9kgfydMUCusiEGlDhSre9Zh8yCqKZdEPK0qM5h6W4jaOsNUEFe1NOfAGXi83ALce
	13Ajt57U4rY2KE7OtEbC8A==;
Received: from mail-out.apple.com (mail-out.apple.com [17.151.62.49])
	(using TLS with cipher RC4-MD5 (128/128 bits))
	(Client did not present a certificate)
	by mail-in6.apple.com (Apple Secure Mail Relay) with SMTP id 93.10.32596.488F2D35; Fri, 25 Jul 2014 17:38:28 -0700 (PDT)
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_fPSlI6/bab05SxdPeYRl6Q)"
Received: from relay5.apple.com ([17.128.113.88]) by local.mail-out.apple.com
 (Oracle Communications Messaging Server 7.0.5.30.0 64bit (built Oct 22 2013))
 with ESMTP id <0N9A007GQN3ZQ0I1@local.mail-out.apple.com> for
 users@maven.apache.org; Fri, 25 Jul 2014 17:38:28 -0700 (PDT)
X-AuditID: 11973e15-f79d66d000007f54-d7-53d2f88463b8
Received: from marigold.apple.com (marigold.apple.com [17.128.115.132])
	(using TLS with cipher RC4-MD5 (128/128 bits))
	(Client did not present a certificate)	by relay5.apple.com (Apple SCV relay)
 with SMTP id 1B.71.31858.588F2D35; Fri, 25 Jul 2014 17:38:29 -0700 (PDT)
Received: from [17.207.136.209] by marigold.apple.com
 (Oracle Communications Messaging Server 7.0.5.30.0 64bit (built Oct 22 2013))
 with ESMTPSA id <0N9A005QTN449G30@marigold.apple.com> for
 users@maven.apache.org; Fri, 25 Jul 2014 17:38:28 -0700 (PDT)
From: Andrew Davidson <adavidson2@apple.com>
Message-id: <D6DB5A63-74FB-4BBC-BB4C-84FE76A314C3@apple.com>
Subject: Re: trouble running jaxb2-maven-plugin : You are running with invalid
 JAXP api or implementation
Date: Fri, 25 Jul 2014 17:38:32 -0700
References: <253F2DE7-8476-4AD0-9FC5-28BB34E94FBF@apple.com>
 <CAKDUN1vL+Sxu2+QOoH_0X+TXpL5C=2tqiEwkbZDGjWpyAiqGuw@mail.gmail.com>
To: Maven Users List <users@maven.apache.org>
In-reply-to:
 <CAKDUN1vL+Sxu2+QOoH_0X+TXpL5C=2tqiEwkbZDGjWpyAiqGuw@mail.gmail.com>
X-Mailer: Apple Mail (2.1878.6)
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFjrNLMWRmVeSWpSXmKPExsUiON3OULflx6Vgg/mnLS0ebb3O6MDo0f5U
	KIAxissmJTUnsyy1SN8ugSvj1Z9W9oJfn5kqOj5dZWpg7DrJ1MXIwSEhYCKx80xBFyMnkCkm
	ceHeerYuRi4OIYFZTBLfLm9kBknwCghK/Jh8jwXEZhYIk3jQto0domguk8Sdo29YILpNJB4e
	X8MKkZjEJLHv1nxGCKeRSeLN/1WMIFVsAjoSf7c2QI21kbjX0coKYgsLZEucfrUUbBKLgKrE
	+mNnoSY1M0qsPjwbrEFEQFfi4cUnYDanQLBEY98+JojV8hIfPhxnh7A/s0qcn+wygVFoFpLT
	ZyE5HcLWkvj+qBUozgFky0scPC8LEdaUeHbvE1SJtsSTdxdYFzCyrWIUyk3MzNHNzDPTSywo
	yEnVS87P3cQICX3RHYxnVlkdYhTgYFTi4f1RfilYiDWxrLgy9xCjNAeLkjiv1mGgkEB6Yklq
	dmpqQWpRfFFpTmrxIUYmDk6pBsZ5/Nlt4vufRaikKjiqny17nJtzXrtj5aZrWpobNl9lkp3J
	c/TWTzvhRVEfXFw6mycGL3GeN3l5blCk5BF1jqrCmNiHAs/v6vYa3z4+ZefuCUuee+a8LG5e
	YMitPZnRbiurgJFyqYawZtP+L3z/Mm4ylh9ZdWjnEhHjPwfsLZ3Knhg1zoqsYlNiKc5INNRi
	LipOBACf0AZHXgIAAA==
X-Brightmail-Tracker:
 H4sIAAAAAAAAA+NgFtrMLMWRmVeSWpSXmKPExsUi2FDcotv641KwwdTN7BaPtl5ndGD0aH8q
	FMAYxWWTkpqTWZZapG+XwJWx5PYfpoLv35gqjnY0MzUwvjvF1MXIySEhYCLx8PgaVghbTOLC
	vfVsXYxcHEICk5gk2vd9Y4FwGpkk3vxfxQhSxSagI/F3awMziM0skCSxrfEXG4jNK2Ajca+j
	lRXCNpB49fMxWI2wQLbE6VdLWUBsFgFVifXHzrJCDG1mlFh9eDZYkYiArsTDi0/AbE6BYInG
	vn1Q58lLfPhwnH0CI98sJPtmIdkBEdeWWLbwNZDNAWTrSExeyIgqDGF/PH+EaQEj2ypGgaLU
	nMRKU73EgoKcVL3k/NxNjOCgLIzYwfh/mdUhRgEORiUe3h/ll4KFWBPLiitzDzFKcDArifCW
	zQEK8aYkVlalFuXHF5XmpBYfYpTmYFES5/1zCiglkJ5YkpqdmlqQWgSTZeLglGpgjMz5v3/r
	l1aZ01EbPCfHmVauy47KzhVgtSz6JtPKrvZx1qMUtzOf+eJLWl8e/n2ht7UmMtPexd5urqkQ
	X7XYv6jVGYFdTO67BY9/OjD30cwFPY7c/jcfHq1lPWtzZvkn9ylnPVdWb8mReXbj5nM3sfTr
	DD/3tPxmTvoxSdr+qN6qBRv0Y9SllFiKMxINtZiLihMBPSONt0YCAAA=
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary_(ID_fPSlI6/bab05SxdPeYRl6Q)
Content-type: text/plain; CHARSET=US-ASCII
Content-transfer-encoding: 7BIT

After a long day and a half of hacking I wound up using ant to run a shell script. I could not figure out how to file bug report .

I am using eclipse luna. To get this work correctly I also needed to install the eclipse plugin http://mojo.codehaus.org/build-helper-maven-plugin/
It adds support for the <add_source> goal

Bellow is my final solution.

Hope this helps someone else

Andy

p.s. its does not seem like this mail list shows up in google search results



	<properties>
		<xjc.output.dir>${project.build.directory}/generated-sources/src/main/java</xjc.output.dir>
	</properties>
	<build>
		<plugins>
			<plugin>
				<!-- jaxb2-maven-plugin does not work with latest version of java http://www.journaldev.com/1312/how-to-generate-java-classes-from-xsd-using-xjc-maven-plugin 
					http://mojo.codehaus.org/jaxb2-maven-plugin/ -->
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-antrun-plugin</artifactId>
				<executions>
					<execution>
						<id>xjc</id>
						<phase>generate-sources</phase>
						<goals>
							<goal>run</goal>
						</goals>
						<configuration>
							<target>
								<mkdir dir="${xjc.output.dir}" />
								<exec executable="sh">
									<arg
										line="${basedir}/src/main/bin/runXJC.sh 												
											${xjc.output.dir}
											${project.basedir}/src/main/xsd/global.xjb 
											${project.basedir}/src/main/xsd" />
								</exec>
							</target>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.codehaus.mojo</groupId>
				<artifactId>build-helper-maven-plugin</artifactId>
				<executions>
					<execution>
						<id>add-source</id>
						<phase>generate-sources</phase>
						<goals>
							<goal>add-source</goal>
						</goals>
						<configuration>
							<sources>
								<source>${xjc.output.dir}</source>
							</sources>
						</configuration>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>


This is the listing for runXJC.sh
#!/bin/sh -x

###############################################################################
# SET THESE VALUES
###############################################################################

set -x # turn debugging on
# set +x # turn debugging off

OUTPUT_DIR=${1}
XJB_FILE=${2}
XSD_FILES=`ls ${3}/*.xsd`

###############################################################################
# DO NOT EDIT BELOW THIS LINE
###############################################################################

ALL_XSD_FILES=""
LOG_FILE_PATH=$OUTPUT_DIR"/"$LOG_FILE

for XSD_FILE_NAME in $XSD_FILES
do
    ALL_XSD_FILES=$ALL_XSD_FILES" "$XSD_FILE_NAME
done

xjc -d $OUTPUT_DIR -extension -b $XJB_FILE $ALL_XSD_FILES #2>&1 | tee $LOG_FILE_PATH




On Jul 24, 2014, at 11:09 PM, Anders Hammar <anders@hammar.net> wrote:

> Could it be this:
> http://stackoverflow.com/questions/18493541/invalid-jaxp-api-when-unmarshaling-jaxb
> 
> /Anders
> 
> 
> On Fri, Jul 25, 2014 at 3:31 AM, Andrew Davidson <adavidson2@apple.com>
> wrote:
> 
>> Hello
>> 
>> I am having a heck of a time working with XSD files and maven. I am
>> working on a mac. It looks like I have the latest and greatest xjc.
>> 
>> Any idea what my bug is?
>> 
>> Kind regards
>> 
>> Andy
>> 
>> $ which java
>> /usr/bin/java
>> $ java -version
>> java version "1.7.0_21"
>> Java(TM) SE Runtime Environment (build 1.7.0_21-b12)
>> Java HotSpot(TM) 64-Bit Server VM (build 23.21-b01, mixed mode)
>> $ which xjc
>> /usr/bin/xjc
>> $ xjc -version
>> xjc 2.2.4-2
>> $
>> 
>> 
>> [INFO] --- jaxb2-maven-plugin:1.6:xjc (xjc) @ athena-aide-myaccess ---
>> [INFO] Generating source...
>> [INFO] parsing a schema...
>> Jul 24, 2014 6:22:34 PM com.sun.xml.bind.v2.util.XmlFactory
>> createDocumentBuilderFactory
>> SEVERE: null
>> java.lang.AbstractMethodError:
>> javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
>>        at
>> com.sun.xml.bind.v2.util.XmlFactory.createDocumentBuilderFactory(XmlFactory.java:192)
>>        at
>> com.sun.tools.xjc.reader.internalizer.DOMForest.<init>(DOMForest.java:162)
>>        at
>> com.sun.tools.xjc.ModelLoader.buildDOMForest(ModelLoader.java:315)
>>        at
>> com.sun.tools.xjc.ModelLoader.loadXMLSchema(ModelLoader.java:377)
>>        at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:174)
>>        at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:119)
>>        at com.sun.tools.xjc.Driver.run(Driver.java:333)
>>        at
>> org.codehaus.mojo.jaxb2.AbstractXjcMojo.execute(AbstractXjcMojo.java:316)
>>        at
>> org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
>>        at
>> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
>>        at
>> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
>>        at
>> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
>>        at
>> org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
>>        at
>> org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
>>        at
>> org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
>>        at
>> org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
>>        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
>>        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
>>        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
>>        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
>>        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
>>        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>>        at
>> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>>        at
>> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>>        at java.lang.reflect.Method.invoke(Method.java:601)
>>        at
>> org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
>>        at
>> org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
>>        at
>> org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
>>        at
>> org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
>> 
>> [INFO]
>> ------------------------------------------------------------------------
>> [INFO] BUILD FAILURE
>> [INFO]
>> ------------------------------------------------------------------------
>> [INFO] Total time: 1.843s
>> [INFO] Finished at: Thu Jul 24 18:22:34 PDT 2014
>> [INFO] Final Memory: 9M/24M
>> [INFO]
>> ------------------------------------------------------------------------
>> [ERROR] Failed to execute goal
>> org.codehaus.mojo:jaxb2-maven-plugin:1.6:xjc (xjc) on project
>> athena-aide-myaccess: You are running with invalid JAXP api or
>> implementation. JAXP api/implementation of version 1.3.1 (included in JDK6)
>> or higher is required. In case you are using ant, make sure ant 1.7.0 or
>> higher is used - older versions of ant contain JAXP api/impl version 1.2
>> (in xml-apis.jar). If you want to keep using older ant versions, you have
>> to configure it to use higher the JAXP api/impl versions.
>> javax.xml.parsers.DocumentBuilderFactory.setFeature(Ljava/lang/String;Z)V
>> -> [Help 1]
>> [ERROR]
>> 
>> 
>> In my parent pom.xml I have
>> 
>>                <plugin>
>>                    <groupId>org.apache.maven.plugins</groupId>
>>                    <artifactId>maven-compiler-plugin</artifactId>
>>                    <version>3.1</version>
>>                    <configuration>
>>                        <source>1.7</source>
>>                        <target>1.7</target>
>>                        <fork>true</fork>
>>                                            <meminitial>512m</meminitial>
>>                                            <maxmem>1024m</maxmem>
>>                                </configuration>
>>                </plugin>
>> 
>> I have the following in my child pom.xm
>> 
>>        <build>
>>                <plugins>
>>                        <plugin>
>>                                <!--
>> 
>> http://www.journaldev.com/1312/how-to-generate-java-classes-from-xsd-using-xjc-maven-plugin
>> 
>> http://mojo.codehaus.org/jaxb2-maven-plugin/
>>                                 -->
>>                                <groupId>org.codehaus.mojo</groupId>
>>                                <artifactId>jaxb2-maven-plugin</artifactId>
>>                                <version>1.6</version>
>>                                <executions>
>>                                        <execution>
>>                                                <id>xjc</id>
>>                                                <goals>
>>                                                        <goal>xjc</goal>
>>                                                </goals>
>>                                        </execution>
>>                                </executions>
>>                                <configuration>
>>                                    <arguments>-extension -npa -b
>> ${project.basedir}/src/main/xsd/global.xjb</arguments>
>>                                        <!--
>> <packageName>com.example.myschema</packageName> --> <!-- The name of your
>> generated source package -->
>>                                </configuration>
>>                        </plugin>
>>                </plugins>
>>        </build>
>> 
>> 
>> 


--Boundary_(ID_fPSlI6/bab05SxdPeYRl6Q)--

