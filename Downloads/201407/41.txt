From users-return-136787-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Jul 17 09:04:17 2014
Return-Path: <users-return-136787-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 908C511619
	for <apmail-maven-users-archive@www.apache.org>; Thu, 17 Jul 2014 09:04:17 +0000 (UTC)
Received: (qmail 84630 invoked by uid 500); 17 Jul 2014 09:04:15 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 84551 invoked by uid 500); 17 Jul 2014 09:04:15 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 84540 invoked by uid 99); 17 Jul 2014 09:04:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2014 09:04:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gcjtmu-turbine-maven-user-846@m.gmane.org designates 80.91.229.3 as permitted sender)
Received: from [80.91.229.3] (HELO plane.gmane.org) (80.91.229.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2014 09:04:12 +0000
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <gcjtmu-turbine-maven-user-846@m.gmane.org>)
	id 1X7hbQ-0001vh-0t
	for users@maven.apache.org; Thu, 17 Jul 2014 11:03:48 +0200
Received: from mail.scalaris.com ([62.154.225.82])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <users@maven.apache.org>; Thu, 17 Jul 2014 11:03:48 +0200
Received: from joerg.schaible by mail.scalaris.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <users@maven.apache.org>; Thu, 17 Jul 2014 11:03:48 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: users@maven.apache.org
From: =?UTF-8?B?SsO2cmc=?= Schaible <joerg.schaible@swisspost.com>
Subject: Re: move data from pom to class or class to pom
Date: Thu, 17 Jul 2014 11:03:29 +0200
Organization: Swiss Post Solutions
Lines: 35
Message-ID: <lq83h1$9or$1@ger.gmane.org>
References: <OF1F05DF42.E00CE028-ON85257D17.0063A305-85257D17.00648730@belden.com> <CADN69ymG8f7j19xuCtUqdXx8yJoLYgaNGuHiyrQcUApdhcUJxA@mail.gmail.com> <OFB1EFD901.4439AF23-ON85257D17.00661468-85257D17.0066DE86@belden.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8Bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: mail.scalaris.com
User-Agent: KNode/4.12.5
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Alejandro,

Alejandro.Endo@miranda.com wrote:

> Hi Curtis,
> 
> I *think* i see you point, but wouldn't that happen ONLY if the constant
> is public and referenced in a separate jar?? where it would be inlined in
> the referring class (right?). In my case the constant is package protected
> (it would be private if it wasn't because i need it in unit tests)
> 
> The problem with defining it in the manifest is that I use this constant
> in the property of an annotation of the class
> 
> @StaticServiceProperty(mandatory = true, type = "java.lang.String", name =
> "schemaVersion", value = SchemaProviderServiceImpl.SCHEMA_VERSION,
> immutable = true)
> public class SchemaProviderServiceImpl
> 
> so I can't grab it from the manifest at runtime. I guess the way I phrased
> it in the original email implied the opposite, sorry about that


typical solution is to generate the source.

Move the Java code that should contain the version into an own directory 
tree (e.g. src/main/java-templates). Replace the version string with an 
expression (e.g. "${project.version}") and use the copy-resources goal of 
the resources plugin to filter the file into a target driectory tree (e.g. 
target/generated-sources). Bind the goal to the generate-sources phase. Then 
use additionally the build-helper plugin to add target/generated-sources as 
additional source directory and you're done.

Cheers,
JÃ¶rg


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


