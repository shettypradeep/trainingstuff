From users-return-135433-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Feb 12 21:14:36 2014
Return-Path: <users-return-135433-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 597D610474
	for <apmail-maven-users-archive@www.apache.org>; Wed, 12 Feb 2014 21:14:36 +0000 (UTC)
Received: (qmail 82407 invoked by uid 500); 12 Feb 2014 21:14:18 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 82302 invoked by uid 500); 12 Feb 2014 21:14:18 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 82294 invoked by uid 99); 12 Feb 2014 21:14:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Feb 2014 21:14:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_IMAGE_RATIO_06,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of benoit@berthonneau.com designates 46.105.58.226 as permitted sender)
Received: from [46.105.58.226] (HELO mo2.mail-out.ovh.net) (46.105.58.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Feb 2014 21:14:08 +0000
Received: from mail422.ha.ovh.net (gw6.ovh.net [213.251.189.206])
	by mo2.mail-out.ovh.net (Postfix) with SMTP id B6632FFA30E
	for <users@maven.apache.org>; Wed, 12 Feb 2014 22:13:47 +0100 (CET)
Received: from b0.ovh.net (HELO queueout) (213.186.33.50)
	by b0.ovh.net with SMTP; 12 Feb 2014 23:14:06 +0200
Received: from 128-79-78-59.hfc.dyn.abo.bbox.fr (HELO PCSalon) (benoit@berthonneau.com@128.79.78.59)
  by ns0.ovh.net with SMTP; 12 Feb 2014 23:14:03 +0200
From: =?iso-8859-1?Q?Beno=EEt_Berthonneau?= <benoit@berthonneau.com>
To: "'Maven Users List'" <users@maven.apache.org>
References: <9e5201cf2831$52f17c60$f8d47520$@berthonneau.com> <CABLGb9yyWxO8om2YE2Y-3v0RwLgB4RmY6cG9UK330DY4UVGHpQ@mail.gmail.com> <008101cf2834$fcf8d4d0$f6ea7e70$@berthonneau.com>
In-Reply-To: <008101cf2834$fcf8d4d0$f6ea7e70$@berthonneau.com>
Subject: RE: Code coverage with debug logs: 100% branch coverage not possible?...
Date: Wed, 12 Feb 2014 22:13:42 +0100
Message-ID: <00a701cf2837$4efeafa0$ecfc0ee0$@berthonneau.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_00A8_01CF283F.B0C588A0"
X-Mailer: Microsoft Outlook 15.0
Thread-Index: AQIRh6Hnn/whgjj5FLNk5uRzCGHz6AHmtaMtAe209OCaDrs3IA==
Content-Language: fr
X-Antivirus: avast! (VPS 140212-2, 12/02/2014), Outbound message
X-Antivirus-Status: Clean
X-Ovh-Tracer-Id: 16436731265518643472
X-Ovh-Remote: 128.79.78.59 (128-79-78-59.hfc.dyn.abo.bbox.fr)
X-Ovh-Local: 213.186.33.20 (ns0.ovh.net)
X-OVH-SPAMSTATE: OK
X-OVH-SPAMSCORE: -100
X-OVH-SPAMCAUSE: gggruggvucftvghtrhhoucdtuddrfeejtddrjedvucetufdoteggodetrfcurfhrohhfihhlvgemucfqggfjnecuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd
X-Spam-Check: DONE|U 0.5/N
X-VR-SPAMSTATE: OK
X-VR-SPAMSCORE: -100
X-VR-SPAMCAUSE: gggruggvucftvghtrhhoucdtuddrfeejtddrkeejucetufdoteggodetrfcurfhrohhfihhlvgemucfqggfjnecuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00A8_01CF283F.B0C588A0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_00A9_01CF283F.B0C588A0"


------=_NextPart_001_00A9_01CF283F.B0C588A0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

With the pictures attached=85

=20

=20

De : Beno=EEt Berthonneau [mailto:benoit@berthonneau.com]=20
Envoy=E9 : mercredi 12 f=E9vrier 2014 21:57
=C0 : 'Maven Users List'
Objet : RE: Code coverage with debug logs: 100% branch coverage not
possible?...

=20

Hi Paul,

=20

Don't think that I could play with exclusions. Here is an example :

=20

A Unit Test :



=20

The tested class with ALL traces activated:



=20

And the same tested class with INFO traces activated:



=20

=20

-----Message d'origine-----
De : paulus.benedictus@gmail.com <mailto:paulus.benedictus@gmail.com>
[mailto:paulus.benedictus@gmail.com] De la part de Paul Benedict
Envoy=E9 : mercredi 12 f=E9vrier 2014 21:36
=C0 : Maven Users List
Objet : Re: Code coverage with debug logs: 100% branch coverage not
possible?...

=20

IIRC, there should be an option in Emma/Cobertura that allows you to =
exclude
coverage on certain classes. So if you can exclude your log4j classes =
(you
don't really want to test your logging, do you?), then you should be =
able to
raise your percentage.

=20

=20

On Wed, Feb 12, 2014 at 2:30 PM, Beno=EEt Berthonneau

< <mailto:benoit@berthonneau.com> benoit@berthonneau.com>wrote:

=20

> Hi all,

>=20

>=20

>=20

> I need your opinion/way to tackle the following problem:

>=20

> In many projects we use a Logger (doesn't matter which=20

> implementation). It is often recommend to test if the debug level is=20

> activated before logging a debug trace like the following:

>=20

> if (logger.isDebugEnabled()) {

>=20

>     logger.debug("blah " + i + " in the loop that contains " + max);

>=20

> }

>=20

>=20

>=20

> Now when you run unit tests on this kind of code you need to make a
choice:

> run tests with INFO level or run tests with ALL traces activated. I=20

> choose the second option in order to:

>=20

> *         Check that debug traces doesn't throw unwanted exception =
(like

> NPE)

>=20

> *         Have a better code coverage in term of covered lines

>=20

>=20

>=20

> But in term of branches coverage we could never have a 100% :(

>=20

>=20

>=20

> To me the only way to cover this is to run the tests suite 2 times:=20

> one with INFO traces configured, and another one with ALL traces=20

> activated.

>=20

> Did you face this issue and how did you solve it ?

>=20

>=20

>=20

> Thanks,

>=20

> Beno=EEt.

>=20

>=20

=20

=20

--

Cheers,

Paul


------=_NextPart_001_00A9_01CF283F.B0C588A0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1"><meta name=3DGenerator content=3D"Microsoft Word =
15 (filtered medium)"><!--[if !mso]><style>v\:* =
{behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style><![endif]--><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:#954F72;
	text-decoration:underline;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-priority:99;
	mso-style-link:"Texte brut Car";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
span.TextebrutCar
	{mso-style-name:"Texte brut Car";
	mso-style-priority:99;
	mso-style-link:"Texte brut";
	font-family:"Calibri","sans-serif";}
span.EmailStyle19
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DFR =
link=3D"#0563C1" vlink=3D"#954F72"><div class=3DWordSection1><p =
class=3DMsoNormal><span style=3D'color:#1F497D'>With the pictures =
attached&#8230;<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><div><div =
style=3D'border:none;border-top:solid #E1E1E1 1.0pt;padding:3.0pt 0cm =
0cm 0cm'><p class=3DMsoNormal><b><span =
style=3D'mso-fareast-language:FR'>De&nbsp;:</span></b><span =
style=3D'mso-fareast-language:FR'> Beno=EEt Berthonneau =
[mailto:benoit@berthonneau.com] <br><b>Envoy=E9&nbsp;:</b> mercredi 12 =
f=E9vrier 2014 21:57<br><b>=C0&nbsp;:</b> 'Maven Users =
List'<br><b>Objet&nbsp;:</b> RE: Code coverage with debug logs: 100% =
branch coverage not possible?...<o:p></o:p></span></p></div></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoPlainText>Hi =
Paul,<o:p></o:p></p><p class=3DMsoPlainText><o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText><span lang=3DEN-US>Don't think that I could play =
with exclusions. Here is an example :<o:p></o:p></span></p><p =
class=3DMsoPlainText><span lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoPlainText><b><u><span lang=3DEN-US>A Unit Test =
:<o:p></o:p></span></u></b></p><p class=3DMsoPlainText><span =
style=3D'mso-fareast-language:FR'><img width=3D467 height=3D242 =
id=3D"Image_x0020_2" =
src=3D"cid:image001.png@01CF283D.5E4D6400"></span><span =
lang=3DEN-US><o:p></o:p></span></p><p class=3DMsoPlainText><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoPlainText><b><u><span lang=3DEN-US>The tested class with ALL =
traces activated:<o:p></o:p></span></u></b></p><p =
class=3DMsoPlainText><span style=3D'mso-fareast-language:FR'><img =
width=3D544 height=3D272 id=3D"Image_x0020_1" =
src=3D"cid:image002.png@01CF283D.5E4D6400"></span><span =
lang=3DEN-US><o:p></o:p></span></p><p class=3DMsoPlainText><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoPlainText><b><u><span lang=3DEN-US>And the same tested class =
with INFO traces activated:<o:p></o:p></span></u></b></p><p =
class=3DMsoPlainText><span style=3D'mso-fareast-language:FR'><img =
width=3D536 height=3D272 id=3D"Image_x0020_3" =
src=3D"cid:image003.png@01CF283D.5E4D6400"></span><span =
lang=3DEN-US><o:p></o:p></span></p><p class=3DMsoPlainText><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoPlainText><span =
lang=3DEN-US><o:p>&nbsp;</o:p></span></p><p class=3DMsoPlainText><span =
style=3D'mso-fareast-language:FR'>-----Message =
d'origine-----<br>De&nbsp;: <a =
href=3D"mailto:paulus.benedictus@gmail.com">paulus.benedictus@gmail.com</=
a> [<a =
href=3D"mailto:paulus.benedictus@gmail.com">mailto:paulus.benedictus@gmai=
l.com</a>] De la part de Paul Benedict<br>Envoy=E9&nbsp;: mercredi 12 =
f=E9vrier 2014 21:36<br>=C0&nbsp;: Maven Users List<br>Objet&nbsp;: Re: =
Code coverage with debug logs: 100% branch coverage not =
possible?...</span><o:p></o:p></p><p =
class=3DMsoPlainText><o:p>&nbsp;</o:p></p><p class=3DMsoPlainText>IIRC, =
there should be an option in Emma/Cobertura that allows you to exclude =
coverage on certain classes. So if you can exclude your log4j classes =
(you don't really want to test your logging, do you?), then you should =
be able to raise your percentage.<o:p></o:p></p><p =
class=3DMsoPlainText><o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText><o:p>&nbsp;</o:p></p><p class=3DMsoPlainText>On =
Wed, Feb 12, 2014 at 2:30 PM, Beno=EEt Berthonneau<o:p></o:p></p><p =
class=3DMsoPlainText>&lt;<a href=3D"mailto:benoit@berthonneau.com"><span =
style=3D'color:windowtext;text-decoration:none'>benoit@berthonneau.com</s=
pan></a>&gt;wrote:<o:p></o:p></p><p =
class=3DMsoPlainText><o:p>&nbsp;</o:p></p><p class=3DMsoPlainText>&gt; =
Hi all,<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; I need your opinion/way to tackle the =
following problem:<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; In many projects we use a Logger (doesn't =
matter which <o:p></o:p></p><p class=3DMsoPlainText>&gt; =
implementation). It is often recommend to test if the debug level is =
<o:p></o:p></p><p class=3DMsoPlainText>&gt; activated before logging a =
debug trace like the following:<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; if (logger.isDebugEnabled()) =
{<o:p></o:p></p><p class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;&nbsp;&nbsp;&nbsp;&nbsp; =
logger.debug(&quot;blah &quot; + i + &quot; in the loop that contains =
&quot; + max);<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; }<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; Now when you run unit tests on this kind of =
code you need to make a choice:<o:p></o:p></p><p =
class=3DMsoPlainText>&gt; run tests with INFO level or run tests with =
ALL traces activated. I <o:p></o:p></p><p class=3DMsoPlainText>&gt; =
choose the second option in order to:<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; =
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Check that debug =
traces doesn't throw unwanted exception (like<o:p></o:p></p><p =
class=3DMsoPlainText>&gt; NPE)<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; =
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Have a better code =
coverage in term of covered lines<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; But in term of branches coverage we could =
never have a 100% :(<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; To me the only way to cover this is to run the =
tests suite 2 times: <o:p></o:p></p><p class=3DMsoPlainText>&gt; one =
with INFO traces configured, and another one with ALL traces =
<o:p></o:p></p><p class=3DMsoPlainText>&gt; activated.<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; Did you face this issue and how did you solve =
it ?<o:p></o:p></p><p class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; Thanks,<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt; Beno=EEt.<o:p></o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>&gt;<o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText><o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText><o:p>&nbsp;</o:p></p><p =
class=3DMsoPlainText>--<o:p></o:p></p><p =
class=3DMsoPlainText>Cheers,<o:p></o:p></p><p =
class=3DMsoPlainText>Paul<o:p></o:p></p></div></body></html>
------=_NextPart_001_00A9_01CF283F.B0C588A0--


------=_NextPart_000_00A8_01CF283F.B0C588A0
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org
------=_NextPart_000_00A8_01CF283F.B0C588A0--


