From users-return-135453-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Feb 13 13:06:10 2014
Return-Path: <users-return-135453-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4FBBB102D7
	for <apmail-maven-users-archive@www.apache.org>; Thu, 13 Feb 2014 13:06:10 +0000 (UTC)
Received: (qmail 6469 invoked by uid 500); 13 Feb 2014 13:06:05 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 6100 invoked by uid 500); 13 Feb 2014 13:06:05 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 6088 invoked by uid 99); 13 Feb 2014 13:06:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Feb 2014 13:06:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [88.198.41.52] (HELO tux235.hoststar.ch) (88.198.41.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Feb 2014 13:05:58 +0000
Received: from mail-qc0-f176.google.com (mail-qc0-f176.google.com [209.85.216.176])
	(authenticated bits=0)
	by tux235.hoststar.ch (8.13.8/8.12.11) with ESMTP id s1DD5X9O020799
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=FAIL)
	for <users@maven.apache.org>; Thu, 13 Feb 2014 14:05:34 +0100
Received: by mail-qc0-f176.google.com with SMTP id e16so17735105qcx.35
        for <users@maven.apache.org>; Thu, 13 Feb 2014 05:05:32 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=KWmzqV1sZ3YaXFmvvRCe37R33yLEMS33gK/+g3Lohmk=;
        b=BrRo7QknATQh3y7CAvgisngUj96IdK14pAHq4dHhbozmg1VBDvzSxbJNqjS9yE9y2C
         I1HyqfA8WQh0yH2wMpqn8EXeoW7SBUPNLyHFgGqu9O/S/YKX4qcH6x5BcjWy9oim1iCp
         2LmPBTN9UL+dxhUfDP73V9ye7ZhIiOnELFUd6Vvl4rrl/7N7fXYhVC6Jh2CLtJL7Z5Aa
         wXLdUU5yrUSRFEF0uZV1iHWB5+P7QPW3VMBFyTbWjPzFfHs3QyUG3UN6sqtKslC7Ojgl
         9WN/ntdtAcrlDOqehU69LHajQwGbJd3qNfHX1yuJ+bQHbZbZbzZGozWqoX+K4xcELC+X
         Byxw==
X-Received: by 10.140.34.231 with SMTP id l94mr1976740qgl.85.1392296732733;
 Thu, 13 Feb 2014 05:05:32 -0800 (PST)
MIME-Version: 1.0
Received: by 10.224.182.203 with HTTP; Thu, 13 Feb 2014 05:05:02 -0800 (PST)
In-Reply-To: <52F50425.50107@artifact-software.com>
References: <CAJZYdzjdZKS69VX64izc104aeb2m0CZQqcR2BWCbaHp3mginjg@mail.gmail.com>
 <52F4EED5.2040305@artifact-software.com> <CAJZYdzjLSdYqes9wtokB0U6yvO8DkV1Qt8dqf2s2i_gwuR_uvA@mail.gmail.com>
 <52F50425.50107@artifact-software.com>
From: =?ISO-8859-1?Q?Reto_Habl=FCtzel?= <rethab@rethab.ch>
Date: Thu, 13 Feb 2014 14:05:02 +0100
Message-ID: <CAJZYdziKda4m1LLqefAzztmM6QM2ooA7mSsLkrUt4YMbbwy=Hg@mail.gmail.com>
Subject: Re: maven-ear-plugin silently overrides libraries
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=001a11c0e8882d3a7c04f2495878
X-Scanned-By: mimedefang-scanned
X-Virus-Checked: Checked by ClamAV on apache.org

--001a11c0e8882d3a7c04f2495878
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

So what's the status on this? Shall I create a ticket?


On Fri, Feb 7, 2014 at 5:04 PM, Ron Wheeler
<rwheeler@artifact-software.com>wrote:

> Exclusions will not help in this case.
> Looking through the dependency hierarchy will at least get you to see the
> problem earlier which I think was the nature of your question.
>
> It appears from my brief reading and fun with making servlets run in
> production that classloaders merge classes by name.
> Maven does not.
>
> I am a bit surprised that groupId does not count.
>
> If one uses a lot of third -party libraries, it would seem inevitable tha=
t
> you could need com.artifact-software:utilities:1.0 at the same time as
> ch.rethab:utilities:1.0 at the same time.
> The classloader is not going to cause any problem but if Maven throws out
> one of these as a duplicate, you will be missing classes at run-time.
>
> It is difficult to force everyone to create unique artifactIds unless you
> get rid of the GroupId altogther and make GAV -> <AV> and put the group
> name into the artifactID.
>
> This seems to be a design flaw if it is true.
>
> Ron
>
>
> On 07/02/2014 9:43 AM, Reto Habl=FCtzel wrote:
>
>> Sure, but exclusions don't do the trick if you need both of them, do
>> they? I am talking about completely independent libraries that happen to
>> have the same artifactId.
>>
>> Those were actually both libraries of mine and I could obviously fix thi=
s
>> issue rather simply, but I was just thinking that it would be helpful to
>> have at least a warning or something from maven - regardless of the IDE.
>>
>> - Reto
>>
>>
>> On Fri, Feb 7, 2014 at 3:33 PM, Ron Wheeler <rwheeler@artifact-software.
>> com <mailto:rwheeler@artifact-software.com>> wrote:
>>
>>     If your IDE supports Maven (Eclipse/STS for example), you will see
>>     the conflict in the dependency hierarchy view and you can fix it
>>     with the right exclusions.
>>
>>     It is almost always worth a quick look through the dependency
>>     hierarchy view if you use a lot of third party libraries.
>>     Not everyone updates their dependencies when they build a
>>     shareable library.
>>     You can sometimes get some pretty old versions of things dragged
>>     in with the latest version of otherwise well-written libraries.
>>     Exclusions need to be added to get what you want in your artifacts.
>>
>>     Ron
>>
>>
>>     On 07/02/2014 9:21 AM, Reto Habl=FCtzel wrote:
>>
>>         Hi there,
>>
>>         I built an ear using the maven-ear-plugin (version 2.6).
>>
>>         The ear is configured such that it includes two libraries into
>>         the lib
>>         folder, both with the same artifactId as well as the same
>>         version, but a
>>         different groupId. Now if I simply call 'mvn package' only the
>>         first one is
>>         included, but no warning whatsoever appears. Only once I turn
>>         on debugging
>>         (mvn --debug package), I see one subtle message:
>>         [DEBUG] Skipping artifact [jar:com.foo:bar:1.0] as it is
>>         already up to date
>>         at [lib/bar-1.0.jar]
>>
>>         Wouldn't it make sense to either include the groupId in the
>>         filename or at
>>         least make a check (that includes the groupId) beforehand if
>>         there are any
>>         conflicts?
>>
>>         Cheers,
>>         Reto
>>
>>
>>
>>     --     Ron Wheeler
>>     President
>>     Artifact Software Inc
>>     email: rwheeler@artifact-software.com
>>     <mailto:rwheeler@artifact-software.com>
>>
>>     skype: ronaldmwheeler
>>     phone: 866-970-2435, ext 102
>>
>>
>>     --------------------------------------------------------------------=
-
>>     To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
>>     <mailto:users-unsubscribe@maven.apache.org>
>>
>>     For additional commands, e-mail: users-help@maven.apache.org
>>     <mailto:users-help@maven.apache.org>
>>
>>
>>
>
> --
> Ron Wheeler
> President
> Artifact Software Inc
> email: rwheeler@artifact-software.com
> skype: ronaldmwheeler
> phone: 866-970-2435, ext 102
>
>

--001a11c0e8882d3a7c04f2495878--

