From users-return-135596-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Mon Feb 24 22:06:23 2014
Return-Path: <users-return-135596-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5668710881
	for <apmail-maven-users-archive@www.apache.org>; Mon, 24 Feb 2014 22:06:23 +0000 (UTC)
Received: (qmail 84781 invoked by uid 500); 24 Feb 2014 22:06:18 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 84638 invoked by uid 500); 24 Feb 2014 22:06:18 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 84630 invoked by uid 99); 24 Feb 2014 22:06:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Feb 2014 22:06:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of khmarbaise@gmx.de designates 212.227.17.20 as permitted sender)
Received: from [212.227.17.20] (HELO mout.gmx.net) (212.227.17.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Feb 2014 22:06:12 +0000
Received: from Karl-Heinzs-MacBook-Pro.local ([109.125.117.194]) by
 mail.gmx.com (mrgmx102) with ESMTPSA (Nemesis) id 0MZ7bs-1WYV8s3k6u-00L1NB
 for <users@maven.apache.org>; Mon, 24 Feb 2014 23:05:51 +0100
Message-ID: <530BC23E.6040809@gmx.de>
Date: Mon, 24 Feb 2014 23:05:50 +0100
From: Karl Heinz Marbaise <khmarbaise@gmx.de>
Reply-To: info@soebes.de
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: Maven Users List <users@maven.apache.org>
Subject: Re: about https://jira.codehaus.org/browse/MNG-5576 (Allow continuous
 delivery friendly versions)
References: <CAPCjjnGHMv1eaTL9vzJqOB2P+_sWbK+XO0nH8Q-BiTuCBCHYfA@mail.gmail.com> <530BAA4C.3070303@gmx.de> <CAK8jvqzcGFm4e=EahNOwCgyBw2xku=iDQz9p_A78JZESAPDqQQ@mail.gmail.com>
In-Reply-To: <CAK8jvqzcGFm4e=EahNOwCgyBw2xku=iDQz9p_A78JZESAPDqQQ@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Provags-ID:  V03:K0:ph0XNJrziy1VMSHKHkeDgMfJuFcdAIgKyFKNSeq93TwZF8J9Cqz
 vmaHFrQc8ag21XKsj3wq0lxkMlqjBEp2DAII09qBlEvJXqocObycip6XTyscyCltFsqwtvU
 jsde89HdFU7WPsxdp+ZPGjNAdDwNl38IBqte+f0RAEj7Z+TrpZ7BtdTBqPzUxpAjd+/m0e6
 Flo4PsXfP2uBgO+CnXoSw==
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mirko,

 >
> I just tried this with a small multimodule pet project, see the mvn321
> branch (https://github.com/1and1/testlink-junit/compare/master...mvn321).

Just forked it give it a try..

>
> Now giving revision as a property (mvn321 -Drevision=NULL clean
> verify) does *not* work, enforcer complains about being not able to
> resolve the reactor artifacts. You have to put revision into the
> environment, so
> env revision=NULL mvn321 clean verify does the trick.

that looks strange...cause if i do that i get the following:

[INFO]
[INFO] --- maven-enforcer-plugin:1.3.1:enforce (default-enforce) @ 
tljunit-surefire ---
Downloading: 
http://localhost:8081/nexus/content/groups/public/net/oneandone/testlinkjunit/tljunit-parent/3.0.3-${revision}/tljunit-parent-3.0.3-${revision}.pom
[WARNING] Rule 3: 
org.apache.maven.plugins.enforcer.RequireNoRepositories failed with message:
Could not transfer artifact 
net.oneandone.testlinkjunit:tljunit-parent:pom:3.0.3-${revision} from/to 
nexus (http://localhost:8081/nexus/content/groups/public): Illegal 
character in path at index 100: 
http://localhost:8081/nexus/content/groups/public/net/oneandone/testlinkjunit/tljunit-parent/3.0.3-${revision}/tljunit-parent-3.0.3-${revision}.pom
   net.oneandone.testlinkjunit:tljunit-parent:pom:3.0.3-${revision}

from the specified remote repositories:
   nexus (http://localhost:8081/nexus/content/groups/public, 
releases=true, snapshots=true)


That looks like a issue with maven-enforcer .......i will start writing 
an integration tests for that....

Furthermore i have taken a look into the project and found something 
strange:

in the dependencyManagement of the parent:

  <dependency>
     <groupId>net.oneandone.testlinkjunit</groupId>
     <artifactId>tljunit-surefire</artifactId>
     <version>${project.version}</version>
     <classifier>tests</classifier>
  </dependency>

Should this reference the test-jar which is produced in the sub-module 
by using maven-jar-plugin:test-jar goal ?

Yes...than the dependency entry is wrong. It must be done like the 
following:

  <dependency>
     <groupId>net.oneandone.testlinkjunit</groupId>
     <artifactId>tljunit-surefire</artifactId>
     <version>${project.version}</version>
     <type>test-jar</type>
     <scope>test</scope>
  </dependency>

And this dependeny is used in the  module:

<artifactId>tljunit-eclipse</artifactId>

which produces your error about the not resolvable artifact in the 
reactor....


If you are using the maven-release-plugin you need to give the 
parameters in a different way cause maven-release-plugin calls maven a 
second time which will result in the following:

mvn -Drevision=NULL -Darguments="-Drevision=NULL" release:prepare

This looks a bit strange but it works except that i get a message about 
not existing SNAPSHOT version...but no failure.....
If you enhance your configuration of the maven-release-plugin with the 
following line:

<arguments>-Drevision=${revision}</arguments>

You can reduce the above call to:

mvn -Drevision=NULL release:prepare


Kind regards
Karl-Heinz Marbaise
-- 
SoftwareEntwicklung Beratung Schulung    Tel.: +49 (0) 2405 / 415 893
Dipl.Ing.(FH) Karl-Heinz Marbaise        ICQ#: 135949029
Hauptstrasse 177                         USt.IdNr: DE191347579
52146 WÃ¼rselen                           http://www.soebes.de

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


