From users-return-135641-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Fri Feb 28 01:18:21 2014
Return-Path: <users-return-135641-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 352731008E
	for <apmail-maven-users-archive@www.apache.org>; Fri, 28 Feb 2014 01:18:21 +0000 (UTC)
Received: (qmail 60920 invoked by uid 500); 28 Feb 2014 01:18:17 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 60787 invoked by uid 500); 28 Feb 2014 01:18:17 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 60777 invoked by uid 99); 28 Feb 2014 01:18:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Feb 2014 01:18:16 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [209.85.212.178] (HELO mail-wi0-f178.google.com) (209.85.212.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Feb 2014 01:18:09 +0000
Received: by mail-wi0-f178.google.com with SMTP id cc10so27304wib.11
        for <users@maven.apache.org>; Thu, 27 Feb 2014 17:17:49 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=QO4cl2k5vc3PriGUF8r2HM03RU3gegYgeEJq+1V8RxY=;
        b=Jhddy7yA59O/S2kfobDaM3SLxTphrTl22LdwcEZJhEAs/CP/S6sQ5Jnc9O3jGphy/k
         o1TVpyFWDD6EXSFNyLEKxeln3Vsbn5YWZ3y7UUt0jNlpsJSfnDJ19gGwcE3ddt8Xu1B9
         Te6frHc4zIByK5v0WhHcd7tZgGULuURGgeoFEwkshBVWpJRREK+pJWtzh78QxlUdPhNR
         y+d7rkwnC8FzruT/ldgoLwPT65gTo+Np/w++BwuMc8DU0s2cAR4t0VObLyZZ089lSIkh
         o8FzNLv89RR1POVg03nwlKa1qE4qquw5vVBK+ErgKobR051XOfrnwEhZO63sVRNt/1vY
         5Qkw==
X-Gm-Message-State: ALoCoQkLFGoqFK95zxnhimOxA54EVVbXzraSyw6QI2eZjlNjwuQmyeU9jSgFBlzMihQG/JaLtnTw
MIME-Version: 1.0
X-Received: by 10.194.170.167 with SMTP id an7mr20480wjc.39.1393550268794;
 Thu, 27 Feb 2014 17:17:48 -0800 (PST)
Received: by 10.216.4.69 with HTTP; Thu, 27 Feb 2014 17:17:48 -0800 (PST)
X-Originating-IP: [192.48.8.20]
Date: Fri, 28 Feb 2014 11:17:48 +1000
Message-ID: <CAEBcyzqFMx09wypuh4bXUd68FZ+TUegEnpMUs3ffje3DWS=eCg@mail.gmail.com>
Subject: Guice provision error with AbstractMavenLifecycleParticipant
From: William Ferguson <william.ferguson@xandar.com.au>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=089e013c621cbf9c4504f36d3499
X-Virus-Checked: Checked by ClamAV on apache.org

--089e013c621cbf9c4504f36d3499
Content-Type: text/plain; charset=ISO-8859-1

As part of the development of the android-maven-plugin we have need to add
in an AbstractMavenLifecycleParticipant so that we can modify the compile
classpath to add artefacts that are contained within a project's
dependencies. Igor provided a lot of the coaching on this.

The build works fine. Does what is intended.

But now, when you open a project in intelliJ13 that uses the
android-maven-plugin, IntelliJ declares a problem with the POM that
references our MavenLifecycleParticipant.

What I'd like help with is:
1) Is this a problem with the plugin itself. Ie have we defined something
incorrectly.
2) Is it just a problem with how IntelliJ is parsing a POM that declares
the plugin.

If it is (1), what do we need to do to fix it?

However, I suspect it is (2) because similar error messages seem to occur
when plugins designed for Maven 3.1 (and the switch to Eclipse Aether from
Sonatype Aether) are used in a Maven-3.0 environment. I'm thinking that
maybe IntelliJ is using a Maven-3.0 core. But I'm really not sure and would
love some clarity from those who understand what is going on a bit better.
And if it is (2) is there anything we or IntelliJ can do to fix it?

The plugin itself can be found at:
https://github.com/jayway/maven-android-plugin

A project showing the failure can be found at:
https://github.com/jayway/maven-android-plugin-samples/tree/master/morseflash/morseflash-app

And the error message is (visible via flyover in the POM editor window or
in idea.log):

java.lang.RuntimeException: com.google.inject.ProvisionException:
Guice provision errors:

1) No implementation for org.eclipse.aether.impl.VersionResolver was bound.
  while locating org.eclipse.aether.internal.impl.DefaultRepositorySystem
  at ClassRealm[extension>com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.9.0-rc.1,
parent: sun.misc.Launcher$AppClassLoader@39172e08]
  at ClassRealm[extension>com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.9.0-rc.1,
parent: sun.misc.Launcher$AppClassLoader@39172e08]
  while locating org.eclipse.aether.RepositorySystem
  while locating
com.jayway.maven.plugins.android.phase_prebuild.AarMavenLifecycleParticipant
  at ClassRealm[extension>com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.9.0-rc.1,
parent: sun.misc.Launcher$AppClassLoader@39172e08]
  at ClassRealm[extension>com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.9.0-rc.1,
parent: sun.misc.Launcher$AppClassLoader@39172e08]
  while locating org.apache.maven.AbstractMavenLifecycleParticipant
annotated with @com.google.inject.name.Named(value=AarMavenLifecycleListener)


We are tracking this at:
https://code.google.com/p/maven-android-plugin/issues/detail?id=449


Any help appreciated.


William

--089e013c621cbf9c4504f36d3499--

