From users-return-135603-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Feb 25 20:40:53 2014
Return-Path: <users-return-135603-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0F17B10092
	for <apmail-maven-users-archive@www.apache.org>; Tue, 25 Feb 2014 20:40:53 +0000 (UTC)
Received: (qmail 95054 invoked by uid 500); 25 Feb 2014 20:40:45 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 94975 invoked by uid 500); 25 Feb 2014 20:40:44 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 94961 invoked by uid 99); 25 Feb 2014 20:40:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Feb 2014 20:40:43 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mfriedenhagen@gmail.com designates 209.85.219.53 as permitted sender)
Received: from [209.85.219.53] (HELO mail-oa0-f53.google.com) (209.85.219.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Feb 2014 20:40:38 +0000
Received: by mail-oa0-f53.google.com with SMTP id o6so1034394oag.26
        for <users@maven.apache.org>; Tue, 25 Feb 2014 12:40:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=eh+7uYRvRqJDAKnHnw1U6lQqs7fvB8IfAtYVATHwXlE=;
        b=TpADxO/WBzHjzyw2kNMFo6oF00AY+UL8waUphecatnvzr+XyvhRq+MLz6fOnJo1P7G
         wlZS785r9C86JFSJ3kC8/rcYb491sCYEWzqMqXbnXKlT+ACkDNxmdzvhwDcvZ/79TL2e
         F2zSyEdYNbU0ZPhn7/0aI+8YuG51Moic0fEs7Xx5X6chdZyJ/buQOTErHe0I2qZ8CTn5
         Jh0n6zGv5CCSDqE7wZ5Uys+5y5ez+23ocnJ/nhFW9z6u7nOIxEKMzK9Sdu+g/KxC1Va4
         B8vqMC/WImbhnnAHorAyWpBf4gLIi4ONkNWbFNUk6wMrEka3QMc3DfxAIGOaGr3lU+Ok
         oQsw==
X-Received: by 10.60.15.131 with SMTP id x3mr3158426oec.15.1393360817153; Tue,
 25 Feb 2014 12:40:17 -0800 (PST)
MIME-Version: 1.0
Received: by 10.182.24.227 with HTTP; Tue, 25 Feb 2014 12:39:36 -0800 (PST)
In-Reply-To: <530BC23E.6040809@gmx.de>
References: <CAPCjjnGHMv1eaTL9vzJqOB2P+_sWbK+XO0nH8Q-BiTuCBCHYfA@mail.gmail.com>
 <530BAA4C.3070303@gmx.de> <CAK8jvqzcGFm4e=EahNOwCgyBw2xku=iDQz9p_A78JZESAPDqQQ@mail.gmail.com>
 <530BC23E.6040809@gmx.de>
From: Mirko Friedenhagen <mfriedenhagen@gmail.com>
Date: Tue, 25 Feb 2014 21:39:36 +0100
Message-ID: <CAK8jvqxvzFuCUcTq03i_0W3n1XOPuBmzF6TQNAdE0HteGUjwzw@mail.gmail.com>
Subject: Re: about https://jira.codehaus.org/browse/MNG-5576 (Allow continuous
 delivery friendly versions)
To: Maven Users List <users@maven.apache.org>, info@soebes.de
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Karl-Heinz,

thanks for you suggestions, I replaced classifier tests with type
test-jar. As you stated release:prepare does not work because I do not
have a SNAPSHOT-version. My other concern is still true, running:
env revision=3DNULL mvn321 clean install
still has the non-resolved property ${revision} in the installed pom
in my localRepository.
Regards Mirko
--
http://illegalstateexception.blogspot.com/
https://github.com/mfriedenhagen/ (http://osrc.dfm.io/mfriedenhagen)
https://bitbucket.org/mfriedenhagen/


On Mon, Feb 24, 2014 at 11:05 PM, Karl Heinz Marbaise <khmarbaise@gmx.de> w=
rote:
> Hi Mirko,
>
>
>>
>>
>> I just tried this with a small multimodule pet project, see the mvn321
>> branch (https://github.com/1and1/testlink-junit/compare/master...mvn321)=
.
>
>
> Just forked it give it a try..
>
>
>>
>> Now giving revision as a property (mvn321 -Drevision=3DNULL clean
>> verify) does *not* work, enforcer complains about being not able to
>> resolve the reactor artifacts. You have to put revision into the
>> environment, so
>> env revision=3DNULL mvn321 clean verify does the trick.
>
>
> that looks strange...cause if i do that i get the following:
>
> [INFO]
> [INFO] --- maven-enforcer-plugin:1.3.1:enforce (default-enforce) @
> tljunit-surefire ---
> Downloading:
> http://localhost:8081/nexus/content/groups/public/net/oneandone/testlinkj=
unit/tljunit-parent/3.0.3-${revision}/tljunit-parent-3.0.3-${revision}.pom
> [WARNING] Rule 3: org.apache.maven.plugins.enforcer.RequireNoRepositories
> failed with message:
> Could not transfer artifact
> net.oneandone.testlinkjunit:tljunit-parent:pom:3.0.3-${revision} from/to
> nexus (http://localhost:8081/nexus/content/groups/public): Illegal charac=
ter
> in path at index 100:
> http://localhost:8081/nexus/content/groups/public/net/oneandone/testlinkj=
unit/tljunit-parent/3.0.3-${revision}/tljunit-parent-3.0.3-${revision}.pom
>
>   net.oneandone.testlinkjunit:tljunit-parent:pom:3.0.3-${revision}
>
> from the specified remote repositories:
>   nexus (http://localhost:8081/nexus/content/groups/public, releases=3Dtr=
ue,
> snapshots=3Dtrue)
>
>
> That looks like a issue with maven-enforcer .......i will start writing a=
n
> integration tests for that....
>
> Furthermore i have taken a look into the project and found something
> strange:
>
> in the dependencyManagement of the parent:
>
>  <dependency>
>     <groupId>net.oneandone.testlinkjunit</groupId>
>     <artifactId>tljunit-surefire</artifactId>
>     <version>${project.version}</version>
>     <classifier>tests</classifier>
>  </dependency>
>
> Should this reference the test-jar which is produced in the sub-module by
> using maven-jar-plugin:test-jar goal ?
>
> Yes...than the dependency entry is wrong. It must be done like the
> following:
>
>  <dependency>
>     <groupId>net.oneandone.testlinkjunit</groupId>
>     <artifactId>tljunit-surefire</artifactId>
>     <version>${project.version}</version>
>     <type>test-jar</type>
>     <scope>test</scope>
>  </dependency>
>
> And this dependeny is used in the  module:
>
> <artifactId>tljunit-eclipse</artifactId>
>
> which produces your error about the not resolvable artifact in the
> reactor....
>
>
> If you are using the maven-release-plugin you need to give the parameters=
 in
> a different way cause maven-release-plugin calls maven a second time whic=
h
> will result in the following:
>
> mvn -Drevision=3DNULL -Darguments=3D"-Drevision=3DNULL" release:prepare
>
> This looks a bit strange but it works except that i get a message about n=
ot
> existing SNAPSHOT version...but no failure.....
> If you enhance your configuration of the maven-release-plugin with the
> following line:
>
> <arguments>-Drevision=3D${revision}</arguments>
>
> You can reduce the above call to:
>
> mvn -Drevision=3DNULL release:prepare
>
>
> Kind regards
> Karl-Heinz Marbaise
> --
> SoftwareEntwicklung Beratung Schulung    Tel.: +49 (0) 2405 / 415 893
> Dipl.Ing.(FH) Karl-Heinz Marbaise        ICQ#: 135949029
> Hauptstrasse 177                         USt.IdNr: DE191347579
> 52146 W=C3=BCrselen                           http://www.soebes.de
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


