From users-return-135358-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Feb  5 19:01:24 2014
Return-Path: <users-return-135358-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1EC8D10F4E
	for <apmail-maven-users-archive@www.apache.org>; Wed,  5 Feb 2014 19:01:24 +0000 (UTC)
Received: (qmail 70092 invoked by uid 500); 5 Feb 2014 19:01:20 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 69942 invoked by uid 500); 5 Feb 2014 19:01:20 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 69932 invoked by uid 99); 5 Feb 2014 19:01:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Feb 2014 19:01:19 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=FORGED_YAHOO_RCVD,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.82.96.32] (HELO nm1.bullet.mail.ir2.yahoo.com) (212.82.96.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Feb 2014 19:01:13 +0000
Received: from [212.82.98.54] by nm1.bullet.mail.ir2.yahoo.com with NNFMP; 05 Feb 2014 19:00:50 -0000
Received: from [46.228.39.65] by tm7.bullet.mail.ir2.yahoo.com with NNFMP; 05 Feb 2014 19:00:50 -0000
Received: from [127.0.0.1] by smtp102.mail.ir2.yahoo.com with NNFMP; 05 Feb 2014 19:00:50 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1391626850; bh=cxgpHwvWCDw9CBXRZzVX8OuaTNz+IAhY1g6HdZJRIGw=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:X-Rocket-Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=wsBwwfhPHEonhROVL9Of74maqECMX0HH5UyMKti6iBBGt93qvFMb/P3s86/N3X9SI93jGHDUDGCQamRZ4tnpCdyb/1VdBAIcf0FlCVf1DXUM0jUZAX+cymXXTDpELsP6GDmHds4GRS1rer2tTr17VoyWKEHtNJtraiKNNsQOXhI=
X-Yahoo-Newman-Id: 596849.11002.bm@smtp102.mail.ir2.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: ZnE90BcVM1kLE1cDy4.gH99bxzCB.4nZa2RsPmu5bvTzPTy
 YGj52P9ekpr_1O5Y7J7h.fxoQB3T_YAfPJ1fue.8qQKC7r1MIwtK2uBykZ2Y
 MJD90erZUz6QPe_VRuUrf64bPN6C0B2i.je7wVeJOjoIlh2oWZRFWok7_lk7
 0bfHpsROPROzYO1gJsVk3njKyzSoHhwyVvzFwPQ.E48gtMQ3CkBs18H3hW3i
 P.lRr9wG4rbds_78h7pg.BiXPUEx61pl8WL8RSnXfsC1L7z29DbN_rywiqkl
 rFppe_BOPRuqZFsnS.tGGk1B2onUjEW7NerJ4PjQqME3RVvrht30_WUXNPZg
 YjQdEt_E44BqSFYNl4bDrR5Kv3pZfMNU3lVK3IfagXvIvddXHMF_FYIMV6x2
 yWC0hgdxH3VZU0qbC1oA6tKewqUKX2i5K3xW0pfTIj8YH77gPvWi85cGt3pP
 eNJGEfjo4xhXzzJOihUrgXDdrrnCzMozBOurF9pRAtMafR6edGXZCjxxgCe1
 XwHXfMmWfy1NoZjZWkAn2lc4Y_Kr.ttohR9wbM052BYfOCCmAaEeSjrgjOGx
 i8NF239sO_GYyKrGw1u6ZnlVadh6ZAA7lxH0Va6QEGnZzJ6KXlATE_QcpFEH
 yzRRIng--
X-Yahoo-SMTP: PKuT8k2swBCeFOHzkGy5rTOUTa2hBxlR
X-Rocket-Received: from [127.0.0.1] (its_toasted@108.13.36.11 with plain [188.125.69.59])
        by smtp102.mail.ir2.yahoo.com with SMTP; 05 Feb 2014 19:00:50 +0000 UTC
Message-ID: <52F28A38.4090909@yahoo.com>
Date: Wed, 05 Feb 2014 11:00:08 -0800
From: Mark Eggers <its_toasted@yahoo.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: Maven Users List <users@maven.apache.org>
Subject: Re: Build is successful but can't run?
References: <1391622778030-5783294.post@n5.nabble.com>
In-Reply-To: <1391622778030-5783294.post@n5.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 140205-0, 02/05/2014), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

On 2/5/2014 9:52 AM, TenLeftFingers wrote:
> When I build my Maven project with dependencies (using Netbeans but pointing
> to a vanilla Maven installation), I get BUILD SUCCESS. Great!
>
> When I try to /run /it in the form of *java -cp
> target/my-app-1.0-SNAPSHOT.jar com.mycompany.app.App* I get this:
> *java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory*
>
> How come this dependency fails at this late stage?
>
> Trying to run the class from NetBeans itself gives a different error:
> *Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:exec*
>
> Please enlighten me as to how I can run this thing. It works fine in Eclipse
> when I run it as a Java Application - but Eclipse has other problems that
> I'm avoiding so I need to do this either from CLI or NetBeans (preferable).
>
> Thanks,
> Ten

I normally use NetBeans . . . .

One way to handle this (and it'll end up looking like a standard 
NetBeans project) is the following.

1. Modify the manifest via the maven-jar-plugin

<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-jar-plugin</artifactId>
   <version>2.4</version>
   <configuration>
     <archive>
       <manifest
<addDefaultImplementationEntries>true</addDefaultImplementationEntries>
         <mainClass>main-class-name</mainClass>
         <addClasspath>true</addClasspath>
         <classpathPrefix>lib/</classpathPrefix>
       </manifest>
     </archive>
   </configuration>
</plugin>

2. Use the maven-dependency-plugin to copy over the libraries

<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-dependency-plugin</artifactId>
   <version>2.8</version>
   <executions>
     <execution>
       <phase>package</phase>
       <goals>
         <goal>copy-dependencies</goal>
       </goals>
       <configuration>
<outputDirectory>${project.build.directory}/lib</outputDirectory>
         <includeScope>compile</includeScope>
       </configuration>
     </execution>
   </executions>
</plugin>

3. Run from the command line to test

mvn package
cd target
java -jar jarFileName.jar

To ship the binaries, use the maven-assembly-plugin and package both the 
JAR and the supporting libraries. That way when someone unpacks the zip 
(or tar or tar.gz, etc.), the directory structure will be maintained.

Here's an assembly.xml file. I've left out the xml namespace declarations:

<?xml version="1.0" encoding="UTF-8"?>
<assembly>
     <id>bin</id>
     <formats>
         <format>tar.gz</format>
         <format>zip</format>
     </formats>
     <includeBaseDirectory>false</includeBaseDirectory>
     <includeSiteDirectory>false</includeSiteDirectory>
     <fileSets>
         <fileSet>
             <directory>target</directory>
             <outputDirectory></outputDirectory>
             <includes>
                 <include>*.jar</include>
                 <include>lib/</include>
             </includes>
         </fileSet>
     </fileSets>
</assembly>

Other ways include creating an uber-jar.

. . . . just my two cents.
/mde/


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


