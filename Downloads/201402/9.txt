From users-return-135408-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Feb 11 21:48:52 2014
Return-Path: <users-return-135408-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D1B010E96
	for <apmail-maven-users-archive@www.apache.org>; Tue, 11 Feb 2014 21:48:52 +0000 (UTC)
Received: (qmail 91334 invoked by uid 500); 11 Feb 2014 21:48:49 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 91203 invoked by uid 500); 11 Feb 2014 21:48:48 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 91195 invoked by uid 99); 11 Feb 2014 21:48:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Feb 2014 21:48:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paulus.benedictus@gmail.com designates 209.85.216.47 as permitted sender)
Received: from [209.85.216.47] (HELO mail-qa0-f47.google.com) (209.85.216.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Feb 2014 21:48:41 +0000
Received: by mail-qa0-f47.google.com with SMTP id j5so12438101qaq.6
        for <users@maven.apache.org>; Tue, 11 Feb 2014 13:48:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:date:message-id:subject
         :from:to:content-type;
        bh=gsDrZmoOoryHZGm502ebfAD3r7mxsE8jBxsvXeNZkoo=;
        b=eOqdQNawCwjvTVJHzaG3st9P3S4WISVhZ38b+EHxNgvWQigHDJZQxpHz3q0GUgXT47
         LDkELkreTwfmLmmK2ajk6c2mBEQTKtOmGtoqLXSRS9JSJMHLp6lKeFio55jjt9tVbTuu
         DcyXpu4eoTkGahQAQSJ48eC/c+Hyzqlrfde6ID0tSiwXKbPGCZdp96DxdXkCUP2MxJlW
         1tlYdANvW/3nDenLvBcxZXn9bGUOPKwC7aJPK8wQtDZkLe0WG0CWLxrqFzrXRWjtfprU
         qx4yfHTBIA5T05bRbqE6LDggHTeVZ/r4AgpRKWibTlV3asC4f7TU3Y4znnOITzAZynMs
         3rIg==
MIME-Version: 1.0
X-Received: by 10.140.101.104 with SMTP id t95mr57929124qge.106.1392155301167;
 Tue, 11 Feb 2014 13:48:21 -0800 (PST)
Sender: paulus.benedictus@gmail.com
Received: by 10.96.10.197 with HTTP; Tue, 11 Feb 2014 13:48:21 -0800 (PST)
In-Reply-To: <CADVp3v_ZQa+69g4wkGo6Zivpat60tPnfpOJKOZ0M3EKXEAvP6g@mail.gmail.com>
References: <1392153066705-5784108.post@n5.nabble.com>
	<CADVp3v_ZQa+69g4wkGo6Zivpat60tPnfpOJKOZ0M3EKXEAvP6g@mail.gmail.com>
Date: Tue, 11 Feb 2014 15:48:21 -0600
X-Google-Sender-Auth: 33moHs_k_U9ZTC-j8AOBrL3FMFc
Message-ID: <CABLGb9wJod9MAVBhPfnQ6CMVK0yM_Mk+b4M2Nk5vOBM2noM1LA@mail.gmail.com>
Subject: Re: Why is dependency:analyze lying to me?
From: Paul Benedict <pbenedict@apache.org>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=001a11c16f5e32c60904f2286a70
X-Virus-Checked: Checked by ClamAV on apache.org

--001a11c16f5e32c60904f2286a70
Content-Type: text/plain; charset=ISO-8859-1

I am so happy someone brought this up. I actually hit this issue several
times but never got around to mentioning it. Please submit a JIRA issue!


On Tue, Feb 11, 2014 at 3:41 PM, Barrie Treloar <baerrach@gmail.com> wrote:

> On 12 February 2014 07:41, laredotornado-3 <laredotornado@gmail.com>
> wrote:
> > Hi,
> >
> > I'm using Maven 3.1.1 on Mac 10.9.1.  When I ran "mvn
> dependency:analyze" on
> > my project, I got results that included:
> >
> >         [WARNING] Unused declared dependencies found:
> >         ...
> >         [WARNING]    junit:junit:jar:4.11:test
> >
> > So I commented out the above junit dependency in my pom (declared like
> so):
> [del]
> >         java.lang.NoSuchFieldError: NULL
> >                 at
> org.junit.runners.ParentRunner.<init>(ParentRunner.java:48)
> >                 at
> >
> org.junit.runners.BlockJUnit4ClassRunner.<init>(BlockJUnit4ClassRunner.java:58)
> >                 at
> >
> org.springframework.test.context.junit4.SpringJUnit4ClassRunner.<init>(SpringJUnit4ClassRunner.java:104)
> >
> > This isn't the only dependency that the analyze goal lists that wreaks
> havoc
> > when I comment it out.  Is there another way to detect what dependencies
> are
> > truly not needed by my project?
>
> Unfortunately this stuff is not documented well enough in the plugin.
> You're welcome to submit a patch!
>
> Have a look at
> http://maven.apache.org/plugins/maven-dependency-plugin/faq.html#unused
>
> I think Maven is missing a scope, it needs to break up test into two
> phases; testCompile and testRuntime instead of having one scope which
> means both.
> This means that the analyze code can't tell what stuff is needed for
> tests at compile time and what is needed at runtime.
>
> If my memory serves me right, that would mean for your example that
> Spring is a compile time dependency but junit would be a runtime
> dependency.
> Hence the incorrect "Unused declared dependencies found" error.
>
> I would manually ignore anything found in the test scope from the error
> list.
> I never found the time to go hacking the plugin to work better - i.e.
> if it is test scope it really can't tell the difference between unused
> dependencies and shouldn't report them.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>
>


-- 
Cheers,
Paul

--001a11c16f5e32c60904f2286a70--

