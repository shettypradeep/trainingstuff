From users-return-135477-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Fri Feb 14 07:13:06 2014
Return-Path: <users-return-135477-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C0A4710AC7
	for <apmail-maven-users-archive@www.apache.org>; Fri, 14 Feb 2014 07:13:06 +0000 (UTC)
Received: (qmail 63149 invoked by uid 500); 14 Feb 2014 07:13:02 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 62641 invoked by uid 500); 14 Feb 2014 07:12:56 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 62631 invoked by uid 99); 14 Feb 2014 07:12:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Feb 2014 07:12:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [88.198.41.52] (HELO tux235.hoststar.ch) (88.198.41.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Feb 2014 07:12:50 +0000
Received: from mail-qc0-f174.google.com (mail-qc0-f174.google.com [209.85.216.174])
	(authenticated bits=0)
	by tux235.hoststar.ch (8.13.8/8.12.11) with ESMTP id s1E7CO6e028387
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=FAIL)
	for <users@maven.apache.org>; Fri, 14 Feb 2014 08:12:25 +0100
Received: by mail-qc0-f174.google.com with SMTP id x13so19222567qcv.5
        for <users@maven.apache.org>; Thu, 13 Feb 2014 23:12:24 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=NiNFxGMZKEdd29mGly/v8l5W2wGv75VZRWSo/URYwfk=;
        b=Zkx0jDDyWlqf+7+Jm0NwB1sGudl+fYpM/lU4AHPy7BJkcB27Rv5f9mG1SdI92ZiRcE
         9kfbx5EzBM3puVCZMoDMv6HR7J5JHf4RaFfCbnL7n3DKltRRXFP+atYHPvGklAW4ngj/
         zm/YgBcshBh+SpZ13DEwHQjqj0xQjm7F3zAJopuygsRw0In2lozUz3ZSM9oqg3NLv04q
         eStckQ40Ei5CkAcMi5VzK+EbtMfHKHy97I7kr7rUwRRZb/GKhdYJ4/8SBJvlb3u82DtY
         YzMyY0pKDKfX+pqHp3oXshmL1jU+areKOmI5aiJCmN58sKm/E9wGTUqFWCjCYM4YqL0C
         83qw==
X-Received: by 10.140.34.231 with SMTP id l94mr9514679qgl.85.1392361944625;
 Thu, 13 Feb 2014 23:12:24 -0800 (PST)
MIME-Version: 1.0
Received: by 10.224.182.203 with HTTP; Thu, 13 Feb 2014 23:11:54 -0800 (PST)
In-Reply-To: <CAKDUN1td5rA6ij7L4JgOuWaCQU+qsQejs+wcEFSVXcDBQ4xCzQ@mail.gmail.com>
References: <CAJZYdzjdZKS69VX64izc104aeb2m0CZQqcR2BWCbaHp3mginjg@mail.gmail.com>
 <52F4EED5.2040305@artifact-software.com> <CAJZYdzjLSdYqes9wtokB0U6yvO8DkV1Qt8dqf2s2i_gwuR_uvA@mail.gmail.com>
 <52F50425.50107@artifact-software.com> <CAJZYdziKda4m1LLqefAzztmM6QM2ooA7mSsLkrUt4YMbbwy=Hg@mail.gmail.com>
 <CANWgJS6gedPKQ_S5Gyt_D6j4KFnJoSfBrUf7GdE6ht6wo7fq6Q@mail.gmail.com>
 <CAJZYdzjHBa08qjUi0Oncfyrh4BYRb__-y8QhxgnCVCS1_YyZCA@mail.gmail.com> <CAKDUN1td5rA6ij7L4JgOuWaCQU+qsQejs+wcEFSVXcDBQ4xCzQ@mail.gmail.com>
From: =?ISO-8859-1?Q?Reto_Habl=FCtzel?= <rethab@rethab.ch>
Date: Fri, 14 Feb 2014 08:11:54 +0100
Message-ID: <CAJZYdzhW+uVpPPKNa=Hnjh5c2HFNmGAgRsVT0iifDM9CO6PHnA@mail.gmail.com>
Subject: Re: maven-ear-plugin silently overrides libraries
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=001a11c0e8881bd1d304f258875a
X-Scanned-By: mimedefang-scanned
X-Virus-Checked: Checked by ClamAV on apache.org

--001a11c0e8881bd1d304f258875a
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thank you, Anders.

I reported the issue: http://jira.codehaus.org/browse/MEAR-180

- Reto


On Fri, Feb 14, 2014 at 7:52 AM, Anders Hammar <anders@hammar.net> wrote:

> You need to create an account at Codehaus Xircles. Go to
> http://jira.codehaus.org and there is more info in the top left hand
> gadget/box.
>
> /Anders
>
>
> On Fri, Feb 14, 2014 at 7:46 AM, Reto Habl=FCtzel <rethab@rethab.ch> wrot=
e:
>
> > Is JIRA open for public registration / issue creation? I could not find=
 a
> > link to sign up..
> >
> > Anyways, I attached a sample project. Please follow these steps to
> > recreate the issue (btw. I think the whole naming thing is also a probl=
em
> > if you are referencing two ejbs with the same artifactId and version):
> >
> > Install 'utilities' project in 'collections':
> > collections/utilities> mvn install
> >
> > Install 'utilities' project in 'email':
> > email/utilities> mvn install
> >
> > Package 'ear' project:
> > ear> mvn package
> >
> > Look at contents of ear and notice how only one jar is included:
> > ear> unzip -v target/ear-1.0.0.ear
> >
> > Now use the debug flag to see why only one gets included:
> > ear> mvn --debug clean package
> >
> > Partial output:
> >   [INFO] Copying artifact [jar:ch.rethab.email:utilities:1.0.0] to
> > [utilities-1.0.0.jar]
> >   [DEBUG] Skipping artifact [jar:ch.rethab.collections:utilities:1.0.0]=
,
> > as it is already up to date at [utilities-1.0.0.jar]
> >
> >
> >
> >
> > On Thu, Feb 13, 2014 at 7:32 PM, Baptiste Mathus <bmathus@batmat.net
> >wrote:
> >
> >> That's the way to go. Even more if you're able to attach a test projec=
t.
> >> One report without report is far less likely to be worked on.
> >> Cheers
> >> Le 13 f=E9vr. 2014 14:06, "Reto Habl=FCtzel" <rethab@rethab.ch> a =E9c=
rit :
> >>
> >> > So what's the status on this? Shall I create a ticket?
> >> >
> >> >
> >> > On Fri, Feb 7, 2014 at 5:04 PM, Ron Wheeler
> >> > <rwheeler@artifact-software.com>wrote:
> >> >
> >> > > Exclusions will not help in this case.
> >> > > Looking through the dependency hierarchy will at least get you to
> see
> >> the
> >> > > problem earlier which I think was the nature of your question.
> >> > >
> >> > > It appears from my brief reading and fun with making servlets run =
in
> >> > > production that classloaders merge classes by name.
> >> > > Maven does not.
> >> > >
> >> > > I am a bit surprised that groupId does not count.
> >> > >
> >> > > If one uses a lot of third -party libraries, it would seem
> inevitable
> >> > that
> >> > > you could need com.artifact-software:utilities:1.0 at the same tim=
e
> as
> >> > > ch.rethab:utilities:1.0 at the same time.
> >> > > The classloader is not going to cause any problem but if Maven
> throws
> >> out
> >> > > one of these as a duplicate, you will be missing classes at
> run-time.
> >> > >
> >> > > It is difficult to force everyone to create unique artifactIds
> unless
> >> you
> >> > > get rid of the GroupId altogther and make GAV -> <AV> and put the
> >> group
> >> > > name into the artifactID.
> >> > >
> >> > > This seems to be a design flaw if it is true.
> >> > >
> >> > > Ron
> >> > >
> >> > >
> >> > > On 07/02/2014 9:43 AM, Reto Habl=FCtzel wrote:
> >> > >
> >> > >> Sure, but exclusions don't do the trick if you need both of them,
> do
> >> > >> they? I am talking about completely independent libraries that
> >> happen to
> >> > >> have the same artifactId.
> >> > >>
> >> > >> Those were actually both libraries of mine and I could obviously
> fix
> >> > this
> >> > >> issue rather simply, but I was just thinking that it would be
> >> helpful to
> >> > >> have at least a warning or something from maven - regardless of t=
he
> >> IDE.
> >> > >>
> >> > >> - Reto
> >> > >>
> >> > >>
> >> > >> On Fri, Feb 7, 2014 at 3:33 PM, Ron Wheeler
> >> <rwheeler@artifact-software.
> >> > >> com <mailto:rwheeler@artifact-software.com>> wrote:
> >> > >>
> >> > >>     If your IDE supports Maven (Eclipse/STS for example), you wil=
l
> >> see
> >> > >>     the conflict in the dependency hierarchy view and you can fix
> it
> >> > >>     with the right exclusions.
> >> > >>
> >> > >>     It is almost always worth a quick look through the dependency
> >> > >>     hierarchy view if you use a lot of third party libraries.
> >> > >>     Not everyone updates their dependencies when they build a
> >> > >>     shareable library.
> >> > >>     You can sometimes get some pretty old versions of things
> dragged
> >> > >>     in with the latest version of otherwise well-written librarie=
s.
> >> > >>     Exclusions need to be added to get what you want in your
> >> artifacts.
> >> > >>
> >> > >>     Ron
> >> > >>
> >> > >>
> >> > >>     On 07/02/2014 9:21 AM, Reto Habl=FCtzel wrote:
> >> > >>
> >> > >>         Hi there,
> >> > >>
> >> > >>         I built an ear using the maven-ear-plugin (version 2.6).
> >> > >>
> >> > >>         The ear is configured such that it includes two libraries
> >> into
> >> > >>         the lib
> >> > >>         folder, both with the same artifactId as well as the same
> >> > >>         version, but a
> >> > >>         different groupId. Now if I simply call 'mvn package' onl=
y
> >> the
> >> > >>         first one is
> >> > >>         included, but no warning whatsoever appears. Only once I
> turn
> >> > >>         on debugging
> >> > >>         (mvn --debug package), I see one subtle message:
> >> > >>         [DEBUG] Skipping artifact [jar:com.foo:bar:1.0] as it is
> >> > >>         already up to date
> >> > >>         at [lib/bar-1.0.jar]
> >> > >>
> >> > >>         Wouldn't it make sense to either include the groupId in t=
he
> >> > >>         filename or at
> >> > >>         least make a check (that includes the groupId) beforehand
> if
> >> > >>         there are any
> >> > >>         conflicts?
> >> > >>
> >> > >>         Cheers,
> >> > >>         Reto
> >> > >>
> >> > >>
> >> > >>
> >> > >>     --     Ron Wheeler
> >> > >>     President
> >> > >>     Artifact Software Inc
> >> > >>     email: rwheeler@artifact-software.com
> >> > >>     <mailto:rwheeler@artifact-software.com>
> >> > >>
> >> > >>     skype: ronaldmwheeler
> >> > >>     phone: 866-970-2435, ext 102
> >> > >>
> >> > >>
> >> > >>
> >> > --------------------------------------------------------------------=
-
> >> > >>     To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> >> > >>     <mailto:users-unsubscribe@maven.apache.org>
> >> > >>
> >> > >>     For additional commands, e-mail: users-help@maven.apache.org
> >> > >>     <mailto:users-help@maven.apache.org>
> >> > >>
> >> > >>
> >> > >>
> >> > >
> >> > > --
> >> > > Ron Wheeler
> >> > > President
> >> > > Artifact Software Inc
> >> > > email: rwheeler@artifact-software.com
> >> > > skype: ronaldmwheeler
> >> > > phone: 866-970-2435, ext 102
> >> > >
> >> > >
> >> >
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> > For additional commands, e-mail: users-help@maven.apache.org
> >
>

--001a11c0e8881bd1d304f258875a--

