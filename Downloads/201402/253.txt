From users-return-135579-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sat Feb 22 01:47:10 2014
Return-Path: <users-return-135579-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D9B6A10A59
	for <apmail-maven-users-archive@www.apache.org>; Sat, 22 Feb 2014 01:47:10 +0000 (UTC)
Received: (qmail 11178 invoked by uid 500); 22 Feb 2014 01:47:06 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 11069 invoked by uid 500); 22 Feb 2014 01:47:05 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 43745 invoked by uid 99); 21 Feb 2014 04:24:27 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of justinhrobbins@gmail.com designates 209.85.214.171 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=WtQ2LNxckS5MJbVPqgh+msoT5YdZSp2y83c6eTJzBHA=;
        b=mCuo/cGtjPumvWurOyR0FJSNCBO6fkxwCsdBqqMgyBlEUkCIBA1ZoSOLo1QwU38Af7
         YU74ALpMqvmUDNxctm0lCRJZ8EnHt/b4fFduj62fXvLj/nEBo6SeI9RzPOPSFRE9xIH2
         5YcgBLBZ3evrbbc0rpkxD7oxU6rTiQYz+N83C+vd9mirvgmEf+zRJangV/xZpeX7KzvT
         RJW770agd3WRmsoJoXK0iGr9k1LFNlaKGJTogYzB0gZ1WdVTj1D/8DuTNBwO9kvkTGZG
         DJDKVHskyB+WFUAVQ4DxQ9luoCJiLITp4nACWsIdcMlLxanEzL0+hGaJ/EsK7/iZnJES
         76pQ==
MIME-Version: 1.0
X-Received: by 10.60.130.234 with SMTP id oh10mr6400512oeb.60.1392956642525;
 Thu, 20 Feb 2014 20:24:02 -0800 (PST)
Date: Thu, 20 Feb 2014 21:24:02 -0700
Message-ID: <CAK7_69du2_mShGCOLiLHRV7sV_3SVifV4KYOFffMQ0wv3PdCEA@mail.gmail.com>
Subject: How to fix broken sub-module links in Maven Site for multi-module project?
From: Justin Robbins <justinhrobbins@gmail.com>
To: users@maven.apache.org
Content-Type: multipart/alternative; boundary=089e013a1106dd874904f2e2fd10
X-Virus-Checked: Checked by ClamAV on apache.org

--089e013a1106dd874904f2e2fd10
Content-Type: text/plain; charset=ISO-8859-1

I am creating a Maven Site for a 3-level multi-module maven project which
is structured like this:

parent
  >  child-a
  >>   child-b

I am running mvn site site:stage

The Maven site module link (from the About page) works for child-a but is
broken for the nested module child-b. (The link to child-b does work if I
first click the link to child-a.)

See for yourself here:
http://justinhrobbins.github.io/multi-module-site-report-test/site/0.0.1-SNAPSHOT/

I have the following in my parent pom:

<distributionManagement>
    <site>
        <id>site</id>
        <name>site</name>
        <url>scp://www.yourcompany.com/www/docs/project/</url>
    </site>
</distributionManagement>

What needs to be done in order for the links to work for all the project
modules in this Maven site report? (i know the is not real, for the moment
i want it to work in stage)

I added a simple test case project to Github that demonstrates the issue:
https://github.com/justinhrobbins/multi-module-site-report-test

I am using the following plugin versions:

<maven.site.plugin.version>3.3</maven.site.plugin.version>
<maven.source.plugin.version>2.2.1</maven.source.plugin.version>

I have also tried adding distributionManagement/site/url to each child
module.  That fixes the link to child-b from the main Site page, but then
the link from child-a to child-b is broken.  These changes can be found in
this branch:
https://github.com/justinhrobbins/multi-module-site-report-test/tree/DistributionMgtInEachModule

I have read the following relevant pages in the docs:
http://maven.apache.org/plugins/maven-site-plugin/examples/multimodule.html
http://maven.apache.org/plugins/maven-site-plugin/faq.html#Use_of_url

Any suggestions are appreciated.

--089e013a1106dd874904f2e2fd10--

