From users-return-138094-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Mon Dec 29 23:25:16 2014
Return-Path: <users-return-138094-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 812A310471
	for <apmail-maven-users-archive@www.apache.org>; Mon, 29 Dec 2014 23:25:16 +0000 (UTC)
Received: (qmail 11767 invoked by uid 500); 29 Dec 2014 23:25:14 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 11685 invoked by uid 500); 29 Dec 2014 23:25:14 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 10031 invoked by uid 99); 29 Dec 2014 23:25:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2014 23:25:04 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW
X-Spam-Check-By: apache.org
Received-SPF: error (athena.apache.org: local policy)
Received: from [209.85.216.51] (HELO mail-qa0-f51.google.com) (209.85.216.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2014 23:24:58 +0000
Received: by mail-qa0-f51.google.com with SMTP id i13so7694198qae.10
        for <users@maven.apache.org>; Mon, 29 Dec 2014 15:23:32 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:date:from:to:cc:subject:message-id:in-reply-to
         :references:mime-version:content-type:content-transfer-encoding;
        bh=dofSGx/Hgd/FHgZGHkoV70lc4mHI1v6W/oDbHu51Kew=;
        b=ImqxuArncIE0cnC31NZ885n2/x/Y3dCURVudn5qkcQWrrPoLqLLOizogPIYJXe4CfV
         CFUgu/WEsYN/byQHQKZtZP6jliqORIOi5XQbR2nB/LWXQLFF9GiirlHo126OXVOAVauP
         5aJ3L/4anMUtk1Gc5fudUTUWG9YWjnCsM3465VYsFWrfVFrd+5mztvt8PiApJH2IUWXH
         rTV1mDpaU9Epij3p8zKKmspgENfNHUBQ+mVsDa5vLn0Tt/IRidoqnHjQucE4GJbnv6Lv
         1iTEf35OkfsxJqmFz3LKytVaw9FDEFHPDTdz5K/lLAr9R8I8ztBaJQJiR9EY6GAbK7BC
         DAjA==
X-Gm-Message-State: ALoCoQljPjvzvQE0EEc5DdRKKSlBbLBp4y2+UTGPdNj6dhyXRI0gpnW/ZMJjx3w/jnM/oyGDCxDr
X-Received: by 10.140.98.162 with SMTP id o31mr91399635qge.49.1419895412054;
        Mon, 29 Dec 2014 15:23:32 -0800 (PST)
Received: from localhost (HSI-KBW-134-3-146-104.hsi14.kabel-badenwuerttemberg.de. [134.3.146.104])
        by mx.google.com with ESMTPSA id a3sm34693035qag.22.2014.12.29.15.23.31
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Mon, 29 Dec 2014 15:23:31 -0800 (PST)
Date: Tue, 30 Dec 2014 00:23:27 +0100
From: Bernd Eckenfels <ecki@zusammenkunft.net>
To: users@maven.apache.org
Cc: =?UTF-8?Q?=E6=9D=8E=E5=93=8D?= <waterlx@gmail.com>
Subject: Re: Set system property by -Dxxx=xxx vs. in java source file. Why
 it does not work if setting in java source file ?
Message-ID: <20141230002327.00003245.ecki@zusammenkunft.net>
In-Reply-To: <CAPcmo=5tq75JvOq2YJeXfDRiTLQnxbcb6GKJbErT+HsmW=676A@mail.gmail.com>
References: <CAPcmo=5tq75JvOq2YJeXfDRiTLQnxbcb6GKJbErT+HsmW=676A@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

it does not sound to be related to maven. This is more a surefire/junit
thing. I guess you are initialising some JSSE/JCE related object before
you can set the system property - and therefore it is ignored. (because
some initialiser or just because another test is running before in the
same JVM),

I would stick with the systemProperty in POM. But if you want to make
it programmatically try to squeece it into the setUpBeforeClass() or
even having a custom @RunWith runner.

BTW: I think the exceptin text is right, the problem is that
disableSSLv3 is (Still) true.

Greetings
Bernd

 Am Mon, 29 Dec 2014 18:18:01 +0800
schrieb =E6=9D=8E=E5=93=8D <waterlx@gmail.com>:

> Hi, I am using IBM JDK 7.1-2.0. Because SSL v3 is disabled by the
> JDK, so I need to set com.ibm.jsse2.disableSSLv3 to false to enable
> it when running some test cases.
>=20
> The project is managed by maven. I tried with:
>=20
> 1. mvn xxxx -Dcom.ibm.jsse2.disableSSLv3=3Dfalse, or add
> <com.ibm.jsse2.disableSSLv3>false</com.ibm.jsse2.disableSSLv3> into
> <systemPropertyVariables> of pom.xml.
>=20
>   It works.
>=20
> 2. Modify the java source file of the test case
>    I used : String
> old=3DSystem.setProperty("com.ibm.jsse2.disableSSLv3", "false") and got
> the exception:
>=20
> Caused by: java.lang.IllegalArgumentException: Only SSLv3 was enabled
> while com.ibm.jsse2.disableSSLv3 is set to true (It should be "false"
> here, seems a JDK bug, never mind)
>         at com.ibm.jsse2.pb.a(pb.java:17)
>         at com.ibm.jsse2.pb.<init>(pb.java:7)
>         at com.ibm.jsse2.qc.setEnabledProtocols(qc.java:689)
>         at
> org.apache.flume.source.http.TestHTTPSource$DisabledProtocolsSocketFactor=
y.createSocket(TestHTTPSource.java:514)
> <-- sc.setEnabledProtocols(protocols), sc is an instance of SSLSocket
>         at
> com.ibm.net.ssl.www2.protocol.https.c.afterConnect(c.java:7) at
> com.ibm.net.ssl.www2.protocol.https.d.connect(d.java:9) at
> sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnec=
tion.java:1103)
>         at
> com.ibm.net.ssl.www2.protocol.https.b.getOutputStream(b.java:84) at
> org.apache.flume.source.http.TestHTTPSource.doTestHttps(TestHTTPSource.ja=
va:392)
>         at
> org.apache.flume.source.http.TestHTTPSource.testHttpsSSLv3(TestHTTPSource=
.java:321)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java=
:95)
>         at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorI=
mpl.java:56)
>         at java.lang.reflect.Method.invoke(Method.java:620)
>         at
> org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMeth=
od.java:45)
>         at
> org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallabl=
e.java:15)
>         at
> org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod=
.java:42)
>         at
> org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.=
java:20)
>         at
> org.junit.internal.runners.statements.ExpectException.evaluate(ExpectExce=
ption.java:22)
>         ... 24 more
>=20
>    I printed the value of com.ibm.jsse2.disableSSLv3 before the line
> 514 of TestHTTPSource.java,
> and com.ibm.jsse2.disableSSLv3 is false, as expected.
>=20
>   It seems that com.ibm.jsse2.disableSSLv3=3Dfalse do not take effect
> here. Why ???? Is it because the program gets out of
> TestHTTPSource.java and get into JDK, or something else, so the
> system property does not take effect ??
>=20
> THANKS IN ADVANCE !
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


