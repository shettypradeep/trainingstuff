From users-return-138102-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Dec 31 16:49:47 2014
Return-Path: <users-return-138102-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CBF7C102B6
	for <apmail-maven-users-archive@www.apache.org>; Wed, 31 Dec 2014 16:49:47 +0000 (UTC)
Received: (qmail 72761 invoked by uid 500); 31 Dec 2014 16:49:46 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 72685 invoked by uid 500); 31 Dec 2014 16:49:46 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 72672 invoked by uid 99); 31 Dec 2014 16:49:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2014 16:49:44 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ole.ersoy@gmail.com designates 209.85.223.176 as permitted sender)
Received: from [209.85.223.176] (HELO mail-ie0-f176.google.com) (209.85.223.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2014 16:49:15 +0000
Received: by mail-ie0-f176.google.com with SMTP id tr6so15012190ieb.21
        for <users@maven.apache.org>; Wed, 31 Dec 2014 08:49:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        bh=03LXJFex90cF/vS4cgxDt6+Igvd7y9mMam0lIBBw7Ow=;
        b=gvgpMAFWI3mG4MH6zS5Ea2JEvtKZZiYu8R5uMOkEulugQotQ//yQUXPoFPdXTK0QI+
         JuwPY8J88i7cc9sCLsR09EHSJ3WUdiduvFgkEQ/E8/ZbZvX72RKz+IrIR4ivYPU2sIJf
         rv8CIKHoLmhOLnZ0MGQ+8lh5Lak7WKUVgMfcLhDWF0PWK9n3PYVlTUlqFdxzrRVOYqbk
         7Wcr9QFKT1QYzRBrXITZd77eL7LPNtVaov4xPvmHRIcJEWNNU1efy3BgaMV58o2Y9XfX
         G4AbJozfQkNOK0RVWK6l5HkxP50PENOOgVJlMLq/iX/xXOsR3xtkJPI4Mbf9PUvkGqSs
         q+uw==
X-Received: by 10.50.138.226 with SMTP id qt2mr55703404igb.1.1420044553376;
        Wed, 31 Dec 2014 08:49:13 -0800 (PST)
Received: from [172.31.98.108] (75-145-190-123-Illinois.hfc.comcastbusiness.net. [75.145.190.123])
        by mx.google.com with ESMTPSA id lp4sm13059639igb.6.2014.12.31.08.49.12
        for <users@maven.apache.org>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Wed, 31 Dec 2014 08:49:12 -0800 (PST)
Message-ID: <54A42907.90103@gmail.com>
Date: Wed, 31 Dec 2014 10:49:11 -0600
From: Ole Ersoy <ole.ersoy@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.3.0
MIME-Version: 1.0
To: users@maven.apache.org
Subject: Strange Issue
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm seeing some strange behavior with Maven 3.0.5 on Ubuntu.

BACKGROUND
=====================
When I run `mvn test` the console prints:
`[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?`

If I then open the project in Eclipse and run the test it runs fine.  Subsequently if I close Eclipse and run the test with `mvn test` I get `BUILD SUCCESS`.

ANALYSIS
=====================
I run `mvn test` on the `test2` project, that was opened with eclipse, and I get -> `BUILD SUCCESS`.

I then create a `test3` project, copy the pom and the src directory from test2 to test 3.  When running `mvn test` on the `test3` project I get the error again.  I included the result from my console below:

ole@MKI:~/test2$ mvn test
Warning: JAVA_HOME environment variable is not set.
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building test-maven 1.0.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ test-maven ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /home/ole/test2/src/main/resources
[INFO]
[INFO] --- maven-compiler-plugin:3.2:compile (default-compile) @ test-maven ---
[INFO] No sources to compile
[INFO]
[INFO] --- maven-resources-plugin:2.3:testResources (default-testResources) @ test-maven ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /home/ole/test2/src/test/resources
[INFO]
[INFO] --- maven-compiler-plugin:3.2:testCompile (default-testCompile) @ test-maven ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ test-maven ---
[INFO] Surefire report directory: /home/ole/test2/target/surefire-reports

-------------------------------------------------------
  T E S T S
-------------------------------------------------------
Running hello.HelloUnitTest
Greeting from hello the Unit Test!
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.039 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.027s
[INFO] Finished at: Wed Dec 31 10:41:25 CST 2014
[INFO] Final Memory: 8M/240M
[INFO] ------------------------------------------------------------------------
ole@MKI:~/test2$ mkdir ../test3
ole@MKI:~/test2$ cp pom.xml ../test3
ole@MKI:~/test2$ cp -r src ../test3
ole@MKI:~/test2$ cd ../test3/
ole@MKI:~/test3$ mvn test
Warning: JAVA_HOME environment variable is not set.
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building test-maven 1.0.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ test-maven ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /home/ole/test3/src/main/resources
[INFO]
[INFO] --- maven-compiler-plugin:3.2:compile (default-compile) @ test-maven ---
[INFO] No sources to compile
[INFO]
[INFO] --- maven-resources-plugin:2.3:testResources (default-testResources) @ test-maven ---
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /home/ole/test3/src/test/resources
[INFO]
[INFO] --- maven-compiler-plugin:3.2:testCompile (default-testCompile) @ test-maven ---
[INFO] Changes detected - recompiling the module!
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 1 source file to /home/ole/test3/target/test-classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR :
[INFO] -------------------------------------------------------------
[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.722s
[INFO] Finished at: Wed Dec 31 10:42:07 CST 2014
[INFO] Final Memory: 8M/303M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.2:testCompile (default-testCompile) on project test-maven: Compilation failure
[ERROR] No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException

ole@MKI:~/test3$ tree
.
├── pom.xml
├── src
│   └── test
│       └── java
│           └── hello
│               └── HelloUnitTest.java
└── target
     ├── generated-test-sources
     │   └── test-annotations
     ├── maven-status
     │   └── maven-compiler-plugin
     │       └── testCompile
     │           └── default-testCompile
     │               ├── createdFiles.lst
     │               └── inputFiles.lst
     └── test-classes

12 directories, 4 files

Thoughts (Besides just open it in Eclipse :) )?

TIA,
- Ole

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


