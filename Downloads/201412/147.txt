From users-return-138062-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Fri Dec 19 08:55:08 2014
Return-Path: <users-return-138062-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4EC0DCF89
	for <apmail-maven-users-archive@www.apache.org>; Fri, 19 Dec 2014 08:55:08 +0000 (UTC)
Received: (qmail 43957 invoked by uid 500); 19 Dec 2014 08:55:06 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 43868 invoked by uid 500); 19 Dec 2014 08:55:06 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 43857 invoked by uid 99); 19 Dec 2014 08:55:06 -0000
Received: from mail-relay.apache.org (HELO mail-relay.apache.org) (140.211.11.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2014 08:55:06 +0000
Received: from robertscholte.dynamic.ziggo.nl (5248749D.cm-4-1b.dynamic.ziggo.nl [82.72.116.157])
	by mail-relay.apache.org (ASF Mail Server at mail-relay.apache.org) with ESMTPSA id D79F51A0233
	for <users@maven.apache.org>; Fri, 19 Dec 2014 08:55:03 +0000 (UTC)
Content-Type: text/plain; charset=iso-8859-15; format=flowed; delsp=yes
To: "Maven Users List" <users@maven.apache.org>
Subject: Re: Creating a jar and a war from a war project
References: <BAY169-W128B7DCDE93E03F45D4BEAD816B0@phx.gbl>
 <BAY169-W750C76E0E12567F4D01B53816B0@phx.gbl>
Date: Fri, 19 Dec 2014 09:54:58 +0100
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
From: "Robert Scholte" <rfscholte@apache.org>
Message-ID: <op.xq3xpwizkdkhrr@robertscholte.dynamic.ziggo.nl>
In-Reply-To: <BAY169-W750C76E0E12567F4D01B53816B0@phx.gbl>
User-Agent: Opera Mail/12.17 (Win32)

Hi,

have a look at the following parameters of the manve-war plugin:
- archiveClasses[1]
- attachClasses[2]

I suggest *not* to use the maven-assembly-plugin in this case. It'll make  
things over-complex.

thanks,
Robert

[1]  
http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#archiveClasses
[2]  
http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#attachClasses


Op Fri, 19 Dec 2014 08:03:22 +0100 schreef shailendra singh  
<shailendra_01@outlook.com>:

> Hi,
>
> For some reason I am struggling to
> create a war and a jar from a maven war project. I want to create these  
> two artifacts from my maven war project with following requirements -
>
> Jar
>  - This should contain all the class files and dependencies of war
> project. However dependencies should be copied under lib folder of this
> jar and should not be in unpacked form. This part is giving me problem.
>
> War
>  - For war I simply want to have static artifacts and nothing which is
> present under WEB-INF folder. I am able to achieve this using maven war
> plugin.
>
> Here is the code present under <build> tag of my pom.xml -
> <build>
>         <plugins>
>             <plugin>
>                 <artifactId>maven-compiler-plugin</artifactId>
>                 <configuration>
>                     <source>1.8</source>
>                     <target>1.8</target>
>                 </configuration>
>             </plugin>
>             <plugin>
>                 <artifactId>maven-assembly-plugin</artifactId>
>                 <configuration>
>                     <descriptors>
>                         <descriptor>assembly.xml</descriptor>
>                     </descriptors>
>                     <appendAssemblyId>false</appendAssemblyId>
>                     <archive>
>                         <manifest>
>                             <addClasspath>true</addClasspath>
>                             <classpathPrefix>lib/</classpathPrefix>
>                         </manifest>
>                     </archive>
>                 </configuration>
>                 <executions>
>                     <execution>
>                         <id>jar-with-dependencies-in-lib</id>
>                         <phase>package</phase>
>                         <goals>
>                             <goal>single</goal>
>                         </goals>
>                     </execution>
>                 </executions>
>             </plugin>
>             <plugin>
>                 <artifactId>maven-war-plugin</artifactId>
>                 <configuration>
>                     <packagingExcludes>WEB-INF/</packagingExcludes>
>                     <failOnMissingWebXml>false</failOnMissingWebXml>
>                 </configuration>
>             </plugin>
>
>         </plugins>
>     </build>
>
> Here is content of assembly.xml file which is located directly under  
> project root directory -
>
> <assembly
>     xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
>     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>     xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2  
> http://maven.apache.org/xsd/assembly-1.1.2.xsd">
>     <id>jar-with-dependencies-in-lib</id>
>     <formats>
>         <format>jar</format>
>     </formats>
>     <includeBaseDirectory>false</includeBaseDirectory>
>     <fileSets>
>         <fileSet>
>             <directory>target/${project.artifactId}-${project.version}/WEB-INF/lib</directory>
>             <includes>
>                 <include>target/${project.artifactId}-${project.version}/WEB-INF/classes</include>
>               </includes>
>         </fileSet>
>     </fileSets>
> </assembly>
>
> I
>  feel that I don't need maven-war-plugin at all and both the artifacts
> can be created using maven assembly plugin only. However I am unable to
> figure out how to achieve this.
>
> - Shailendra
>  		 	   		   		 	   		

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


