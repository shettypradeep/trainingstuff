From users-return-138066-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Fri Dec 19 13:10:09 2014
Return-Path: <users-return-138066-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2975B9934
	for <apmail-maven-users-archive@www.apache.org>; Fri, 19 Dec 2014 13:10:09 +0000 (UTC)
Received: (qmail 10138 invoked by uid 500); 19 Dec 2014 13:10:06 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 10052 invoked by uid 500); 19 Dec 2014 13:10:06 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 10041 invoked by uid 99); 19 Dec 2014 13:10:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2014 13:10:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [24.37.79.202] (HELO smtp.artifact-software.com) (24.37.79.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2014 13:09:40 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by smtp.artifact-software.com (Postfix) with ESMTP id 95E8A6A65D6
	for <users@maven.apache.org>; Fri, 19 Dec 2014 08:09:37 -0500 (EST)
X-Virus-Scanned: amavisd-new at artifact-software.com
Received: from smtp.artifact-software.com ([127.0.0.1])
	by localhost (smtp.artifact-software.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 6QEzSvc73dch for <users@maven.apache.org>;
	Fri, 19 Dec 2014 08:09:37 -0500 (EST)
Received: from [192.168.3.170] (unknown [192.168.3.170])
	by smtp.artifact-software.com (Postfix) with ESMTP id 4A3F26A657F
	for <users@maven.apache.org>; Fri, 19 Dec 2014 08:09:37 -0500 (EST)
Message-ID: <5494238F.9090101@artifact-software.com>
Date: Fri, 19 Dec 2014 08:09:35 -0500
From: Ron Wheeler <rwheeler@artifact-software.com>
Reply-To: rwheeler@artifact-software.com
Organization: Artifact Software
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:31.0) Gecko/20100101 Thunderbird/31.3.0
MIME-Version: 1.0
To: Maven Users List <users@maven.apache.org>
Subject: Re: Creating a jar and a war from a war project
References: <BAY169-W128B7DCDE93E03F45D4BEAD816B0@phx.gbl> <BAY169-W750C76E0E12567F4D01B53816B0@phx.gbl> <op.xq3xpwizkdkhrr@robertscholte.dynamic.ziggo.nl> <BAY169-W35EE506754DC6459CEEFDC816B0@phx.gbl> <op.xq31koockdkhrr@robertscholte.dynamic.ziggo.nl>
In-Reply-To: <op.xq31koockdkhrr@robertscholte.dynamic.ziggo.nl>
Content-Type: text/plain; charset=iso-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Starting with an explanation of what you are trying to accomplish rather 
than with what problem you are experiencing, usually makes the problem 
easier to solve and makes the advice you get actually helpful.

What are you trying to do that makes your requirements so non-standard?

If you are just trying to separate the war from the code, this is pretty 
standard and a good idea.
You make 2 projects, one to make the jar and another to make the war.
Both become trivial examples of maven projects and do not require any 
crazy plug-in configurations.
The war has a dependency on the jar.

If you want to install the jar separately from your war(jar not included 
the war), make the jar dependency in your war POM as scope "provided".
Maven will not put any jar contents in the war file and will leave it up 
to the Servlet container to find the classes.
The jar is nothing special and all of the components will be where they 
are supposed to be and you will have no trouble when you try to run your 
app.

http://blog.artifact-software.com/tech/?tag=maven has some articles that 
I wrote on making multi-project application work with Maven with this 
sort of separation of libraries from war configuration.

Ron

On 19/12/2014 5:18 AM, Robert Scholte wrote:
> Re-reading your request...
>
> bq. Jar
>     - This should contain all the class files and dependencies of war 
> project. However dependencies should be copied under lib folder of 
> this jar and should not be in unpacked form.
>
> I hope you are aware that this conflicts with the jar-specs. The 
> classes inside the lib/*.jars won't end up on the classpath, which 
> makes this jar useless.
> I'd strongly advice you not to solve it as you described.
>
> thanks,
> Robert
>
> Op Fri, 19 Dec 2014 10:33:19 +0100 schreef shailendra singh 
> <shailendra_01@outlook.com>:
>
>> Hi,
>>
>> Thank you for your response.
>>
>> I am already aware about these two parameters.
>>
>> I don't thing 'archiveClasses' parameter will be of any help in my case.
>>
>> I had tried to use 'attachClasses' initially but I could not figure 
>> out how to pull war dependencies (and that too in a lib folder) in 
>> the jar file which will be generated by setting this parameter to true.
>>
>> So I have no solution for my problem yet.
>>
>> Thanks
>> Shailendra
>>
>>> To: users@maven.apache.org
>>> Subject: Re: Creating a jar and a war from a war project
>>> Date: Fri, 19 Dec 2014 09:54:58 +0100
>>> From: rfscholte@apache.org
>>>
>>> Hi,
>>>
>>> have a look at the following parameters of the manve-war plugin:
>>> - archiveClasses[1]
>>> - attachClasses[2]
>>>
>>> I suggest *not* to use the maven-assembly-plugin in this case. It'll 
>>> make
>>> things over-complex.
>>>
>>> thanks,
>>> Robert
>>>
>>> [1]
>>> http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#archiveClasses 
>>>
>>> [2]
>>> http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#attachClasses 
>>>
>>>
>>>
>>> Op Fri, 19 Dec 2014 08:03:22 +0100 schreef shailendra singh
>>> <shailendra_01@outlook.com>:
>>>
>>> > Hi,
>>> >
>>> > For some reason I am struggling to
>>> > create a war and a jar from a maven war project. I want to create 
>>> these
>>> > two artifacts from my maven war project with following requirements -
>>> >
>>> > Jar
>>> >  - This should contain all the class files and dependencies of war
>>> > project. However dependencies should be copied under lib folder of 
>>> this
>>> > jar and should not be in unpacked form. This part is giving me 
>>> problem.
>>> >
>>> > War
>>> >  - For war I simply want to have static artifacts and nothing 
>>> which is
>>> > present under WEB-INF folder. I am able to achieve this using 
>>> maven war
>>> > plugin.
>>> >
>>> > Here is the code present under <build> tag of my pom.xml -
>>> > <build>
>>> >         <plugins>
>>> >             <plugin>
>>> > <artifactId>maven-compiler-plugin</artifactId>
>>> >                 <configuration>
>>> >                     <source>1.8</source>
>>> >                     <target>1.8</target>
>>> >                 </configuration>
>>> >             </plugin>
>>> >             <plugin>
>>> > <artifactId>maven-assembly-plugin</artifactId>
>>> >                 <configuration>
>>> >                     <descriptors>
>>> > <descriptor>assembly.xml</descriptor>
>>> >                     </descriptors>
>>> > <appendAssemblyId>false</appendAssemblyId>
>>> >                     <archive>
>>> >                         <manifest>
>>> > <addClasspath>true</addClasspath>
>>> > <classpathPrefix>lib/</classpathPrefix>
>>> >                         </manifest>
>>> >                     </archive>
>>> >                 </configuration>
>>> >                 <executions>
>>> >                     <execution>
>>> > <id>jar-with-dependencies-in-lib</id>
>>> > <phase>package</phase>
>>> >                         <goals>
>>> > <goal>single</goal>
>>> >                         </goals>
>>> >                     </execution>
>>> >                 </executions>
>>> >             </plugin>
>>> >             <plugin>
>>> > <artifactId>maven-war-plugin</artifactId>
>>> >                 <configuration>
>>> > <packagingExcludes>WEB-INF/</packagingExcludes>
>>> > <failOnMissingWebXml>false</failOnMissingWebXml>
>>> >                 </configuration>
>>> >             </plugin>
>>> >
>>> >         </plugins>
>>> >     </build>
>>> >
>>> > Here is content of assembly.xml file which is located directly under
>>> > project root directory -
>>> >
>>> > <assembly
>>> > 
>>> xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
>>> >     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>>> > 
>>> xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2
>>> > http://maven.apache.org/xsd/assembly-1.1.2.xsd">
>>> >     <id>jar-with-dependencies-in-lib</id>
>>> >     <formats>
>>> >         <format>jar</format>
>>> >     </formats>
>>> > <includeBaseDirectory>false</includeBaseDirectory>
>>> >     <fileSets>
>>> >         <fileSet>
>>> > 
>>> <directory>target/${project.artifactId}-${project.version}/WEB-INF/lib</directory>
>>> >             <includes>
>>> > 
>>> <include>target/${project.artifactId}-${project.version}/WEB-INF/classes</include>
>>> >               </includes>
>>> >         </fileSet>
>>> >     </fileSets>
>>> > </assembly>
>>> >
>>> > I
>>> >  feel that I don't need maven-war-plugin at all and both the 
>>> artifacts
>>> > can be created using maven assembly plugin only. However I am 
>>> unable to
>>> > figure out how to achieve this.
>>> >
>>> > - Shailendra
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
>>> For additional commands, e-mail: users-help@maven.apache.org
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>
>


-- 
Ron Wheeler
President
Artifact Software Inc
email: rwheeler@artifact-software.com
skype: ronaldmwheeler
phone: 866-970-2435, ext 102


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


