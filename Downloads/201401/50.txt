From users-return-135226-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Jan 21 09:41:48 2014
Return-Path: <users-return-135226-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ED2E0109E9
	for <apmail-maven-users-archive@www.apache.org>; Tue, 21 Jan 2014 09:41:47 +0000 (UTC)
Received: (qmail 37491 invoked by uid 500); 21 Jan 2014 09:41:44 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 36592 invoked by uid 500); 21 Jan 2014 09:41:42 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 36584 invoked by uid 99); 21 Jan 2014 09:41:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jan 2014 09:41:39 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jnord@cisco.com designates 173.37.86.75 as permitted sender)
Received: from [173.37.86.75] (HELO rcdn-iport-4.cisco.com) (173.37.86.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Jan 2014 09:41:34 +0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple;
  d=cisco.com; i=@cisco.com; l=7735; q=dns/txt; s=iport;
  t=1390297294; x=1391506894;
  h=from:to:subject:date:message-id:references:in-reply-to:
   content-transfer-encoding:mime-version;
  bh=J2k6ymNgqRraYr033lyXbsC5tYQh3UG56H6iKicmRDU=;
  b=P8ifzE4FnS4K6lAElkzwq9MZchldLYZivyaUJDBvQcFSzKOXaf9iwxdm
   YrHdjoSR7fdj7EMAn+04ivcS6tg3xCiX1ABRG+vXDE2Lxc++6DVMwJJl/
   E3eWfVH7plSLrt7RKt6Ku9pYIan1X4V9I6TEeDiYVe9tajghA3Zz/CuPh
   I=;
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ag4FAI0/3lKtJV2d/2dsb2JhbABZgwuBDrtcgQ8WdIIlAQEBBDo6EQQCAQgRAwEBAQEKDwEBAwkHIREUCQgCBBMIh2kDEb4lDYVWF4xrgWMGMgIEHQSCfYEUBJY2jkmFO4Mtgio
X-IronPort-AV: E=Sophos;i="4.95,695,1384300800"; 
   d="scan'208";a="298708009"
Received: from rcdn-core-6.cisco.com ([173.37.93.157])
  by rcdn-iport-4.cisco.com with ESMTP; 21 Jan 2014 09:41:13 +0000
Received: from xhc-aln-x14.cisco.com (xhc-aln-x14.cisco.com [173.36.12.88])
	by rcdn-core-6.cisco.com (8.14.5/8.14.5) with ESMTP id s0L9fCp3016661
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <users@maven.apache.org>; Tue, 21 Jan 2014 09:41:12 GMT
Received: from xmb-aln-x03.cisco.com ([169.254.6.14]) by xhc-aln-x14.cisco.com
 ([173.36.12.88]) with mapi id 14.03.0123.003; Tue, 21 Jan 2014 03:41:12 -0600
From: "James Nord (jnord)" <jnord@cisco.com>
To: Maven Users List <users@maven.apache.org>
Subject: RE: versions maven plugin
Thread-Topic: versions maven plugin
Thread-Index: AQHPFgQUNT0crQTblkGYsR0xB5PZl5qORCEAgAAQ1YCAAARdAIAAA4oAgAAKhgCAAIKUUA==
Date: Tue, 21 Jan 2014 09:41:11 +0000
Message-ID: <5629A6219DB3E544AB84388D901497873EB5D13B@xmb-aln-x03.cisco.com>
References: <OF32F0CB51.FB5A4FA2-ON85257C66.005B8339-85257C66.005D4B8C@belden.com>
	<CA+nPnMz4afCMHpDL_dW2w7KW_F2ozV0=FG+UK2Op0QrzaLJ-7Q@mail.gmail.com>
	<OF3C618DF9.E418F54A-ON85257C66.0064E4F4-85257C66.006600FF@belden.com>
	<CA+nPnMzUpoNuR89F1B49tF_3THdMKHuZttyVRYE9jtJpPXNsUA@mail.gmail.com>
	<OFBB509497.B89B2788-ON85257C66.00679F9D-85257C66.0068978D@belden.com>
 <CA+nPnMyvOWHVyZWTZY_PZsEHSVSc1fGRVEz3b15d6GU7eitXww@mail.gmail.com>
In-Reply-To: <CA+nPnMyvOWHVyZWTZY_PZsEHSVSc1fGRVEz3b15d6GU7eitXww@mail.gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.61.173.193]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I wouldn't have normally chimed in here against Stephen (He knows what he i=
s on about) however...

IMHO Staging only works with very small teams with dedicated infrastructure=
 (in which case QC generally are ok with a rebuild!).
If you have larger teams and share infrastructure (repo manager, CI) across=
 projects (and binaries across teams) then that way will lead to madness.

Or to put it another way Staging with any human intervention is evil.
Staging without human intervention is doing things too late - you should kn=
ow before hand that your code is good to go (if you use releases) - and if =
you are doing things without human intervention then you should know up fro=
nt that the code is good to go - which means you don't need staging (apart =
form for an atomic deployment of a multi module build; but there are other =
ways to do that now).

Or to put a contrived (yet realistic) example on this -
Consider a shared library Y.  You have no auto testing of it so its only te=
sted inside products (otherwise you know its good to go - and wouldn't rele=
ase RCs).
Library Y is in a stage at version 1.2.3
This library is picked up from the stage and placed into a product Z (insid=
e say an RPM)
Z is released into a stage
The library is picked up in product X (inside say another RPM)
QC start testing Z.
QC test X and it reveals a bug in Y.  Both stages (Y and X) are dropped
QC finish testing Z from the stage and then promote it as its good.
The Y developers re-spin 1.2.3...

Z is released into the field with a verison of Y that doesn't match what's =
at some point going to be in the repo.
The build Z is unreproducible - this is the worst possible situation to be =
in,

Now there are those that say - your staging rules on your MRM should check =
the dependencies - but now you are at the behest of your MRM.
Nexus certainly can't do this without custom effort on your side - and then=
 you will have to intimately have full knowledge of the inside of the build=
 that produced this artifact - what groups on your MRM use, what version of=
 maven.. You can't just unpack and look at the use the dependencies - what =
about shaded deps.  To do all this work post build is IMHO nigh on impossib=
le.


/James

> -----Original Message-----
> From: Stephen Connolly [mailto:stephen.alan.connolly@gmail.com]
> Sent: 20 January 2014 19:40
> To: Maven Users List
> Subject: Re: versions maven plugin
>=20
> Consider staging support on your repo manager
>=20
> On Monday, 20 January 2014, <Alejandro.Endo@miranda.com> wrote:
>=20
> > I didn't. QA is not happy about rebuilding the system once it's been
> > approved so we have to release the RC as approved.
> >
> > So all our versions are always RC-X-SNAPSHOT or RC-X
> >
> > Alejandro Endo | Software Designer/Concepteur de logiciels
> >
> >
> >
> >
> > From:   Stephen Connolly <stephen.alan.connolly@gmail.com
> <javascript:;>>
> > To:     Maven Users List <users@maven.apache.org <javascript:;>>,
> > Date:   2014-01-20 13:50
> > Subject:        Re: versions maven plugin
> >
> >
> >
> > How did you turn your RC into a released version? (I would do it with
> > the release plugin and just verify the SCM changelog is unchanged)
> >
> > On Monday, 20 January 2014, <Alejandro.Endo@miranda.com
> > <javascript:;>>
> > wrote:
> >
> > > Thank you Stephen. Are there any other ways to stabilize my
> > > dependencies then?
> > >
> > > i have > 300 poms all depending on the released+1 development version=
.
> > > This must be a common use-case when using RCs, no? you increase all
> > > your versions to your next RC-2-SNAPSHOT as soon as you create your
> > > RC-1, but if that RC-1 happens to be released, then all your poms
> > > will be
> > depending
> > > on the SNAPSHOT of an RC-2 that will never be made so you have to
> > > "downgrade" your dependency versions
> > >
> > > Am I doing something out of the ordinary here?
> > >
> > >
> > >
> > >
> > > Alejandro Endo | Software Designer/Concepteur de logiciels
> > >
> > >
> > >
> > > From:   Stephen Connolly <stephen.alan.connolly@gmail.com
> <javascript:;><javascript:
> > ;>>
> > > To:     Maven Users List <users@maven.apache.org
> <javascript:;><javascript:;>>,
> > > Date:   2014-01-20 12:34
> > > Subject:        Re: versions maven plugin
> > >
> > >
> > >
> > > v-m-p does not roll back version numbers
> > >
> > >
> > > On 20 January 2014 16:59, <Alejandro.Endo@miranda.com
> > > <javascript:;><javascript:;>>
> > > wrote:
> > >
> > > > Not sure if this is the right list for codehaus plugins. If not I
> > > > apologize
> > > >
> > > > I have a pom with this
> > > >
> > > >         <dependencies>
> > > >                 <dependency>
> > > >                         <groupId>foo.blah</groupId>
> > > >                         <artifactId>bar</artifactId>
> > > >                         <version>1.2.0-RC-7-SNAPSHOT</version>
> > > >                 </dependency>
> > > >         </dependencies>
> > > >
> > > > I want to run the versions plugin to replace 1.2.0-RC-7-SNAPSHOT
> > > > with
> > > the
> > > > version we actually released of the code, which is 1.2.0-RC-6.
> > > > Looking
> > > at
> > > > the available mojos, it seems like versions:use-latest-releases is
> > > > the right one to use. In the matrix here it says that this goal
> > > > will
> > modify
> > > > -SNAPSHOT dependencies. Well, it doesn't. If i instead set the
> > > > version
> > > to
> > > > 1.2.0-RC-3 (no snapshot), the mojo does update the dependency to
> > > > 1.2.0-RC-6 so I don't know if this is just the documentation being
> > > wrong.
> > > > I also tried use-latest-versions without success
> > > >
> > > > Any idea how to do this? I just want to change the dependencies
> > > > (which
> > > are
> > > > currently SNAPSHOT due to the m-release-p) to the latest released
> > > versions
> > > >
> > > > Thank you,
> > > > Alejandro Endo | Software Designer/Concepteur de logiciels
> > > >
> > > > DISCLAIMER:
> > > > Privileged and/or Confidential information may be contained in
> > > > this message. If you are not the addressee of this message, you
> > > > may not copy, use or deliver this message to anyone. In such
> > > > event, you should destroy the message and kindly notify the sender
> > > > by reply e-mail. It is understood that opinions or conclusions
> > > > that do not relate to the official business of the company are
> > > > neither given nor endorsed by the company.
> > > > Thank You.
> > > >
> > >
> > >
> > > DISCLAIMER:
> > > Privileged and/or Confidential information may be contained in this
> > > message. If you are not the addressee of this message, you may not
> > > copy, use or deliver this message to anyone. In such event, you
> > > should destroy the message and kindly notify the sender by reply
> > > e-mail. It is understood that opinions or conclusions that do not
> > > relate to the official business of the company are neither given nor
> > > endorsed by the company.
> > > Thank You.
> > >
> >
> >
> > --
> > Sent from my phone
> >
> >
> > DISCLAIMER:
> > Privileged and/or Confidential information may be contained in this
> > message. If you are not the addressee of this message, you may not
> > copy, use or deliver this message to anyone. In such event, you should
> > destroy the message and kindly notify the sender by reply e-mail. It
> > is understood that opinions or conclusions that do not relate to the
> > official business of the company are neither given nor endorsed by the
> > company.
> > Thank You.
> >
>=20
>=20
> --
> Sent from my phone

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


