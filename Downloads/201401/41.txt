From users-return-134877-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Jan  2 09:23:42 2014
Return-Path: <users-return-134877-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 81C0910603
	for <apmail-maven-users-archive@www.apache.org>; Thu,  2 Jan 2014 09:23:42 +0000 (UTC)
Received: (qmail 98580 invoked by uid 500); 2 Jan 2014 09:23:36 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 98492 invoked by uid 500); 2 Jan 2014 09:23:31 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 98484 invoked by uid 99); 2 Jan 2014 09:23:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jan 2014 09:23:28 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stephen.alan.connolly@gmail.com designates 209.85.160.47 as permitted sender)
Received: from [209.85.160.47] (HELO mail-pb0-f47.google.com) (209.85.160.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Jan 2014 09:23:21 +0000
Received: by mail-pb0-f47.google.com with SMTP id um1so14263004pbc.20
        for <users@maven.apache.org>; Thu, 02 Jan 2014 01:23:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=P+zlfHAa+ZU5zIenEHZM0q1ZqqbcPGWs9cVappcIrhM=;
        b=adEG+ohEfobMIfBDM/t8x0JGvGkkvnEonxPkclb9kcfiOda1aakNiXaw9GXMGc70AQ
         clZ96kx43fjyZc9ho9YkqJlNODbkV9/zhiGKAVp1iZT9mrTIZu5G5BPYp2Ik3QGt0Feo
         5Eedv4vnORELD+3kGiFxDSBFHkBAD/P6BVK/qYwjoFewlSWfqU2xBP3eafUzPaXi6v5g
         NZ0otChtbSmn12CbS7gv4QVkZUbr8jBKwuwuhwrsQa7wrztK2THwX+HqEdeaBxhMubI4
         X50/Twr/FdjDEYlpEKHQaluyirbc0SUKjF2UtxR2wYHrYAkDYOE7ptJTXFEJV5/+Q9PZ
         gJCg==
MIME-Version: 1.0
X-Received: by 10.67.5.7 with SMTP id ci7mr58796697pad.99.1388654580753; Thu,
 02 Jan 2014 01:23:00 -0800 (PST)
Received: by 10.68.147.102 with HTTP; Thu, 2 Jan 2014 01:23:00 -0800 (PST)
In-Reply-To: <fa3b24700778f51b8ff24feb77ed65fc@malkusch.de>
References: <fa3b24700778f51b8ff24feb77ed65fc@malkusch.de>
Date: Thu, 2 Jan 2014 09:23:00 +0000
Message-ID: <CA+nPnMwKAASC_p5iOkCpCPPth_A30vBDEz4RBvPnHr0sZihbEg@mail.gmail.com>
Subject: Re: How to copy unversioned test resources during release:perform?
From: Stephen Connolly <stephen.alan.connolly@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=047d7b16013f006a7e04eef9578f
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b16013f006a7e04eef9578f
Content-Type: text/plain; charset=ISO-8859-1

Hmmm that is an interesting problem...

One solution would be to add a goal to
http://maven.apache.org/maven-release/maven-release-plugin/perform-mojo.html#goalsthat
does the copy, for example you could have the default execution of
antrun:run copy the resources if they exist in ../../src/somepath but not
at ./src/somepath and then specify <goals>antrun:run deploy
site-deploy</goals>

Note that if you use file based profile activation to skip the tests if the
files are missing, you will need to ensure that the profile is forced
active/inactive as the file based activation will have been triggered
before antrun:run runs... you can force profile activation with
<arguments>-P+someprofile -P-anotherprofile</arguments> where you want to
ensure that `someprofile` is active and `anotherprofile` is inactive

OTOH I would like a better solution for this class of problem, but short of
writing a plugin to help (i.e. does the exact thing that the antrun
execution would do, but in a more failsafe kind of way... would still hit
the profile activation issue, but such a plugin could also set some
properties for you depending on whether it has the files or not, so one
could leverage the properties to skip some tests if needed)


On 31 December 2013 02:57, Markus Malkusch <markus@malkusch.de> wrote:

> Hi
>
> I have test resources which are not in SCM. As testing is part of
> release:perform that fails without those resources. How can I tell Maven to
> copy those unversioned test resources into target/checkout/target/test-classes/.
> I really would prefer not to skip testing. Those test resource won't come
> into the public SCM as they have credentials for a webservice.
>
> Markus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>
>

--047d7b16013f006a7e04eef9578f--

