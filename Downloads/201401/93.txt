From users-return-135068-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Jan  9 22:32:44 2014
Return-Path: <users-return-135068-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 624151078D
	for <apmail-maven-users-archive@www.apache.org>; Thu,  9 Jan 2014 22:32:44 +0000 (UTC)
Received: (qmail 36355 invoked by uid 500); 9 Jan 2014 22:32:41 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 36237 invoked by uid 500); 9 Jan 2014 22:32:41 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 36196 invoked by uid 99); 9 Jan 2014 22:32:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jan 2014 22:32:41 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mandrikov@gmail.com designates 209.85.216.45 as permitted sender)
Received: from [209.85.216.45] (HELO mail-qa0-f45.google.com) (209.85.216.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Jan 2014 22:32:37 +0000
Received: by mail-qa0-f45.google.com with SMTP id j5so3377923qaq.18
        for <users@maven.apache.org>; Thu, 09 Jan 2014 14:32:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        bh=lQqVKomdmbwhfSLkj3oADXcYdI8rjZ/Tob3LejJwz+E=;
        b=LLRax7pJsyFhDmAHgJysg5zKp3Gc/jZk4YjE2QUSz9oWuh48HxZwi1aKRLD0NP9xnt
         iTZKLVfOLTRwHWkM7+McHb1j/ts4WeHcZ/910je42l3CJhTiEwzcFQ7TurRpzSUWMqMZ
         m/ZVhVpWf0EB8zc6yvdSi7FekZCa4lqUKsNHF7MLWbwBoc8mfx1l3wRhjQCurdMkj2en
         hGt221x+TQr+kHaFXyQBN8b9nB4LG8al7yCE0fWWiPzVWWYTYqJkOihO9M5RUYLBQc2l
         G1TrY2q/wNwHEAmzpIhQYRPD7nOuCe4f2KGr7d0kAGYzGcID5dIAyGusTndXoARYLXvr
         0KeA==
X-Received: by 10.224.151.145 with SMTP id c17mr252339qaw.24.1389306736603;
 Thu, 09 Jan 2014 14:32:16 -0800 (PST)
MIME-Version: 1.0
Received: by 10.229.247.136 with HTTP; Thu, 9 Jan 2014 14:31:36 -0800 (PST)
In-Reply-To: <CAK8jvqx3jPWc==TnXe81sNNY0xeXDA7WWDf+kn_vRHF8cm8AaA@mail.gmail.com>
References: <CAK8jvqxqt1L2+b6jFZdj7QcvqYn5ZTrBye3BKsvy2ZStGUOxgg@mail.gmail.com>
 <CAEPFu6_bspHeQPSU0uoYjz-1q41Y04cRKR55oSnC2jAyF3tYAA@mail.gmail.com> <CAK8jvqx3jPWc==TnXe81sNNY0xeXDA7WWDf+kn_vRHF8cm8AaA@mail.gmail.com>
From: Evgeny Mandrikov <mandrikov@gmail.com>
Date: Thu, 9 Jan 2014 23:31:36 +0100
Message-ID: <CAEPFu6-GfiNZ-ADLAuQK58rrKKujbB3h9jXha1qrw5L=m=MnWg@mail.gmail.com>
Subject: Re: [jacoco-dev] Options for producing class files with different
 compilers via Maven
To: JaCoCo Developers List <jacoco-dev@googlegroups.com>
Cc: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=089e0149cedc84f7b404ef912e6b
X-Virus-Checked: Checked by ClamAV on apache.org

--089e0149cedc84f7b404ef912e6b
Content-Type: text/plain; charset=UTF-8

Indeed, but I missed your point about sources (time to go to bed) and
thought that you wanted to duplicate sources. But then it looks good
already, isn't it? Or I again missed what embarrasses you in the current
solution?


On Thu, Jan 9, 2014 at 11:16 PM, Mirko Friedenhagen <mfriedenhagen@gmail.com
> wrote:

> Hello Evgeny,
>
> that is very unmavenly ;-). I have a prototype at
> https://github.com/mfriedenhagen/org.jacoco.filteringsamples.
> Regards Mirko
> --
> http://illegalstateexception.blogspot.com/
> https://github.com/mfriedenhagen/ (http://osrc.dfm.io/mfriedenhagen)
> https://bitbucket.org/mfriedenhagen/
>
>
> On Thu, Jan 9, 2014 at 10:35 PM, Evgeny Mandrikov <mandrikov@gmail.com>
> wrote:
> > Hi,
> >
> > I have feeling that you ( "we" :) ) could simply use single module and
> > define several executions of:
> >
> > maven-compiler-plugin for compilation
> > maven-assembly-plugin to create JARs and attach them as additional
> project
> > artifacts
> >
> > But I never tried this.
> >
> > On Thu, Jan 9, 2014 at 10:13 PM, Mirko Friedenhagen
> > <mfriedenhagen@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> in the JaCoCo project (a Java code coverage library which uses a Java
> >> agent approach during runtime) we produce some false positives of
> >> uncovered code because of unreachable (e.g. private constructor of a
> >> util class) or synthetic java code (e.g. enum values()).
> >>
> >> As we inspect the class files only, we may not (or better do not want
> >> to) rely on parsing the source code for discovering such conditions.
> >> During some experiments we detected that different compilers (javac vs
> >> eclipse ecj) produce very different byte code in classes for the
> >> above. This might be the case for different versions of Sun/Oracle JDK
> >> or JDKs of other vendors as well. I already took a look at "Using
> >> Non-Javac Compilers" of the maven-compiler-plugin[1]
> >>
> >> Now my question:
> >> - What would be the best approach to produce JARs which contain class
> >> files of above mentioned false positives produced by the different
> >> compilers?
> >> - My first idea was to define a define a multi module project with a
> >> JAR module which will only produce a source jar, which will be
> >> unpacked as "generated-sources" in sibling modules which are then
> >> compiled by the different compilers.
> >>
> >> For additional ideas or caveats I would be grateful.
> >>
> >>
> >> Regards Mirko
> >> [0] https://github.com/jacoco/jacoco/wiki/FilteringOptions
> >> [1]
> >>
> http://maven.apache.org/plugins/maven-compiler-plugin/non-javac-compilers.html
> >> --
> >> http://illegalstateexception.blogspot.com/
> >> https://github.com/mfriedenhagen/ (http://osrc.dfm.io/mfriedenhagen)
> >> https://bitbucket.org/mfriedenhagen/
> >>
> >> --
> >> You received this message because you are subscribed to the Google
> Groups
> >> "JaCoCo Developers" group.
> >> To unsubscribe from this group and stop receiving emails from it, send
> an
> >> email to jacoco-dev+unsubscribe@googlegroups.com.
> >> For more options, visit https://groups.google.com/groups/opt_out.
> >
> >
> >
> >
> > --
> > Best regards,
> > Evgeny Mandrikov aka Godin <http://godin.net.ru>
> > http://twitter.com/_godin_
> >
> > --
> > You received this message because you are subscribed to the Google Groups
> > "JaCoCo Developers" group.
> > To unsubscribe from this group and stop receiving emails from it, send an
> > email to jacoco-dev+unsubscribe@googlegroups.com.
> > For more options, visit https://groups.google.com/groups/opt_out.
>
> --
> You received this message because you are subscribed to the Google Groups
> "JaCoCo Developers" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to jacoco-dev+unsubscribe@googlegroups.com.
> For more options, visit https://groups.google.com/groups/opt_out.
>



-- 
Best regards,
Evgeny Mandrikov aka Godin <http://godin.net.ru>
http://twitter.com/_godin_

--089e0149cedc84f7b404ef912e6b--

