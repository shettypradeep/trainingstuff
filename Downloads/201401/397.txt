From users-return-135297-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Jan 29 18:34:50 2014
Return-Path: <users-return-135297-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A561F10139
	for <apmail-maven-users-archive@www.apache.org>; Wed, 29 Jan 2014 18:34:50 +0000 (UTC)
Received: (qmail 92019 invoked by uid 500); 29 Jan 2014 18:34:45 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 91937 invoked by uid 500); 29 Jan 2014 18:34:45 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 91929 invoked by uid 99); 29 Jan 2014 18:34:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jan 2014 18:34:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vincent.latombe@gmail.com designates 209.85.214.54 as permitted sender)
Received: from [209.85.214.54] (HELO mail-bk0-f54.google.com) (209.85.214.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Jan 2014 18:34:41 +0000
Received: by mail-bk0-f54.google.com with SMTP id u14so1063834bkz.41
        for <users@maven.apache.org>; Wed, 29 Jan 2014 10:34:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=FhTQebdueimqm4AHhXrfCGjkhggKW7dhn4lXulWCSAw=;
        b=juGdyBoQ+VeAIhqfo7MI6SIAhuVdqqEDKgTxrfwOzE2DBEWWkF0aROW9hg8JJ0DNYh
         +K5/bFClwArfTH2lCqSpEkj0sPV5uYFL0rH7wBRdBFuMnaHIROQsCuWmSwuII6Uy6OUq
         g12pJD6Sbp+ke2sHsNOGhCARl+DqdVGgk586GQWND8h5t1ofzRfpTl2W0PDISfsOMAsN
         NTivYuwNaVZeZKVwvPQgq8K6CFEigf3u6eCIUvX34XCQ587EjOCWiSss8yOln8w3utCw
         ivXLg+wZeS4GA531PKAyTDyejDt+w2oXoBp3OSzYfiWT2606FmbRzDazjyFemP62/V93
         RMNA==
X-Received: by 10.204.172.145 with SMTP id l17mr16551bkz.26.1391020459901;
 Wed, 29 Jan 2014 10:34:19 -0800 (PST)
MIME-Version: 1.0
Received: by 10.204.232.207 with HTTP; Wed, 29 Jan 2014 10:33:59 -0800 (PST)
In-Reply-To: <CA+nPnMytiv6nsoY44ODWQtVCYp6Uqvib0xGx4gHHuQDj9=V9Qg@mail.gmail.com>
References: <58EAA08AF8232344ADDB2E31D4996BFD5483CDFA@SMAPEXCHIDAG3.prod.ad.merc.chicago.cme.com>
 <CA+nPnMytiv6nsoY44ODWQtVCYp6Uqvib0xGx4gHHuQDj9=V9Qg@mail.gmail.com>
From: Vincent Latombe <vincent.latombe@gmail.com>
Date: Wed, 29 Jan 2014 19:33:59 +0100
Message-ID: <CAH-zGCiVL8i0oOmoMUS69GOMqM-7BcaiDPYZxa72=x7V5vidkQ@mail.gmail.com>
Subject: Re: dependency plugin strangeness
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=bcaec52c5f5b63753004f1203054
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec52c5f5b63753004f1203054
Content-Type: text/plain; charset=UTF-8

Hi,

I have already seen such error.
It is caused by the combination of a managed dependency (through
dependencyManagement) defining a dependency with system scope + Maven 3 +
Sonar. The same with Maven 2.2.1 should work.
Though, I have never seen it directly in a dependency:tree execution; only
through a sonar analysis.

On my side, I got rid of the system scope usages.

Vincent


2014-01-29 Stephen Connolly <stephen.alan.connolly@gmail.com>

> The crucial detail was omitted... what version of Maven?
>
> I suspect it could be a transitive dependency with system scope causing a
> bug of some sort.
>
> Most likely if you switch to a different version of Maven the command will
> work... in which case you might be able to construct a test case to prove a
> regression.
>
> Touchstone versions of Maven to try are: 2.2.1, 3.0.4/3.0.5 and 3.1.1
>
> If you see the error on all three then it is something different... but
> still an important data point.
>
> More of the stack trace would help... ideally include a line or two above
> and below... there is often crucial details therein... if you need to hide
> GAV details, change the groupId's to something gibberish, e.g.
> com.foobar:foo-manchu:1.0-SNAPSHOT and other dummy GAVs
>
>
> On 28 January 2014 22:55, Lyons, Roy <Roy.Lyons@cmegroup.com> wrote:
>
> > So, I tried my google-fu first - and in general my google-fu is very very
> > strong...
> >
> > I've been fighting with this multi-module plan for some time now with the
> > developer who is reporting the issue to me.  The issue manifested itself
> as
> > part of a Sonar failure...  the funny thing is, that the failure was on a
> > dependenct tree resolution that Sonar was doing - so I had him try the
> > dependency plugin and perform a dependency:tree
> >
> > dependency tree failed us...  well, it probably isn't dependency plugin's
> > fault but I am at a loss as to what it is really dying on or why.
> >
> > I would absolutely love it if someone saw this and said "Oh yeah, I know
> > that issue.  Its a real pain.  They have XXX defined incorrectly in their
> > multimodule build so the dependency plugin is in a circular dependency
> > loop" (or something like that).  I have no idea if its a dependency loop,
> > was just an example.
> >
> > I can't share the poms because its all proprietary closed source stuff
> > (and I have to be careful about what is shared).  If this means that I
> dont
> > have enough info to help, I can live with that - and will continue to
> plow
> > forwards...  I just wanted to see if theres someone on the list who knows
> > exactly what I should be looking for to help shorten my investigation
> time.
> >
> > Here's an example of what dependency:tree is complaining about.
> >
> >
> >  mvn dependency:tree -Dverbose=true -DoutputFile=dependencies.txt -e -X
> >
> > urls[38] =
> >
> file:/C:/Users/thisguysuserid/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar
> > Number of foreign imports: 1
> > import: Entry[import  from realm ClassRealm[maven.api, parent: null]]
> > -----------------------------------------------------
> >
> >         at
> >
> org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:139)
> >         at
> >
> org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
> >         ... 19 more
> > Caused by: org.apache.maven.plugin.PluginContainerException: An API
> > incompatibility was encountered while executing
> > org.apache.maven.plugins:maven-dependency-plugin:2.8:tree:
> > java.lang.AbstractMethodError:
> >
> org.apache.maven.shared.dependency.tree.DependencyTreeResolutionListener.manageArtifactSystemPath(Lorg/apache/maven/artifact/Artifact;Lorg/apache/maven/artifact/Artifact;)V
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> > For additional commands, e-mail: users-help@maven.apache.org
> >
> >
>

--bcaec52c5f5b63753004f1203054--

