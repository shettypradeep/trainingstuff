From users-return-136703-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sun Jun 29 01:47:49 2014
Return-Path: <users-return-136703-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD50811055
	for <apmail-maven-users-archive@www.apache.org>; Sun, 29 Jun 2014 01:47:48 +0000 (UTC)
Received: (qmail 68243 invoked by uid 500); 29 Jun 2014 01:47:46 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 68163 invoked by uid 500); 29 Jun 2014 01:47:46 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 68151 invoked by uid 99); 29 Jun 2014 01:47:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jun 2014 01:47:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [24.37.79.202] (HELO smtp.artifact-software.com) (24.37.79.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jun 2014 01:47:41 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by smtp.artifact-software.com (Postfix) with ESMTP id E07066A657E
	for <users@maven.apache.org>; Sat, 28 Jun 2014 21:47:19 -0400 (EDT)
X-Virus-Scanned: amavisd-new at artifact-software.com
Received: from smtp.artifact-software.com ([127.0.0.1])
	by localhost (smtp.artifact-software.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id vo_bL0kQKIKc for <users@maven.apache.org>;
	Sat, 28 Jun 2014 21:47:19 -0400 (EDT)
Received: from [192.168.3.170] (unknown [192.168.3.170])
	by smtp.artifact-software.com (Postfix) with ESMTP id 94EB06A657D
	for <users@maven.apache.org>; Sat, 28 Jun 2014 21:47:19 -0400 (EDT)
Message-ID: <53AF701E.7080507@artifact-software.com>
Date: Sat, 28 Jun 2014 21:47:10 -0400
From: Ron Wheeler <rwheeler@artifact-software.com>
Reply-To: "users@maven.apache.org >> Maven Users List" <users@maven.apache.org>
Organization: Artifact Software
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:24.0) Gecko/20100101 Thunderbird/24.6.0
MIME-Version: 1.0
To: users@maven.apache.org
Subject: Re: AW: Artifact with different sets of dependencies switched by
 profiles
References: <fa95de47ea5e47d195c63717af3b2d02@DBXPR05MB237.eurprd05.prod.outlook.com> <CA+nPnMxBQptj9OS+8FLjBoodbq-qgDzLVVxnKoYqqXgsRfx28w@mail.gmail.com> <a060f35add5844a8a5a166043cb65765@DBXPR05MB237.eurprd05.prod.outlook.com>
In-Reply-To: <a060f35add5844a8a5a166043cb65765@DBXPR05MB237.eurprd05.prod.outlook.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

The solution that you suggested at the end of your message is the best.
Separate all the common code into a core project and have 2 projects 
that depend on it for producing the final artifacts for particular 
envoronments.

This may also help in  organizing your tests so that you clearly 
separate tests for the core software from tests that depend on one 
environment or the other.

It will certainly simplify your project for other developers who might 
not be familiar with both environments and have trouble sorting through 
files that do not apply to the environment that they know.

Ron

On 28/06/2014 6:26 PM, Christofer Dutz wrote:
> No worries :-)
>
> I was going through the options and I noticed this myself :-)
>
> But is there another option?
> I tried the pom dependency with classifier option, but that didn't work (I wasn't really expecting it to)
>
> Chris
>
> -----UrsprÃ¼ngliche Nachricht-----
> Von: Stephen Connolly [mailto:stephen.alan.connolly@gmail.com]
> Gesendet: Samstag, 28. Juni 2014 22:40
> An: Maven Users List
> Betreff: Re: Artifact with different sets of dependencies switched by profiles
>
> Noooooooo!!!
>
> Allowing people to define dependencies in profiles was one of the biggest mistakes we made in Model Version 4.0.0.
>
> The activation rules etc are *never* what they think you are once the dependency is resolved from the local repository cache.
>
> Please do no do this stupid thing just because we were stupid enough to leave it as an option.
>
>
> On 28 June 2014 19:24, Christofer Dutz <christofer.dutz@c-ware.de> wrote:
>
>> Hi,
>>
>> I am currently working on making the Apache Flex project able to
>> release as Maven artifacts. For that I have created a tool that
>> mavenizes a Flex SDK by generating poms and copying and renaming the
>> libraries it consists of. All is working nicely. In contrast to Java
>> in Flex you can sort of choose to use static linking (default) or
>> dynamic linking (rsl). In Flexmojos this is controlled by having a
>> maven scope of "rsl" for dynamically linked libraries.
>>
>> Static linking:
>>                  <dependency>
>>                      <groupId>org.apache.flex.framework</groupId>
>>                      <artifactId>spark</artifactId>
>>                      <version>4.12.1.20140427</version>
>>                      <type>swc</type>
>>                  </dependency>
>>
>> Dynamic linking:
>>                  <dependency>
>>                      <groupId>org.apache.flex.framework</groupId>
>>                      <artifactId>spark</artifactId>
>>                      <version>4.12.1.20140427</version>
>>                      <type>swc</type>
>>                      <scope>rsl</scope>
>>                  </dependency>
>>
>> Now I wanted to make it easier for people using Flex so I generated
>> two profiles in my poms. The default one active by default using
>> static linking and one "flex-rsl" using dynamic linking wherever possible.
>> I was thinking of enabling that second profile by setting a property:
>>
>> <?xml version="1.0" encoding="UTF-8" standalone="no"?> <project
>> xmlns="http://maven.apache.org/POM/4.0.0">
>>      <modelVersion>4.0.0</modelVersion>
>>
>>      <groupId>org.apache.flex</groupId>
>>      <artifactId>framework</artifactId>
>>      <version>4.12.1.20140427</version>
>>      <packaging>pom</packaging>
>>
>>      <profiles>
>>          <profile>
>>              <id>default</id>
>>
>>              <activation>
>>                  <activeByDefault>true</activeByDefault>
>>              </activation>
>>
>>              <dependencies>
>>
>>                  ... A lot of dependencies ...
>>
>>              </dependencies>
>>          </profile>
>>
>>          <profile>
>>              <id>flex-rsl</id>
>>
>>              <activation>
>>                  <property>
>>                      <name>flex.framework.scope</name>
>>                      <value>rsl</value>
>>                  </property>
>>              </activation>
>>
>>              <dependencies>
>>
>>                  ... A lot of dependencies ...
>>
>>              </dependencies>
>>          </profile>
>>      </profiles>
>> </project>
>>
>> Now I tried activating that second profile by setting that property in
>> the module referencing that pom artifact:
>>
>> <properties>
>>          <flex.version>4.12.1.20140427</flex.version>
>>          <!-- Turn on rsl linking of swc dependencies -->
>>          <flex.framework.scope>rsl</flex.framework.scope>
>> </properties>
>>
>> <dependencies>
>>                  <dependency>
>>                      <groupId>org.apache.flex</groupId>
>>                      <artifactId>framework</artifactId>
>>                      <version>${flex.version}</version>
>>                      <type>pom</type>
>>                  </dependency>
>> </dependencies>
>>
>> But it seems this doesn't work ... so my question is ... is it
>> possible to do what I want? If not ... is there a way I could achieve
>> this? After all it seems classifiers for pom modules don't seem to exist.
>> Or am I wrong here and I could simply generate several pom files
>> "framework-4.12.1.20140427.pom" and "framework-4.12.1.20140427-rsl.pom"?
>>
>> Chris
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org


-- 
Ron Wheeler
President
Artifact Software Inc
email: rwheeler@artifact-software.com
skype: ronaldmwheeler
phone: 866-970-2435, ext 102


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


