From users-return-136477-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sun Jun  1 23:30:08 2014
Return-Path: <users-return-136477-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 817A810DB9
	for <apmail-maven-users-archive@www.apache.org>; Sun,  1 Jun 2014 23:30:08 +0000 (UTC)
Received: (qmail 85793 invoked by uid 500); 1 Jun 2014 23:30:06 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 85702 invoked by uid 500); 1 Jun 2014 23:30:06 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 85694 invoked by uid 99); 1 Jun 2014 23:30:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2014 23:30:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [199.165.246.44] (HELO sea-mx-01.telecomsys.com) (199.165.246.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2014 23:30:02 +0000
Received: from SEA-EXCAS-1.telecomsys.com 
    (exc2010-local1.telecomsys.com [10.32.12.186]) by 
    sea-mx-01.telecomsys.com (8.14.5/8.14.5) with ESMTP id s51NTbns013674 
    (version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=OK) for 
    <users@maven.apache.org>; Sun, 1 Jun 2014 16:29:38 -0700
Received: from SEA-EXMB-2.telecomsys.com ([169.254.2.231]) by 
    SEA-EXCAS-1.telecomsys.com ([::1]) with mapi id 14.03.0174.001; Sun, 
    1 Jun 2014 16:29:37 -0700
From: James Leskovar <JLeskovar@telecomsys.com>
To: "users@maven.apache.org" <users@maven.apache.org>
Subject: sshexec difference in maven-antrun-plugin vs standalone Ant
Thread-Topic: sshexec difference in maven-antrun-plugin vs standalone Ant
Thread-Index: Ac998TTiRicjxDmuRLCpWWpYlPAfOQ==
Date: Sun, 1 Jun 2014 23:29:36 +0000
Message-ID: <53F410854C97444E94F8ABB6902A30510F6626BB@SEA-EXMB-2.telecomsys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
x-originating-ip: [10.32.12.134]
Content-Type: multipart/related; 
    boundary="_007_53F410854C97444E94F8ABB6902A30510F6626BBSEAEXMB2telecom_";
     type="multipart/alternative"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_007_53F410854C97444E94F8ABB6902A30510F6626BBSEAEXMB2telecom_
Content-Type: multipart/alternative; 
    boundary="_000_53F410854C97444E94F8ABB6902A30510F6626BBSEAEXMB2telecom_"

--_000_53F410854C97444E94F8ABB6902A30510F6626BBSEAEXMB2telecom_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

I'm trying to understand what appears to be a difference in the output capt=
ured in the outputproperty attribute of the sshexec task, when the Ant scri=
pt is called via maven-antrun-plugin vs being called by a stand-alone Ant i=
nstallation.
I'm launching an external Ant script like so:
<plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.7</version>
        ...
            <configuration>
              <target>
                <ant antfile=3D"build.xml" target=3D"build" />
              </target>
            </configuration>
        ...
</plugin>

build.xml looks like:
<?xml version=3D"1.0" encoding=3D"UTF-8"?>
<project>
  <target name=3D"build">
    <antversion property=3D"antversion"/>
    <echo>Using Ant v${antversion}</echo>
    <sshexec host=3D"ansades51" username=3D"emob" password=3D"emob" trust=
=3D"true" command=3D"echo hello" outputproperty=3D"ssh.cmd" />
    <echo>${ssh.cmd}</echo>
  </target>
</project>

When calling build.xml via Maven, the output I get is:
[INFO] --- maven-antrun-plugin:1.7:run (default) @ ant.test ---
[INFO] Executing tasks
main:
build:
     [echo] Using Ant v1.8.2
  [sshexec] Connecting to ansades51:22
  [sshexec] cmd : echo hello
hello
     [echo] echo hello : hello
[INFO] Executed tasks

When I call build.xml via ant on the command-line, the output I get instead=
 is:
F:\DevTools\workspaces\MLC\ant.test>ant build
Buildfile: F:\DevTools\workspaces\MLC\ant.test\build.xml

build:
     [echo] Using Ant v1.8.2
  [sshexec] Connecting to ansades51:22
  [sshexec] cmd : echo hello
  [sshexec] hello
     [echo] hello

BUILD SUCCESSFUL
Total time: 1 second

Notice how the ${ssh.cmd} property in the Maven case appears to have the co=
mmand prefixed with the output, whereas there is no such prefix in the stan=
dalone Ant case. Is this expected?
I'm actually calling a fairly large Ant script that uses sshexec with outpu=
tproperty in a bunch of places, and I'd much rather not have to change all =
of the sshexec calls to then have to grep out the command output.

Any help would be much appreciated,
Cheers,
James Leskovar
Software Engineer, Location Platforms
TeleCommunication Systems, Inc.

[ Address : TCS, iC Enterprise 1, Innovation Campus, Squires Way, Nth Wollo=
ngong, NSW, 2500, Australia ]
[ Tel : +61 2 4221 2940 ] [ Fax : +61 2 4221 2901 ]
[ Email : James.Leskovar@telecomsys.com<mailto:James.Leskovar@telecomsys.co=
m> ]
[TCS]<http://www.telecomsys.com/default.aspx>[Facebook]<https://www.faceboo=
k.com/pages/TCS/340389379402958>[Twitter]<https://twitter.com/TeleComSys>[L=
inkedIn]<http://www.linkedin.com/company/telecommunication-systems>


CONFIDENTIALITY NOTICE: The information contained in this message may be pr=
ivileged and/or confidential. If you are not the intended recipient, or res=
ponsible for delivering this message to the intended recipient, any review,=
 forwarding, dissemination, distribution or copying of this communication o=
r any attachment(s) is strictly prohibited. If you have received this messa=
ge in error, please notify the sender immediately, and delete it and all at=
tachments from your computer and network.

--_000_53F410854C97444E94F8ABB6902A30510F6626BBSEAEXMB2telecom_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii">
<meta name=3D"Generator" content=3D"Microsoft Word 12 (filtered medium)">
<!--[if !mso]><style>v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style><![endif]--><style><!--
/* Font Definitions */
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Gulim";
	panose-1:2 11 6 0 0 1 1 1 1 1;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-priority:99;
	mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-priority:99;
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
span.EmailStyle19
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"3074" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-US" link=3D"blue" vlink=3D"purple">
<div class=3D"WordSection1">
<p class=3D"MsoNormal">Hi all,<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">I'm trying to understand what appears to be a differ=
ence in the output captured in the outputproperty attribute of the sshexec =
task, when the Ant script is called via maven-antrun-plugin vs being called=
 by a stand-alone Ant installation.<o:p></o:p></p>
<p class=3D"MsoNormal">I'm launching an external Ant script like so:<o:p></=
o:p></p>
<p class=3D"MsoNormal">&lt;plugin&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;artif=
actId&gt;maven-antrun-plugin&lt;/artifactId&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;versi=
on&gt;1.7&lt;/version&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<o:p><=
/o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; &lt;configuration&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp; &lt;target&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;ant antfile=3D&quot;build.xml&qu=
ot; target=3D&quot;build&quot; /&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/target&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; &lt;/configuration&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<o:p><=
/o:p></p>
<p class=3D"MsoNormal">&lt;/plugin&gt;<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">build.xml looks like:<o:p></o:p></p>
<p class=3D"MsoNormal">&lt;?xml version=3D&quot;1.0&quot; encoding=3D&quot;=
UTF-8&quot;?&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&lt;project&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp; &lt;target name=3D&quot;build&quot;&gt;<o:p><=
/o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp; &lt;antversion property=3D&quot;a=
ntversion&quot;/&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp; &lt;echo&gt;Using Ant v${antversi=
on}&lt;/echo&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp; &lt;sshexec host=3D&quot;ansades5=
1&quot; username=3D&quot;emob&quot; password=3D&quot;emob&quot; trust=3D&qu=
ot;true&quot; command=3D&quot;echo hello&quot; outputproperty=3D&quot;ssh.c=
md&quot; /&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp; &lt;echo&gt;${ssh.cmd}&lt;/echo&g=
t;<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp; &lt;/target&gt;<o:p></o:p></p>
<p class=3D"MsoNormal">&lt;/project&gt;<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">When calling build.xml via Maven, the output I get i=
s:<o:p></o:p></p>
<p class=3D"MsoNormal">[INFO] --- maven-antrun-plugin:1.7:run (default) @ a=
nt.test ---<o:p></o:p></p>
<p class=3D"MsoNormal">[INFO] Executing tasks<o:p></o:p></p>
<p class=3D"MsoNormal">main:<o:p></o:p></p>
<p class=3D"MsoNormal">build:<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp; [echo] Using Ant v1.8.2<o:p=
></o:p></p>
<p class=3D"MsoNormal">&nbsp; [sshexec] Connecting to ansades51:22<o:p></o:=
p></p>
<p class=3D"MsoNormal">&nbsp; [sshexec] cmd : echo hello<o:p></o:p></p>
<p class=3D"MsoNormal">hello<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp; [echo] echo hello : hello<o=
:p></o:p></p>
<p class=3D"MsoNormal">[INFO] Executed tasks<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">When I call build.xml via ant on the command-line, t=
he output I get instead is:<o:p></o:p></p>
<p class=3D"MsoNormal">F:\DevTools\workspaces\MLC\ant.test&gt;ant build<o:p=
></o:p></p>
<p class=3D"MsoNormal">Buildfile: F:\DevTools\workspaces\MLC\ant.test\build=
.xml<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">build:<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp; [echo] Using Ant v1.8.2<o:p=
></o:p></p>
<p class=3D"MsoNormal">&nbsp; [sshexec] Connecting to ansades51:22<o:p></o:=
p></p>
<p class=3D"MsoNormal">&nbsp; [sshexec] cmd : echo hello<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp; [sshexec] hello<o:p></o:p></p>
<p class=3D"MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp; [echo] hello<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">BUILD SUCCESSFUL<o:p></o:p></p>
<p class=3D"MsoNormal">Total time: 1 second<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Notice how the ${ssh.cmd} property in the Maven case=
 appears to have the command prefixed with the output, whereas there is no =
such prefix in the standalone Ant case. Is this expected?<o:p></o:p></p>
<p class=3D"MsoNormal">I'm actually calling a fairly large Ant script that =
uses sshexec with outputproperty in a bunch of places, and I'd much rather =
not have to change all of the sshexec calls to then have to grep out the co=
mmand output.<span style=3D"font-family:&quot;Gulim&quot;,&quot;sans-serif&=
quot;"><o:p></o:p></span></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Any help would be much appreciated,<o:p></o:p></p>
<p class=3D"MsoNormal">Cheers,<o:p></o:p></p>
<p class=3D"MsoNormal"><b><span lang=3D"EN-AU" style=3D"font-size:8.0pt;fon=
t-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:black">James Leskov=
ar</span></b><span lang=3D"EN-AU" style=3D"font-size:8.0pt;font-family:&quo=
t;Arial&quot;,&quot;sans-serif&quot;;color:#767A7D"><br>
Software Engineer, Location Platforms</span><span style=3D"font-size:13.5pt=
;font-family:&quot;Segoe UI&quot;,&quot;sans-serif&quot;;color:black"><o:p>=
</o:p></span></p>
<p class=3D"MsoNormal"><span lang=3D"EN-AU" style=3D"font-size:8.0pt;font-f=
amily:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#767A7D">TeleCommunica=
tion Systems, Inc.<br>
<br>
[&nbsp;<b>Address</b>&nbsp;: TCS, iC Enterprise 1, Innovation Campus, Squir=
es Way, Nth Wollongong, NSW, 2500, Australia ]<br>
[&nbsp;<b>Tel</b>&nbsp;: &#43;61 2 4221 2940 ] [&nbsp;<b>Fax</b>&nbsp;: &#4=
3;61 2 4221&nbsp;2901 ]&nbsp;<br>
[&nbsp;<b>Email</b>&nbsp;: </span><span style=3D"color:black"><a href=3D"ma=
ilto:James.Leskovar@telecomsys.com"><span lang=3D"EN-AU" style=3D"font-size=
:8.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;">James.Leskovar=
@telecomsys.com</span></a></span><span lang=3D"EN-AU" style=3D"font-size:8.=
0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;color:#767A7D">&nb=
sp;]<o:p></o:p></span></p>
<p class=3D"MsoNormal"><a href=3D"http://www.telecomsys.com/default.aspx"><=
span style=3D"font-size:8.0pt;font-family:&quot;Arial&quot;,&quot;sans-seri=
f&quot;;text-decoration:none"><img border=3D"0" width=3D"40" height=3D"35" =
id=3D"Picture_x0020_1" src=3D"cid:image001.png@01CF7E45.066C0760" alt=3D"TC=
S"></span></a><a href=3D"https://www.facebook.com/pages/TCS/340389379402958=
"><span style=3D"font-size:8.0pt;font-family:&quot;Arial&quot;,&quot;sans-s=
erif&quot;;text-decoration:none"><img border=3D"0" width=3D"28" height=3D"2=
8" id=3D"Picture_x0020_2" src=3D"cid:image002.png@01CF7E45.066C0760" alt=3D=
"Facebook"></span></a><a href=3D"https://twitter.com/TeleComSys"><span styl=
e=3D"font-size:8.0pt;font-family:&quot;Arial&quot;,&quot;sans-serif&quot;;t=
ext-decoration:none"><img border=3D"0" width=3D"24" height=3D"24" id=3D"Pic=
ture_x0020_3" src=3D"cid:image003.gif@01CF7E45.066C0760" alt=3D"Twitter"></=
span></a><a href=3D"http://www.linkedin.com/company/telecommunication-syste=
ms"><span style=3D"font-size:8.0pt;font-family:&quot;Arial&quot;,&quot;sans=
-serif&quot;;text-decoration:none"><img border=3D"0" width=3D"24" height=3D=
"24" id=3D"Picture_x0020_4" src=3D"cid:image004.gif@01CF7E45.066C0760" alt=
=3D"LinkedIn"></span></a><span style=3D"font-size:13.5pt;font-family:&quot;=
Segoe UI&quot;,&quot;sans-serif&quot;;color:black"><o:p></o:p></span></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
<p><span style=3D"font-family:'Arial';font-size:8pt;">CONFIDENTIALITY NOTIC=
E: The information contained in this message may be privileged and/or confi=
dential. If you are not the intended recipient, or responsible for deliveri=
ng this message to the intended recipient, any review, forwarding, dissemin=
ation, distribution or copying of this communication or any attachment(s) i=
s strictly prohibited. If you have received this message in error, please n=
otify the sender immediately, and delete it and all attachments from your c=
omputer and network.</span></p></body>
</html>

--_000_53F410854C97444E94F8ABB6902A30510F6626BBSEAEXMB2telecom_--

--_007_53F410854C97444E94F8ABB6902A30510F6626BBSEAEXMB2telecom_--

