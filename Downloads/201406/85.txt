From users-return-136601-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Mon Jun 16 22:17:52 2014
Return-Path: <users-return-136601-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CA42A11CBF
	for <apmail-maven-users-archive@www.apache.org>; Mon, 16 Jun 2014 22:17:52 +0000 (UTC)
Received: (qmail 32028 invoked by uid 500); 16 Jun 2014 22:17:51 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 31940 invoked by uid 500); 16 Jun 2014 22:17:51 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 31928 invoked by uid 99); 16 Jun 2014 22:17:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2014 22:17:50 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2014 22:17:47 +0000
Received: by mail-wi0-f177.google.com with SMTP id r20so4846903wiv.4
        for <users@maven.apache.org>; Mon, 16 Jun 2014 15:17:23 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=yg6AlzCvG+ibLgwWtC3JJxXmewsYlstNdKsJHI5tZ9k=;
        b=NI4YD9gKVbXuf8uurfuMEyGCb/D1YDsorKwutASuPuPt//d/oJquo/Yc4TQZWNLjzE
         QDzQLZa+TdDBVMfqGcthOl/PmE6C4hKNHd5mtzwi2UqbQ5J0A9vjYBJKTz4uxECRz0r4
         ZtZ+zYh1YYzpdEVVoz976UVPUU1wd41GszI8pRKW3YXDB6pmpSFW45fRCmiTnhKu6E8U
         i7IUfvTrP6jbp7LQxvYs7nQXIwS4pMnAdogztAOB9NmD+z0Vc9BkScHW0hiHf5/DOxec
         vcxUNpBgo1dr6J7agF5bMoGSdF7MP0CzZ08ZQra6jR1fBAnbMmsfc4i3yYsmH7Jr6SBp
         LkVQ==
X-Gm-Message-State: ALoCoQm/cMIvvAtF5PhClUn6p8EaaK+Xgqrf4E+B3JdG6bcKstxS0zHQMbJKVKaBI4EQQKU01Hjj
MIME-Version: 1.0
X-Received: by 10.180.86.4 with SMTP id l4mr30657469wiz.61.1402957043578; Mon,
 16 Jun 2014 15:17:23 -0700 (PDT)
Received: by 10.216.235.74 with HTTP; Mon, 16 Jun 2014 15:17:23 -0700 (PDT)
X-Originating-IP: [192.48.8.20]
In-Reply-To: <CADN69y=ObJPqTSX7CpHdhUWLpfecvvXjf9Pon_H1MBbCrKUfwg@mail.gmail.com>
References: <CAEBcyzpnU08-mCEFDz5yrJD6K8UCcG6jxA6iL7sx4_Avc=Z7fQ@mail.gmail.com>
	<CAEBcyzpK_1SfJ6gVWBFYVJMxDC3m0Cwvp+FvKeqpV_6puevfQA@mail.gmail.com>
	<CAPkEcwjNmhvN9ZgW4FKe+wKGwMq+=2=dL9i5xHz6GiXrqYO3uQ@mail.gmail.com>
	<CAEBcyzr1am4wxPbRYGmSCdfJVj-9k=tvCJGjS=doW4X2m5KN-g@mail.gmail.com>
	<CAPkEcwiOy0cqFiCTx1k=K9gGKqu389_HvX8drWUp4uX2LS7iew@mail.gmail.com>
	<CAEBcyzqyyB0PDqg79LpSfJ9zwp2wrnJu+vd1tJhwxU9Y5+dV9w@mail.gmail.com>
	<CADN69y=ObJPqTSX7CpHdhUWLpfecvvXjf9Pon_H1MBbCrKUfwg@mail.gmail.com>
Date: Tue, 17 Jun 2014 08:17:23 +1000
Message-ID: <CAEBcyzpZD4kqVhtH3v0p7eTx0Y_uUC6piFCJ96pMfOAA6x_g2g@mail.gmail.com>
Subject: Re: Need to resolve the dependencies for a MavenArtifact
From: William Ferguson <william.ferguson@xandar.com.au>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=f46d04428f4237f39004fbfb64c3
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04428f4237f39004fbfb64c3
Content-Type: text/plain; charset=UTF-8

Thanks Curtis,

that method (#getArtifactsInTopologicalOrder) is not far from my own code
(they both use DependecyGraphBuilder to resolve the deps). But the first
parameter of that method is the MavenProject for which you want the
resolved dependencies, and that is the piece I am missing. I have an
Artifact and if I could convert it into a MavenProject then that approach
should work.

So if I can't resolve the dependencies for an Artifact directly, then
resolving an Artifact into it's MavenProject would be enough to get me
moving forward.

William


On Tue, Jun 17, 2014 at 7:55 AM, Curtis Rueden <ctrueden@wisc.edu> wrote:

> Hi William,
>
> > Am I even on the right path or is there a much more straight forward
> > way of getting the dependencies for the Artifact?
>
> My naive impression, having dabbled with writing Maven plugins without
> spending too much time doing it, is that there is a lot of copying and
> pasting going on. Find a plugin that does close to what you want, and steal
> blocks of code. As such, unfortunately, it may very well be that there is
> not an especially straightforward way.
>
> Anyway, your question reminds me of something similar (IIUC?) asked and
> answered by Laird Nelson awhile back:
>
>
> http://mail-archives.apache.org/mod_mbox/maven-users/201401.mbox/%3CCAHNdxu==eJv-fuX8aAuVvzrhkEAXsy=RV2AFoRZ+XuMtLkZnfw@mail.gmail.com%3E
>
>
> https://github.com/ljnelson/maven-artifacts/blob/master/src/main/java/com/edugility/maven/Artifacts.java#L80
>
> Maybe that code is helpful?
>
> Or if not, apologies for the noise.
>
> Regards,
> Curtis
>
>
> On Mon, Jun 16, 2014 at 4:40 PM, William Ferguson <
> william.ferguson@xandar.com.au> wrote:
>
> > I'm not looking for the dependencies of the current project.
> > I'm looking for the dependencies of a given artifact.
> >
> > Perhaps I'm not reading maven-dependecy-tree:build-classpath correctly,
> but
> > I don't see how it can be configured to provide that.
> >
> >
> > On Tue, Jun 17, 2014 at 4:32 AM, james northrup <
> northrup.james@gmail.com>
> > wrote:
> >
> > > what's not clear is how build-classpath doesn't give you the deps you
> > want.
> > >
> > >
> > >
> > > On Mon, Jun 16, 2014 at 1:23 AM, William Ferguson <
> > > william.ferguson@xandar.com.au> wrote:
> > >
> > > > Thanks James, but perhaps I wasn't clear.
> > > >
> > > > I need to be able to resolve the dependencies for a given artifact
> from
> > > > within my Mojo (ie within my plugin). That's the problem I am trying
> to
> > > > solve.
> > > >
> > > > William
> > > >
> > > >
> > > > On Mon, Jun 16, 2014 at 5:38 PM, james northrup <
> > > northrup.james@gmail.com>
> > > > wrote:
> > > >
> > > > > mvn dependency:build-classpath is tricky in my experience but i
> have
> > at
> > > > > least one script in guithub using it to launch a java service
> > withoutr
> > > > > maven assembly plugin or untoward grepping.
> > > > >
> > > > > https://github.com/jnorthrup/RelaxFactory/blob/master/bin/run.sh
> > > > >
> > > > >
> > > > > On Mon, Jun 16, 2014 at 12:21 AM, William Ferguson <
> > > > > william.ferguson@xandar.com.au> wrote:
> > > > >
> > > > > > Anyone?
> > > > > >
> > > > > >
> > > > > > On Sun, Jun 15, 2014 at 12:49 PM, William Ferguson <
> > > > > > william.ferguson@xandar.com.au> wrote:
> > > > > >
> > > > > > > I have a Mojo that needs to work with Maven 3.0.* and 3.1+
> > > > > > >
> > > > > > > In the Mojo I have an Artifact and I need to resolve it's
> > > > dependencies.
> > > > > > > How can/should I do it?
> > > > > > >
> > > > > > > If I can resolve the Artifact to a MavenProject then I can use
> > > > > > > DependencyGraphBuilder (from maven-dependency-tree) to
> construct
> > a
> > > > > graph
> > > > > > of
> > > > > > > the deps. But I'm struggling to make the Artifact to
> MavenProject
> > > > > > > conversion happen.
> > > > > > >
> > > > > > > I thought that If I could get a URL to the Artifact's POM file
> > > then I
> > > > > > > could use DefaultMavenRuntime (maven-runtime) to resolve the
> URL
> > > > into a
> > > > > > > MavenProject. But
> > > > > > >
> > > > > > >    1. I can't work out how to get a URL to the artifact's POM
> > file
> > > > (it
> > > > > > >    needs to handle both reactor deps and repo deps)
> > > > > > >    2. Even with a URL to the POM file, MavenRuntime#getProject)
> > is
> > > > > > >    returning null.
> > > > > > >
> > > > > > > Can someone please point me in the right direction?
> > > > > > > Am I even on the right path or is there a much more straight
> > > forward
> > > > > way
> > > > > > > of getting the dependencies for the Artifact?
> > > > > > >
> > > > > > > William
> > > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > > --
> > > > > Jim Northrup  *  (408) 837-2270 *
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > Jim Northrup  *  (408) 837-2270 *
> > >
> >
>

--f46d04428f4237f39004fbfb64c3--

