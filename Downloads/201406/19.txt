From users-return-136698-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sat Jun 28 20:40:07 2014
Return-Path: <users-return-136698-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 83CE211C7D
	for <apmail-maven-users-archive@www.apache.org>; Sat, 28 Jun 2014 20:40:07 +0000 (UTC)
Received: (qmail 77968 invoked by uid 500); 28 Jun 2014 20:40:05 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 77882 invoked by uid 500); 28 Jun 2014 20:40:05 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 77853 invoked by uid 99); 28 Jun 2014 20:40:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2014 20:40:04 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stephen.alan.connolly@gmail.com designates 74.125.82.179 as permitted sender)
Received: from [74.125.82.179] (HELO mail-we0-f179.google.com) (74.125.82.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2014 20:40:02 +0000
Received: by mail-we0-f179.google.com with SMTP id w62so6422222wes.24
        for <users@maven.apache.org>; Sat, 28 Jun 2014 13:39:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=X+bi55R+pJokanC0XYSZzpKbPOufgMBYBuhpscNRokA=;
        b=dsozTzFVneBdDQ1x+OzwYyrelJalVpHkgd+we1B/Rjxja6k08AvgHzarcGViy2qiKg
         uqyFF4Lpn1zB3X0iTHxe/Da4EDi6dIioGsJPg9HvJY+Bi+8Nwgs8sMAHtt5UelM7KkUd
         7QpDJ73vmnSPmdvwhqWkp/0Gx7TuB3nOSvs+c3GGoxfJw8r9aW9Ky2dQ1l+IOAYbxJ9P
         ZDl5u4QWCjfkgxHMK4EdqhDraBcwXimaGySzXv/TZShlOoeqoDIxsPpkvkPq4IUbiVUs
         tW6HyqfRAuj2eGZPbRUvwkVLfZHJMcI6lQdRVhFzbXAGqL3wp6H0BG02sk6lQ2POAcu/
         odAA==
MIME-Version: 1.0
X-Received: by 10.194.109.170 with SMTP id ht10mr14772708wjb.72.1403987978110;
 Sat, 28 Jun 2014 13:39:38 -0700 (PDT)
Received: by 10.194.134.8 with HTTP; Sat, 28 Jun 2014 13:39:38 -0700 (PDT)
In-Reply-To: <fa95de47ea5e47d195c63717af3b2d02@DBXPR05MB237.eurprd05.prod.outlook.com>
References: <fa95de47ea5e47d195c63717af3b2d02@DBXPR05MB237.eurprd05.prod.outlook.com>
Date: Sat, 28 Jun 2014 21:39:38 +0100
Message-ID: <CA+nPnMxBQptj9OS+8FLjBoodbq-qgDzLVVxnKoYqqXgsRfx28w@mail.gmail.com>
Subject: Re: Artifact with different sets of dependencies switched by profiles
From: Stephen Connolly <stephen.alan.connolly@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=047d7bf19884b44cec04fceb6c38
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7bf19884b44cec04fceb6c38
Content-Type: text/plain; charset=UTF-8

Noooooooo!!!

Allowing people to define dependencies in profiles was one of the biggest
mistakes we made in Model Version 4.0.0.

The activation rules etc are *never* what they think you are once the
dependency is resolved from the local repository cache.

Please do no do this stupid thing just because we were stupid enough to
leave it as an option.


On 28 June 2014 19:24, Christofer Dutz <christofer.dutz@c-ware.de> wrote:

> Hi,
>
> I am currently working on making the Apache Flex project able to release
> as Maven artifacts. For that I have created a tool that mavenizes a Flex
> SDK by generating poms and copying and renaming the libraries it consists
> of. All is working nicely. In contrast to Java in Flex you can sort of
> choose to use static linking (default) or dynamic linking (rsl). In
> Flexmojos this is controlled by having a maven scope of "rsl" for
> dynamically linked libraries.
>
> Static linking:
>                 <dependency>
>                     <groupId>org.apache.flex.framework</groupId>
>                     <artifactId>spark</artifactId>
>                     <version>4.12.1.20140427</version>
>                     <type>swc</type>
>                 </dependency>
>
> Dynamic linking:
>                 <dependency>
>                     <groupId>org.apache.flex.framework</groupId>
>                     <artifactId>spark</artifactId>
>                     <version>4.12.1.20140427</version>
>                     <type>swc</type>
>                     <scope>rsl</scope>
>                 </dependency>
>
> Now I wanted to make it easier for people using Flex so I generated two
> profiles in my poms. The default one active by default using static linking
> and one "flex-rsl" using dynamic linking wherever possible.
> I was thinking of enabling that second profile by setting a property:
>
> <?xml version="1.0" encoding="UTF-8" standalone="no"?>
> <project xmlns="http://maven.apache.org/POM/4.0.0">
>     <modelVersion>4.0.0</modelVersion>
>
>     <groupId>org.apache.flex</groupId>
>     <artifactId>framework</artifactId>
>     <version>4.12.1.20140427</version>
>     <packaging>pom</packaging>
>
>     <profiles>
>         <profile>
>             <id>default</id>
>
>             <activation>
>                 <activeByDefault>true</activeByDefault>
>             </activation>
>
>             <dependencies>
>
>                 ... A lot of dependencies ...
>
>             </dependencies>
>         </profile>
>
>         <profile>
>             <id>flex-rsl</id>
>
>             <activation>
>                 <property>
>                     <name>flex.framework.scope</name>
>                     <value>rsl</value>
>                 </property>
>             </activation>
>
>             <dependencies>
>
>                 ... A lot of dependencies ...
>
>             </dependencies>
>         </profile>
>     </profiles>
> </project>
>
> Now I tried activating that second profile by setting that property in the
> module referencing that pom artifact:
>
> <properties>
>         <flex.version>4.12.1.20140427</flex.version>
>         <!-- Turn on rsl linking of swc dependencies -->
>         <flex.framework.scope>rsl</flex.framework.scope>
> </properties>
>
> <dependencies>
>                 <dependency>
>                     <groupId>org.apache.flex</groupId>
>                     <artifactId>framework</artifactId>
>                     <version>${flex.version}</version>
>                     <type>pom</type>
>                 </dependency>
> </dependencies>
>
> But it seems this doesn't work ... so my question is ... is it possible to
> do what I want? If not ... is there a way I could achieve this? After all
> it seems classifiers for pom modules don't seem to exist.
> Or am I wrong here and I could simply generate several pom files
> "framework-4.12.1.20140427.pom" and "framework-4.12.1.20140427-rsl.pom"?
>
> Chris
>

--047d7bf19884b44cec04fceb6c38--

