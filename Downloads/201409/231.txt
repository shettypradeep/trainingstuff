From users-return-137360-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Sep 23 19:56:25 2014
Return-Path: <users-return-137360-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E9816112C5
	for <apmail-maven-users-archive@www.apache.org>; Tue, 23 Sep 2014 19:56:24 +0000 (UTC)
Received: (qmail 18329 invoked by uid 500); 23 Sep 2014 19:56:22 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 18248 invoked by uid 500); 23 Sep 2014 19:56:22 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 18235 invoked by uid 99); 23 Sep 2014 19:56:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2014 19:56:22 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stephen.alan.connolly@gmail.com designates 209.85.218.51 as permitted sender)
Received: from [209.85.218.51] (HELO mail-oi0-f51.google.com) (209.85.218.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Sep 2014 19:55:56 +0000
Received: by mail-oi0-f51.google.com with SMTP id x69so5214220oia.38
        for <users@maven.apache.org>; Tue, 23 Sep 2014 12:55:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=kIEP+gLyRAGDO3trpTT+oysVDUzT4CE12kPW1qT8XLM=;
        b=wd2G26j5QQ3H9fzZ140n49+cvIr7XnrH2V39yP5xK9Th3BCZh+wRUNb4FwQtqoA1P0
         Kd6BOahaGgMidImBv4Msx3Su+WyWFDZ+h7WKi+9B4nuCWP3R84G1i9Xs7XvLpxeZglvs
         Bvh2e7tD4VtIZZ58qKZQ8w3E3Qw5RYdDilewxkskQQtUxC0lJbLFbdg4NfDGhyJzY6u9
         Xpd0moDA+HXF9T/uq9hEWjV0oDaIKMivnr3WuicFDr5iZele74EOgECKi/3fxsx0nKkV
         98kh3vicodbt0GxdhG8/AByuB+Dm+PggSgSleHfpfEv/XCx+MZT7cmhTijX0mjDvgDZT
         xIAw==
MIME-Version: 1.0
X-Received: by 10.60.96.65 with SMTP id dq1mr2017085oeb.33.1411502154817; Tue,
 23 Sep 2014 12:55:54 -0700 (PDT)
Received: by 10.60.226.200 with HTTP; Tue, 23 Sep 2014 12:55:54 -0700 (PDT)
In-Reply-To: <CAKuK4uHt=upNZASGdZg2YTpkfkkn-Wd4Yb4+aQwrab3fhdi8bg@mail.gmail.com>
References: <CAKuK4uH7S5Z54van32ExnPu+_d8bP9BA-Vz-4BTK2QQ5My_KHQ@mail.gmail.com>
	<CADN69y=zCBy+XJs9V338GTr1FP9y30NVbfOU09SUKcjM6Masxg@mail.gmail.com>
	<CAMH6+axK==g5Gk26muHO1FKaKiRxdS=Ut70jP60sSda-8brRsg@mail.gmail.com>
	<CA+nPnMzYQmLcMz08GvYgFf4EDA9Ab_9w+veBokjUn-uiXnGZsw@mail.gmail.com>
	<CADN69y=FBRcT9y5NmGkJ1e0sTw5r8SmYgfAf70ZRBE+mQ8Acrg@mail.gmail.com>
	<CAMH6+awnfFY6P+iKABaxo+tsqCT3Ju6Xm-m31N8vc5nzNJ5YhQ@mail.gmail.com>
	<CADN69ynbp-Bn62ZOjVNn3Q0hYqyCQc9FCLF5dPu+9phGUNK4PQ@mail.gmail.com>
	<CA+nPnMyg+doZuQBZmD+mVNGSPfCeNeg7dqvdwsh1ODT3dXXm+g@mail.gmail.com>
	<CAKuK4uHt=upNZASGdZg2YTpkfkkn-Wd4Yb4+aQwrab3fhdi8bg@mail.gmail.com>
Date: Tue, 23 Sep 2014 20:55:54 +0100
Message-ID: <CA+nPnMwG8ksELK29VA4p33-TTXMhR+PJq8C8QUm63-fX7uijig@mail.gmail.com>
Subject: Re: usage with Jenkins
From: Stephen Connolly <stephen.alan.connolly@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=089e01227b6489a6d30503c0f47b
X-Virus-Checked: Checked by ClamAV on apache.org

--089e01227b6489a6d30503c0f47b
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Tuesday, 23 September 2014, Grover Blue <grover.blue@gmail.com> wrote:

> I'd like to weigh in on this.  The maven-based job type is great for quic=
k
> or single-dimensional project, especially when you know the scope will no=
t
> change.  I tend to prefer freestyle because of flexibility.
>
> In reality, the solution is to just have one project type with varied
> initialization types.  I'm pretty sure that's happening in the backend,


Ha! So not the case.

The evil job type sets up a remoting connection to within the maven process
and this lets Jenkins muck about.

Regular jobs fork a shell on the slave doing the "obvious" thing... Ie
Jenkins drives the build

Maven jobs have two back-to-back remoting channels and "drive" Jenkins to
an extent

When I say its evil, I'm not joking

but
> the details are hidden (needs confirmation).
>
> BTW, in order to have artifacts listed one has to enable artifact
> archiving, not publishing.
>
> Everything works now (except for the job stalling on deployment to a
> self-signed cert GF 4.1 installation.  :)
>
>
>
> On Tue, Sep 23, 2014 at 2:43 PM, Stephen Connolly <
> stephen.alan.connolly@gmail.com <javascript:;>> wrote:
>
> > FYI my aim is to supersede the evil job type with some enhanced reporti=
ng
> > in what is currently called the literate job type.
> >
> > That would mean you'd get the per-module reporting.
> >
> > The current evil job type's other "killer" feature is automatic
> downstream
> > job triggering... Which is actually broken as it does not take into
> account
> > the local repo that the -SNAPSHOTs may or may not have been deployed in=
to
> > and assumes that `package` is the same as `deploy` as far as triggering
> is
> > concerned as well as ignoring that deployment might be to a staging rep=
o,
> > so the artifacts may not be available downstream... However, despite
> being
> > fundamentally broken at every level, you would be surprised how many
> people
> > feel locked into the evil job type because of this...
> >
> > In short, there is so many issues with it that I cannot recommend its
> > use... The only semi useful feature from my PoV is per module reporting=
.
> >
> > (Sadly my day job has me having to support the evil job type from time =
to
> > time... Though usually those tickets get picked up by Kohsuke if I star=
t
> > another "evil job type" tirade ;-) )
> >
> > On Tuesday, 23 September 2014, Curtis Rueden <ctrueden@wisc.edu
> <javascript:;>> wrote:
> >
> > > Hi James,
> > >
> > > > I can no longer see "Deploy artifacts to Maven repository"
> > > > as a post-build action.
> > >
> > > Just add a build step that does "mvn deploy" or similar.
> > >
> > > > Dare I ask what I'm missing having chosen the full-fat option..?
> > >
> > > If you're asking what you cannot do with freeform jobs: I don't know =
of
> > > anything. I think the Maven-style job is just a convenience to get ve=
ry
> > > basic CI set up as quickly as possible, for people without much
> technical
> > > know-how.
> > >
> > > If you're asking for more details on limitations of the Maven-style
> job:
> > > it's been awhile, but IIRC my group had several problems. One such wa=
s
> > that
> > > the Jenkins Git plugin did not fire Maven-style jobs upon receiving t=
he
> > > push notification from GitHub. Another really serious problem is that
> you
> > > can't add arbitrary shell script as a post-build step. And needing to
> do
> > > this is, in my experience, extremely common.
> > >
> > > It wouldn't be that big of an issue if there were an easy way to late=
r
> > > "convert" a Maven-style job to a freestyle job should the need arise.
> But
> > > try a web search on that topic and you'll see what I mean about it
> being
> > a
> > > highly non-trivial problem.
> > >
> > > Regards,
> > > Curtis
> > >
> > > On Tue, Sep 23, 2014 at 8:56 AM, James Green <james.mk.green@gmail.co=
m
> <javascript:;>
> > > <javascript:;>>
> > > wrote:
> > >
> > > > News to me. Ironically I'm just setting up a new Jenkins job so tri=
ed
> > the
> > > > freeform style - I can no longer see "Deploy artifacts to Maven
> > > repository"
> > > > as a post-build action.
> > > >
> > > > Dare I ask what I'm missing having chosen the full-fat option..?
> > > >
> > > > On 23 September 2014 14:02, Curtis Rueden <ctrueden@wisc.edu
> <javascript:;>
> > > <javascript:;>> wrote:
> > > >
> > > > > The Maven style build will also lock you in to a small subset of
> > > > Jenkins's
> > > > > usual features. And when you eventually need a feature not
> available
> > > > with a
> > > > > Maven-style build, there is no conversion path from Maven-style t=
o
> > > > > Freestyle -- you have to recreate the job (losing the build histo=
ry
> > > > etc.).
> > > > >
> > > > > -Curtis
> > > > > On Sep 23, 2014 7:33 AM, "Stephen Connolly" <
> > > > > stephen.alan.connolly@gmail.com <javascript:;> <javascript:;>>
> > > > > wrote:
> > > > >
> > > > > > Freestyle does not mess with your build and change it from
> building
> > > the
> > > > > way
> > > > > > maven intends. Google "stephen's java adventures Jenkins maven
> > > > considered
> > > > > > evil" for a more detailed discussion
> > > > > >
> > > > > > On Tuesday, 23 September 2014, James Green <
> > james.mk.green@gmail.com <javascript:;>
> > > <javascript:;>>
> > > > > > wrote:
> > > > > >
> > > > > > > On 23 September 2014 02:23, Curtis Rueden <ctrueden@wisc.edu
> <javascript:;>
> > > <javascript:;>
> > > > > > > <javascript:;>> wrote:
> > > > > > > >
> > > > > > > >
> > > > > > > > Also, stay away from the Jenkins "Maven" style job. Freesty=
le
> > is
> > > > more
> > > > > > > > flexible and less buggy.
> > > > > > > >
> > > > > > >
> > > > > > > Based on ..?
> > > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Sent from my phone
> > > > > >
> > > > >
> > > >
> > >
> >
> >
> > --
> > Sent from my phone
> >
>
>
>
> --
> =E2=80=9CIf the American people ever allow private banks to control the i=
ssue of
> their currency, first by inflation, then by deflation, the banks...will
> deprive the people of all property until their children wake-up homeless =
on
> the continent their fathers conquered... The issuing power should be take=
n
> from the banks and restored to the people, to whom it properly belongs."
> -- Thomas Jefferson
>
> "Government big enough to supply everything...is big enough to take
> everything you have. The course of history shows that as a government
> grows, liberty decreases" --- Thomas Jefferson
>
> www.CampaignForLiberty.org
>


--=20
Sent from my phone

--089e01227b6489a6d30503c0f47b--

