From users-return-137372-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Sep 25 09:55:57 2014
Return-Path: <users-return-137372-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 784B711255
	for <apmail-maven-users-archive@www.apache.org>; Thu, 25 Sep 2014 09:55:57 +0000 (UTC)
Received: (qmail 43461 invoked by uid 500); 25 Sep 2014 09:55:55 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 43379 invoked by uid 500); 25 Sep 2014 09:55:55 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 43367 invoked by uid 99); 25 Sep 2014 09:55:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2014 09:55:54 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stephen.alan.connolly@gmail.com designates 209.85.214.171 as permitted sender)
Received: from [209.85.214.171] (HELO mail-ob0-f171.google.com) (209.85.214.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Sep 2014 09:55:50 +0000
Received: by mail-ob0-f171.google.com with SMTP id wp4so4679681obc.2
        for <users@maven.apache.org>; Thu, 25 Sep 2014 02:55:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=BetWZqVydpiG3RlaP3bt4IaMPlJd2SAr1WHcG4E+Xx8=;
        b=Nrmx5vc5isNg//YdgZSRDbYw92cXTZEjPj9s2Vcq3DG5/xQQAx2WQ8mGY7hM7G+xbI
         IIp51a9eLXlA3ZvXLpaiplGSziHUjOPJNs2bueb42o76vt0eECSbU0UmGWjy1WpDW48x
         0jpY6st0z6fnDFsuALy8q19ntVxiTUI36shqK2Kz98vfaJYiPdT9c2qBxwheKwDjtqlY
         JrYmc8sMVaB42hQLJ1On2vOnF3Humun8XFueiqqggJPCJn40u2PCn8B7pHMTSgdN0sLL
         sPX/fvfMBSUalaAU4PoECdhjbozOW9p4z0oztyigb73sP3ZfqI1ZPK9Bk7/Jw/u3Rc83
         gH0g==
MIME-Version: 1.0
X-Received: by 10.60.38.67 with SMTP id e3mr12561681oek.62.1411638929946; Thu,
 25 Sep 2014 02:55:29 -0700 (PDT)
Received: by 10.60.226.200 with HTTP; Thu, 25 Sep 2014 02:55:29 -0700 (PDT)
In-Reply-To: <5629A6219DB3E544AB84388D90149787482B883F@xmb-aln-x03.cisco.com>
References: <CAKuK4uH7S5Z54van32ExnPu+_d8bP9BA-Vz-4BTK2QQ5My_KHQ@mail.gmail.com>
	<CADN69y=zCBy+XJs9V338GTr1FP9y30NVbfOU09SUKcjM6Masxg@mail.gmail.com>
	<CAMH6+axK==g5Gk26muHO1FKaKiRxdS=Ut70jP60sSda-8brRsg@mail.gmail.com>
	<CA+nPnMzYQmLcMz08GvYgFf4EDA9Ab_9w+veBokjUn-uiXnGZsw@mail.gmail.com>
	<CADN69y=FBRcT9y5NmGkJ1e0sTw5r8SmYgfAf70ZRBE+mQ8Acrg@mail.gmail.com>
	<CAMH6+awnfFY6P+iKABaxo+tsqCT3Ju6Xm-m31N8vc5nzNJ5YhQ@mail.gmail.com>
	<CADN69ynbp-Bn62ZOjVNn3Q0hYqyCQc9FCLF5dPu+9phGUNK4PQ@mail.gmail.com>
	<CA+nPnMyg+doZuQBZmD+mVNGSPfCeNeg7dqvdwsh1ODT3dXXm+g@mail.gmail.com>
	<5629A6219DB3E544AB84388D90149787482B883F@xmb-aln-x03.cisco.com>
Date: Thu, 25 Sep 2014 10:55:29 +0100
Message-ID: <CA+nPnMzJmkUk5ziNaAtLu1TkVJF9KSJMYonrsK7fY-4AHWSGdQ@mail.gmail.com>
Subject: Re: usage with Jenkins
From: Stephen Connolly <stephen.alan.connolly@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=089e0122838af8b4120503e0cc79
X-Virus-Checked: Checked by ClamAV on apache.org

--089e0122838af8b4120503e0cc79
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 25 September 2014 08:53, James Nord (jnord) <jnord@cisco.com> wrote:

> Hi Stephen,
>
> I'm not sure why you think that per module reporting is the killer featur=
e.
>
>
Well any time we suggest switching to freestyle, the feedback we get is "oh
but we can't because we'd loose the per-module reports"


> For me I couldn=E2=80=99t give a hoot if I saw all reports from maven mod=
ules
> munged in a single report or spread across 100 different pages (in fact I
> generally use the top level aggregate anyway).
>
> What's the killer feature is
> 1) automatic (zero conf) finding of artifacts / test reports / findbugs
> report pickup etc etc...
>

Well James, you do know *you* could use templates (as you have the
enterprise plugins ;-) ) and give a locked down build.


>
> And also being able to lock down what the CI system will run to deploy...
> That is if some devs have control of their own builds when an enforcer ru=
le
> fails (your build is not repeatable) they will look up enforcer and add
> -Denforcer.skip
>

So you are missing the full context. The literate-api allows for different
providers. There are actually two providers in literate-api at present: the
README.md driven one and a .travis.yml driven one (with a very incomplete
parser... but I always like to test plugable APIs with more than one
implementation to make sure the design is right)

The way I see literate having advanced Maven support is via two modes:

1. Wherein you specify the literate commands as being for a "maven
shell"... something like

> # Build
>
> We build with Maven using the following phases
>
> ```mvnsh
> clean verify
> ```

When I add asciidoc support, that has a much nicer way to specify the synta=
x

2. Wherein you just tell it to use the pom.xml directly (i.e. a
literate-api pom based parser that is activated by just having a pom.xml in
the root (plus a marker file to say this is a buildable branch)

Then in the config for the literate job you would specify the goals you
want executed for that parser


> Yes they could add <phase>none</phase> to the enforcer config - but the
> ones that are intelligent enough to do that know better and fix the issue
> rather than hide it!
> Neither of the above are possible with the literate job type.
>

Not yet... but once I get the time to write some code...


>
> /James
>
>
> > -----Original Message-----
> > From: Stephen Connolly [mailto:stephen.alan.connolly@gmail.com]
> > Sent: 23 September 2014 19:44
> > To: Maven Users List
> > Subject: Re: usage with Jenkins
> >
> > FYI my aim is to supersede the evil job type with some enhanced
> reporting in
> > what is currently called the literate job type.
> >
> > That would mean you'd get the per-module reporting.
> >
> > The current evil job type's other "killer" feature is automatic
> downstream job
> > triggering... Which is actually broken as it does not take into account
> the local
> > repo that the -SNAPSHOTs may or may not have been deployed into and
> > assumes that `package` is the same as `deploy` as far as triggering is
> > concerned as well as ignoring that deployment might be to a staging
> repo, so
> > the artifacts may not be available downstream... However, despite being
> > fundamentally broken at every level, you would be surprised how many
> > people feel locked into the evil job type because of this...
> >
> > In short, there is so many issues with it that I cannot recommend its
> use...
> > The only semi useful feature from my PoV is per module reporting.
> >
> > (Sadly my day job has me having to support the evil job type from time =
to
> > time... Though usually those tickets get picked up by Kohsuke if I star=
t
> > another "evil job type" tirade ;-) )
> >
> > On Tuesday, 23 September 2014, Curtis Rueden <ctrueden@wisc.edu>
> > wrote:
> >
> > > Hi James,
> > >
> > > > I can no longer see "Deploy artifacts to Maven repository"
> > > > as a post-build action.
> > >
> > > Just add a build step that does "mvn deploy" or similar.
> > >
> > > > Dare I ask what I'm missing having chosen the full-fat option..?
> > >
> > > If you're asking what you cannot do with freeform jobs: I don't know
> > > of anything. I think the Maven-style job is just a convenience to get
> > > very basic CI set up as quickly as possible, for people without much
> > > technical know-how.
> > >
> > > If you're asking for more details on limitations of the Maven-style
> job:
> > > it's been awhile, but IIRC my group had several problems. One such wa=
s
> > > that the Jenkins Git plugin did not fire Maven-style jobs upon
> > > receiving the push notification from GitHub. Another really serious
> > > problem is that you can't add arbitrary shell script as a post-build
> > > step. And needing to do this is, in my experience, extremely common.
> > >
> > > It wouldn't be that big of an issue if there were an easy way to late=
r
> > > "convert" a Maven-style job to a freestyle job should the need arise.
> > > But try a web search on that topic and you'll see what I mean about i=
t
> > > being a highly non-trivial problem.
> > >
> > > Regards,
> > > Curtis
> > >
> > > On Tue, Sep 23, 2014 at 8:56 AM, James Green
> > <james.mk.green@gmail.com
> > > <javascript:;>>
> > > wrote:
> > >
> > > > News to me. Ironically I'm just setting up a new Jenkins job so
> > > > tried the freeform style - I can no longer see "Deploy artifacts to
> > > > Maven
> > > repository"
> > > > as a post-build action.
> > > >
> > > > Dare I ask what I'm missing having chosen the full-fat option..?
> > > >
> > > > On 23 September 2014 14:02, Curtis Rueden <ctrueden@wisc.edu
> > > <javascript:;>> wrote:
> > > >
> > > > > The Maven style build will also lock you in to a small subset of
> > > > Jenkins's
> > > > > usual features. And when you eventually need a feature not
> > > > > available
> > > > with a
> > > > > Maven-style build, there is no conversion path from Maven-style t=
o
> > > > > Freestyle -- you have to recreate the job (losing the build
> > > > > history
> > > > etc.).
> > > > >
> > > > > -Curtis
> > > > > On Sep 23, 2014 7:33 AM, "Stephen Connolly" <
> > > > > stephen.alan.connolly@gmail.com <javascript:;>>
> > > > > wrote:
> > > > >
> > > > > > Freestyle does not mess with your build and change it from
> > > > > > building
> > > the
> > > > > way
> > > > > > maven intends. Google "stephen's java adventures Jenkins maven
> > > > considered
> > > > > > evil" for a more detailed discussion
> > > > > >
> > > > > > On Tuesday, 23 September 2014, James Green
> > > > > > <james.mk.green@gmail.com
> > > <javascript:;>>
> > > > > > wrote:
> > > > > >
> > > > > > > On 23 September 2014 02:23, Curtis Rueden <ctrueden@wisc.edu
> > > <javascript:;>
> > > > > > > <javascript:;>> wrote:
> > > > > > > >
> > > > > > > >
> > > > > > > > Also, stay away from the Jenkins "Maven" style job.
> > > > > > > > Freestyle is
> > > > more
> > > > > > > > flexible and less buggy.
> > > > > > > >
> > > > > > >
> > > > > > > Based on ..?
> > > > > > >
> > > > > >
> > > > > >
> > > > > > --
> > > > > > Sent from my phone
> > > > > >
> > > > >
> > > >
> > >
> >
> >
> > --
> > Sent from my phone
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>

--089e0122838af8b4120503e0cc79--

