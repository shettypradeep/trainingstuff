From users-return-137336-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sun Sep 21 01:26:28 2014
Return-Path: <users-return-137336-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9BCFF113FA
	for <apmail-maven-users-archive@www.apache.org>; Sun, 21 Sep 2014 01:26:28 +0000 (UTC)
Received: (qmail 51288 invoked by uid 500); 21 Sep 2014 01:26:26 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 51202 invoked by uid 500); 21 Sep 2014 01:26:26 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 51188 invoked by uid 99); 21 Sep 2014 01:26:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Sep 2014 01:26:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mgainty@hotmail.com designates 65.55.116.36 as permitted sender)
Received: from [65.55.116.36] (HELO BLU004-OMC1S25.hotmail.com) (65.55.116.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Sep 2014 01:26:00 +0000
Received: from BLU172-W35 ([65.55.116.9]) by BLU004-OMC1S25.hotmail.com with Microsoft SMTPSVC(7.5.7601.22724);
	 Sat, 20 Sep 2014 18:25:59 -0700
X-TMN: [UCiP3MVrxr97P569GHOxoq8+8mS2K7qd]
X-Originating-Email: [mgainty@hotmail.com]
Message-ID: <BLU172-W354B586E7EB948FD5C198FAEB20@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_0739216e-1742-4c54-b634-f7ee8e59a664_"
From: Martin Gainty <mgainty@hotmail.com>
To: "users@maven.apache.org" <users@maven.apache.org>
Subject: RE: wagon ssh corrupts known_hosts?
Date: Sat, 20 Sep 2014 21:25:58 -0400
Importance: Normal
In-Reply-To:
 <CAAZU44kksE9fe-zyYenoeU42jzHABescQ3oxRdpga3HvBEo8Hw@mail.gmail.com>
References:
 <CAAZU44kksE9fe-zyYenoeU42jzHABescQ3oxRdpga3HvBEo8Hw@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 21 Sep 2014 01:25:59.0484 (UTC) FILETIME=[FFE1C7C0:01CFD53A]
X-Virus-Checked: Checked by ClamAV on apache.org

--_0739216e-1742-4c54-b634-f7ee8e59a664_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable




> From: burton@spinn3r.com
> Date: Sat=2C 20 Sep 2014 15:38:07 -0700
> Subject: wagon ssh corrupts known_hosts?
> To: users@maven.apache.org
>=20
> I have a step release process.
>=20
> Step 1 uses maven and the wagon-ssh plugin to push .debs and .jars to my
> maven and debian repositories via SSH and the scp:// wagon which uses jSc=
h.
>=20
> Step 2 uses ansible and SSH via OpenSSH=85 this is the step that breaks n=
ow
> because jSch writes a new known_hosts file.  SSH then prompts me every ti=
me
> to accept the new host key.
>=20
> This is prone to error and I  want to fix it.. I do releases in =91screen=
=92
> and if I forget to come back 5 minutes later to type =91yes=92 for all my=
 hosts
> it breaks the release.
MG>http://www.programcreek.com/java-api-examples/index.php?api=3Dcom.jcraft=
.jsch.ChannelExec
MG>automate JSch with a response file
try { //assuming local.rsp contains the 'canned answers'=0A=
		final File localFile =3D new java.io.File("local.rsp")=3B=0A=
		// Set input stream from local file=0A=
		setInputStream(new BufferedInputStream(new FileInputStream(localFile)))=
=3B=0A=
		final URL url =3D getRemoteFileURL()=3B

...................//later on when you need the response grab it from the c=
hannel inputStream
	        responseStream =3D channel.getInputStream()=3B=0A=
		channel.connect()=3B=0A=
		scpUtil.checkAck(responseStream)=3B=0A=
		sendFileNameAndSize(localFile=2C targetFileName=2C outs=2C responseStream=
)=3B

}
catch(Exception excp)
{

}
>=20
> Plus I want it automated for obvious reasons.=20
MG>a response file for Jsch would solve the requirement
>=20
>=20
>=20
> --=20
>=20
> Founder/CEO Spinn3r.com
> Location: *San Francisco=2C CA*
> blog: http://burtonator.wordpress.com
> =85 or check out my Google+ profile
> <https://plus.google.com/102718274791889610666/posts>
> <http://spinn3r.com>
 		 	   		  =

--_0739216e-1742-4c54-b634-f7ee8e59a664_--

