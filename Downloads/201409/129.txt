From users-return-137279-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sat Sep 13 12:37:16 2014
Return-Path: <users-return-137279-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 66C0511ABD
	for <apmail-maven-users-archive@www.apache.org>; Sat, 13 Sep 2014 12:37:16 +0000 (UTC)
Received: (qmail 50997 invoked by uid 500); 13 Sep 2014 12:37:14 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 50916 invoked by uid 500); 13 Sep 2014 12:37:14 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 50905 invoked by uid 99); 13 Sep 2014 12:37:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Sep 2014 12:37:14 +0000
X-ASF-Spam-Status: No, hits=3.2 required=5.0
	tests=FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mgainty@hotmail.com designates 65.55.116.26 as permitted sender)
Received: from [65.55.116.26] (HELO BLU004-OMC1S15.hotmail.com) (65.55.116.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Sep 2014 12:36:46 +0000
Received: from BLU172-W37 ([65.55.116.9]) by BLU004-OMC1S15.hotmail.com with Microsoft SMTPSVC(7.5.7601.22724);
	 Sat, 13 Sep 2014 05:36:45 -0700
X-TMN: [WXxfHUQVldj6/IU577SanPaRNsNgsAkX]
X-Originating-Email: [mgainty@hotmail.com]
Message-ID: <BLU172-W373B61E1CDC4EF793A2183AECA0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_12254016-583d-4d3b-b2f4-a837663bd720_"
From: Martin Gainty <mgainty@hotmail.com>
To: "users@maven.apache.org" <users@maven.apache.org>
Subject: RE: Maven clean plugin not deleting file
Date: Sat, 13 Sep 2014 08:36:44 -0400
Importance: Normal
In-Reply-To:
 <CAP+kwAVcLAWu9HTFiVdG1BOjg_0zOc5Ac=-Jjxwa2Md7Ln_3BQ@mail.gmail.com>
References:
 <CAP+kwAVcLAWu9HTFiVdG1BOjg_0zOc5Ac=-Jjxwa2Md7Ln_3BQ@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 13 Sep 2014 12:36:45.0082 (UTC) FILETIME=[60D2AFA0:01CFCF4F]
X-Virus-Checked: Checked by ClamAV on apache.org

--_12254016-583d-4d3b-b2f4-a837663bd720_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I need to takeoff soon so unfortunately I cannot put any time into investig=
ating until maybe tonite
but Here is the CleanMojo code:

execute()
{
</snip>
     try
        {
            File[] directories =3D getDirectories()=3B
            for ( int i =3D 0=3B i < directories.length=3B i++ )
            {
                File directory =3D directories[i]=3B
                if ( directory !=3D null )
                {
                    cleaner.delete( directory=2C null=2C followSymLinks=2C =
failOnError=2C retryOnError )=3B
//can we assume the directory remains intact?
                }
            }

            if ( filesets !=3D null )
            {
                for ( int i =3D 0=3B i < filesets.length=3B i++ )
                {
                    Fileset fileset =3D filesets[i]=3B
                    if ( fileset.getDirectory() =3D=3D null )
                    {
                        throw new MojoExecutionException( "Missing base dir=
ectory for " + fileset )=3B
                    }
                    GlobSelector selector =3D
                        new GlobSelector( fileset.getIncludes()=2C fileset.=
getExcludes()=2C fileset.isUseDefaultExcludes() )=3B
                    cleaner.delete( fileset.getDirectory()=2C selector=2C f=
ileset.isFollowSymlinks()=2C failOnError=2C
                                    retryOnError )=3B
                }
            }
        }
        catch ( IOException e )
        {
            throw new MojoExecutionException( "Failed to clean project: " +=
 e.getMessage()=2C e )=3B
        }

Fileset.java
public class Fileset
{

    private File directory=3B
    public File getDirectory()
    {
        return directory=3B
    }

at first blush maybe you didnt specify directory?

are there any other messages?

Martin=20



> Date: Sat=2C 13 Sep 2014 17:22:04 +0530
> Subject: Maven clean plugin not deleting file
> From: saurav.sarkar1@gmail.com
> To: users@maven.apache.org
>=20
> Hi All=2C
>=20
> I have two files in my directory like this:
>=20
>    - a.b.so
>    - a.so
>=20
> I want to delete only a.b.so.
>=20
> So here is my Maven clean plugin entry in my pom.xml file:
>=20
> <plugin>
> <artifactId>maven-clean-plugin</artifactId>
> <executions>
>   <execution>
>     <id>auto-clean</id>
>     <phase>prepare-package</phase>
>     <goals>
>       <goal>clean</goal>
>     </goals>
>     <configuration>
>     <excludeDefaultDirectories>true</excludeDefaultDirectories>
>      <filesets>
>         <fileset>
>       <directory>${project.build.directory}/libs/x86</directory>
>       <includes>
>         <include>*.so</include>
>       </includes>
>       <excludes>
>        <exclude>a.so</exclude>
>       <excludes>
>        <followSymlinks>false</followSymlinks>
>     </fileset>
>       </filesets>
>       <verbose>true</verbose>
>     </configuration>
>   </execution>
> </executions>
>=20
> Just for some backgorund of this=2C file a.b.so gets downloaded as a
> dependency then it gets renamed into a.so just before i execute the above
> entry. I copy file using maven depedency plugin. I don't know whether thi=
s
> affects the not deletion of a.b.so later on or not.
>=20
> In turn it always delete a.so. Even I tried including **/*=2C but it dele=
tes
> a.so every time.
>=20
> It never deletes a.b.so.
>=20
> cheers=2C
>=20
> Saurav
 		 	   		  =

--_12254016-583d-4d3b-b2f4-a837663bd720_--

