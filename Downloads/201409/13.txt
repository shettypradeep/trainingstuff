From users-return-137204-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Sat Sep  6 10:02:27 2014
Return-Path: <users-return-137204-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 297CE113F4
	for <apmail-maven-users-archive@www.apache.org>; Sat,  6 Sep 2014 10:02:27 +0000 (UTC)
Received: (qmail 21964 invoked by uid 500); 6 Sep 2014 10:02:25 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 21877 invoked by uid 500); 6 Sep 2014 10:02:25 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 21864 invoked by uid 99); 6 Sep 2014 10:02:25 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2014 10:02:25 +0000
Received: from localhost (HELO robertscholte) (127.0.0.1)
  (smtp-auth username rfscholte, mechanism login)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Sep 2014 10:02:24 +0000
Content-Type: text/plain; charset=iso-8859-15; format=flowed; delsp=yes
To: "Maven Users List" <users@maven.apache.org>
Subject: Re: Maven release plugin fail during javadoc generation
References: <000001cfc747$dc1123f0$94336bd0$@roulet@eloquant.com>
Date: Sat, 06 Sep 2014 12:02:23 +0200
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
From: "Robert Scholte" <rfscholte@apache.org>
Message-ID: <op.xlrfh9inkdkhrr@robertscholte>
In-Reply-To: <000001cfc747$dc1123f0$94336bd0$@roulet@eloquant.com>
User-Agent: Opera Mail/12.17 (Win32)

Hi,

the plugin causing this problem must be .... the maven-javadoc-plugin :)

the release:perform isn't that magic, you can do the same steps by hand:
- check out the code from tag (created by release:prepare)
- go to target/checkout
- execute "mvn deploy site-deploy" (site-deploy depends on the  
availability of a site under distributionManagement)

If you still have the target/checkout folder, run 'mvn site' and you'll  
see your project failing for the same reason as you mentioned.

There's a small difference between calling javadoc:javadoc and site. The  
first one will only get its configuration from the javadoc-plugin as  
specified in the build-section.
However, if the javadoc generation is generated as part of the site phase,  
the configuration is picked up from the reporting-section in the pom.xml.  
This can lead to different results.

Hope this helps you figuring out the real problem.

thanks,
Robert

Op Wed, 03 Sep 2014 09:22:33 +0200 schreef Sylvain Roulet  
<sylvain.roulet@eloquant.com>:

> Hello all,
>
>
> I've a project since several years and I had not problem to build it.
>
> I recently installed JDK1.7 on my Windows 7 and now my build fail during  
> mvn
> release:perform !
>
>
> The build fail saying "unmappable character for encoding utf-8".
>
> That's true as my source file are encoded in ISO-8859-1.
>
>
> So I've added <encoding> ISO-8859-1</encoding> => no change
>
> I try to use env variable : JAVA_TOOL_OPTIONS =  
> -Dfile.encoding=ISO-8859-1
> => no change
>
> <skip>true</skip> to not generate javadoc => no change...
>
> ...
>
> and a lot of other tests
>
>
> I finally realized that the option file generated in the folder
> /target/checkout/target/apidocs
>
> contains options saying that encoding is UTF-8 !
>
>
> I don't think it is a maven javadoc plugin problem as if I run mvn
> javadoc:javadoc, I runs successfully !
>
>
> Finnaly if I use JDK 1.6 it runs perfectly... But that's not what I want  
> to
> do.
>
>
> Does any one have any idea why options are not taking into account when
> maven release:perform is executed
>
>
> Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


