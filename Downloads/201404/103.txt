From users-return-136223-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Apr 22 06:54:29 2014
Return-Path: <users-return-136223-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B35F6111B9
	for <apmail-maven-users-archive@www.apache.org>; Tue, 22 Apr 2014 06:54:29 +0000 (UTC)
Received: (qmail 45129 invoked by uid 500); 22 Apr 2014 06:54:25 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 44686 invoked by uid 500); 22 Apr 2014 06:54:24 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 44672 invoked by uid 99); 22 Apr 2014 06:54:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2014 06:54:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aldrin@leal.eng.br designates 209.85.215.47 as permitted sender)
Received: from [209.85.215.47] (HELO mail-la0-f47.google.com) (209.85.215.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Apr 2014 06:54:19 +0000
Received: by mail-la0-f47.google.com with SMTP id pn19so3913869lab.20
        for <users@maven.apache.org>; Mon, 21 Apr 2014 23:53:56 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20130820;
        h=x-gm-message-state:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=8pqAVnz2JW9JkjwxDkD1todz2gtr6pwbDMFZLtCRy8E=;
        b=e2oiDTmb6x65EXBPbT5LdywMOleRXlnGA9ecm3/bsLebPPMd7hGa79eiLbMYLo7vlW
         raF6bNI16Cmf3jm2fuEIgId1KYm/WbhpuGAAiaVu5K0VaSURoV11Sfjh8/VyBMLIK0of
         f0IyQerY3upDQZyqm1V6XJ+dykvA+S/y9xYoPYphlciLLBcKP1WvL9Qrj73YnZbbZEyV
         AonUC3XJs9Nz7vfVVaugVJkO+64psk0qo0TJbQLYHez2aHS0Ma2Liw85lPJEBc2mMhk6
         vh0fF6OC/ZYTvDYHhqTAfD+eBEiTUm0rqKMka8WN9UCc7d+zp1p0ah/a00BXg3uUCuBp
         7jtA==
X-Gm-Message-State: ALoCoQmtlnURjFdgVY7K1YfdMJXpp43xQNjCHMbSVLiq1MGd3NbQ+rNSzBXAn60uckOmE8cZ6Xj9
X-Received: by 10.152.43.70 with SMTP id u6mr29916725lal.3.1398149635724; Mon,
 21 Apr 2014 23:53:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.152.27.202 with HTTP; Mon, 21 Apr 2014 23:53:15 -0700 (PDT)
X-Originating-IP: [189.82.60.217]
In-Reply-To: <CAAqB__v0TwN+kuL-QYeVQczhX3t+mmd58StYJMtaytFx0ZjnQA@mail.gmail.com>
References: <CAAqB__v0TwN+kuL-QYeVQczhX3t+mmd58StYJMtaytFx0ZjnQA@mail.gmail.com>
From: Aldrin Leal <aldrin@leal.eng.br>
Date: Tue, 22 Apr 2014 03:53:15 -0300
Message-ID: <CALpo8Nsa4rRpoF4vbpMjJQvOAYm7mh7Q-qiv4x2-6wg9Rk9WGQ@mail.gmail.com>
Subject: Re: Generating war and Jar from same codebase
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=001a11c352a461679b04f79c1431
X-Virus-Checked: Checked by ClamAV on apache.org

--001a11c352a461679b04f79c1431
Content-Type: text/plain; charset=UTF-8

I believe the Tomcat Plugin offers a way to create a fat jar with tomcat +
your deps.

http://tomcat.apache.org/maven-plugin-2.2/executable-war-jar.html

Wouldn't it help perhaps?

--
-- Aldrin Leal, <aldrin@leal.eng.br>
Master your EC2-fu! Get the latest ekaterminal public beta
http://www.ingenieux.com.br/products/ekaterminal/


On Mon, Apr 21, 2014 at 9:18 PM, Narayanan K <knarayanan88@gmail.com> wrote:

> Hi
>
> We have a default pom file with packaging "war" for our codebase.
>
> From the same code base we also want to generate a normal jar and a
> fat jar with dependencies.
>
> Currently solution that has been implemented is another pom-jar.xml
> file that has the packaging as jar and maven-assembly-plugin to
> generate the jar with dependencies. We use mvn install -f pom-jar.xml.
>
> But we are in a situation where if any new dependency is added to
> pom.xml, we need to add to pom-jar.xml as well as it is the same
> codebase.
>
> To avoid this we thought of couple of solutions -
>
> 1. Add maven-jar-plugin and maven-assembly-plugin to the default pom
> with packaging war - so it generates a war file, a normal jar file and
> fat jar out of the same pom. So we can do away with the pom-jar.xml.
>
> Not sure if this is a good solution. We tried this, but this is
> working well only in maven 3.0.4. The assembly plugin is not working
> well with Maven 2 (which is in our build environment) while generating
> the fat jar.
>
> 2. Have a parent pom and put all the dependencies and plugins in that
> and have 2 child poms in the same codebase with different names
> inherit from parent pom, one that has packaging of war that generates
> war file and the other child pom has packaging jar with maven assembly
> plugin to generate both normal and fat jar. And all new dependencies
> need to be added only to parent pom.
>
> This solution will make us have 3 pom files in codebase, doesnt look
> very elegant, but will solve our dependency management issues between
> the 2 packaging.
>
>
> Are these good solutions? Is there any other good solution available
> for this scenario ?
>
>
> Regards
> Narayanan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>
>

--001a11c352a461679b04f79c1431--

