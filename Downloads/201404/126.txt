From users-return-136277-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Tue Apr 29 14:44:55 2014
Return-Path: <users-return-136277-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C271E10D87
	for <apmail-maven-users-archive@www.apache.org>; Tue, 29 Apr 2014 14:44:55 +0000 (UTC)
Received: (qmail 12356 invoked by uid 500); 29 Apr 2014 14:44:50 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 12270 invoked by uid 500); 29 Apr 2014 14:44:49 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 12261 invoked by uid 99); 29 Apr 2014 14:44:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2014 14:44:49 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of solomax666@gmail.com designates 209.85.214.170 as permitted sender)
Received: from [209.85.214.170] (HELO mail-ob0-f170.google.com) (209.85.214.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Apr 2014 14:44:45 +0000
Received: by mail-ob0-f170.google.com with SMTP id vb8so342008obc.29
        for <users@maven.apache.org>; Tue, 29 Apr 2014 07:44:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=oZeW+KNfQypCrWq0JbsK0M4Sj3uOvlg86rG5rmwskB8=;
        b=mfyONYQvpuUSwAhvfQXxMnoTfYux/ik5vEAGgESdEYC9TJMwGe1/DyGWljF0tCED0y
         lhOcSbqt5mviHiSffeDK8LjhkeWL/JIOGUING+vDnN+8wQN1zUrd1Wx4kE8L7MZlOF6u
         JkULZL7DjnF43RYmCUAk9YHW6xu8hj45OrtbYFi9FnC8Xif/EZQY0uOLGhppkWwnRZeC
         +HV0DJ2SVxUiCt1vBf1mB+c1G0wc7PRIy0Om7G/vyksd1JrgFFCDTjIDq0k2Q6Razy9D
         ErTQn+AZ9+aslF28DpRwYnQ1QsFy7p/BB6J35itRf5aJaXgGPOLwGeHGwzb3nCdPzCBe
         YKug==
MIME-Version: 1.0
X-Received: by 10.182.75.225 with SMTP id f1mr2252459obw.66.1398782664650;
 Tue, 29 Apr 2014 07:44:24 -0700 (PDT)
Received: by 10.182.254.41 with HTTP; Tue, 29 Apr 2014 07:44:24 -0700 (PDT)
In-Reply-To: <535FB673.7040601@artifact-software.com>
References: <CAJmbs8i6vn2P9rTyUCCF5Gu0rQNCDkf81k4Sn1ujEbeVjrOxHA@mail.gmail.com>
	<CANWgJS7OYG_oKw5Z1o2VONVRcGDGKZ4_BE++ZYFoZzZ=r-vpWA@mail.gmail.com>
	<CAJmbs8gDibA9rzFLpZ8m=hBO1pSEnrKNjgPP8mh+W3A7Td6Kvg@mail.gmail.com>
	<5321B041.2090001@artifact-software.com>
	<CAJmbs8i5wMNr6=rNgjF5DCjnwOWFzCg=-90gZ5Y8KL-T_M6TOg@mail.gmail.com>
	<CANWgJS48UZ_o-QC=i8wEiwcGyxso-Bsy=VZ=+zyVit-rfqUG8g@mail.gmail.com>
	<5321D2CF.6070505@artifact-software.com>
	<CAJmbs8i673jQbY=5+aP55-PbUY1URFrNWYOoweQ4Uou5XmcN=w@mail.gmail.com>
	<8ACB365C-AAB8-4A78-BABC-239D465DA8E3@gold-family.us>
	<CAJmbs8iV19frf8KU1Ya7M4kNUS8XWZsOXbJFFBLWvK_SyAJgAw@mail.gmail.com>
	<535FB673.7040601@artifact-software.com>
Date: Tue, 29 Apr 2014 21:44:24 +0700
Message-ID: <CAJmbs8jBUguX0ipU1T1y2kAF+1uNwCuzG2J93RWpkYBYeSdxqQ@mail.gmail.com>
Subject: Re: Help with converting existing ant build to maven is required - forking
From: Maxim Solodovnik <solomax666@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=001a11c1f3ded835f604f82f77fa
X-Virus-Checked: Checked by ClamAV on apache.org

--001a11c1f3ded835f604f82f77fa
Content-Type: text/plain; charset=UTF-8

Hello Ron,

I'll take a look at izPack as an alternative to assembly plugin (which
seems to be able to create artifact similar to the current being created by
ant)

Currently I'm trying to build all jars/war/swf files need to be packed (by
assembly plugin or izPack)

Here is the stripped output of my current maven build:
http://pastebin.com/XvbA9yGM
As you can see, after normal build all projects are being forked:

   1. [INFO]
   >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
   2. [INFO] Forking Openmeetings Util 3.1.0-SNAPSHOT
   3. [INFO]
   >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
   4.

etc.

if I'm building single project using:
mvn clean install -pl openmeetings-web -am
I see no forking

Will appreciate any help on this


On Tue, Apr 29, 2014 at 9:25 PM, Ron Wheeler <rwheeler@artifact-software.com
> wrote:

> Can you describe the "forking" Maven problem in more detail.
> What does it do that you don't want and what does it not do that you need.
>
> Is there anything about your build that is different from the thousands of
> projects that use Maven to build Tomcat applications?
>
> Have you looked at using Maven to build an installer with izPack.
> This will let you use Maven to build the components and use the maven
> izPack plug-in to build a user-friendly deployment tool that lets a system
> admin install all of your components in the "right" places with the
> required permissions, initialization, etc. that may be required.
>
> Ron
>
> On 29/04/2014 10:13 AM, Maxim Solodovnik wrote:
>
>> Thanks Russ!
>>
>> I was hoping there is a way to avoid specifying parent version in every
>> sub-project.
>> But it seems to be "Maven way" :)
>>
>> Maybe you know how to manage project forking? My projects are being build
>> several times and the result of building parent project is unpredictable
>> for whatever reason :(
>>
>>
>> On Tue, Apr 29, 2014 at 9:04 PM, Russell Gold <russ@gold-family.us>
>> wrote:
>>
>>  HI Maxim,
>>>
>>> Here is how I do child projects:
>>>
>>>      <parent>
>>>          <groupId>com.meterware.totalizer</groupId>
>>>          <artifactId>totalizer</artifactId>
>>>          <version>1.0-SNAPSHOT</version>
>>>          <relativePath>..</relativePath>
>>>      </parent>
>>>
>>>      <artifactId>server</artifactId>
>>>
>>>
>>> Note that I am specifying the parent project, but neither the group nor
>>> the version for the child project - just the artifactId. The others are
>>> automatically inherited.
>>>
>>> Regards,
>>> Russ
>>>
>>> On Apr 26, 2014, at 3:38 AM, Maxim Solodovnik <solomax666@gmail.com>
>>> wrote:
>>>
>>>  Hello All,
>>>>
>>>> sorry for the keeping silence too long :)
>>>> finally I was able to start migration and more questions are come up: :)
>>>>
>>>> 1) Is there any way to use parent project version in child projects? I
>>>> currently use variable for this [1] but it results too many warnings
>>>>
>>>> 2) I have lots of "Forking PROJECT VERSION" and same tasks are performed
>>>> again and again :( is there any way to disable forking?
>>>>
>>>> 3) somehow task in phase "process-test-resources" is executed even if
>>>> "-DskipTests=true" is specified:
>>>> mvn eclipse:eclipse -DskipTests=true
>>>> Or in case of eclipse:eclipse it is expected behavior?
>>>>
>>>> 4) While running "mvn site" I get lots of
>>>> Caused by: java.lang.ClassNotFoundException:
>>>> org.sonatype.aether.version.VersionConstraint
>>>> at
>>>>
>>>>  org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(
>>> SelfFirstStrategy.java:50)
>>>
>>>> I have tried many solutions from the google none of them are working :(
>>>>
>>>>
>>>> solomax@solomax-laptop:~/work/openmeetings/trunk/singlewebapp$ mvn
>>>>
>>> -version
>>>
>>>> Apache Maven 3.2.1 (ea8b2b07643dbb1b84b6d16e1f08391b666bc1e9;
>>>> 2014-02-15T00:37:52+07:00)
>>>> Maven home: /opt/maven
>>>> Java version: 1.7.0_51, vendor: Oracle Corporation
>>>> Java home: /opt/jdk1.7.0_51/jre
>>>> Default locale: en_US, platform encoding: UTF-8
>>>> OS name: "linux", version: "3.13.0-24-generic", arch: "amd64", family:
>>>> "unix"
>>>>
>>>>
>>>> Thanks in advance :)
>>>>
>>>>
>>>>
>>>> On Thu, Mar 13, 2014 at 10:46 PM, Ron Wheeler <
>>>> rwheeler@artifact-software.com> wrote:
>>>>
>>>>  Good approach.
>>>>> Ron
>>>>>
>>>>> On 13/03/2014 9:58 AM, Baptiste Mathus wrote:
>>>>>
>>>>>  Well, though I agree Maven isn't designed to be an end-user tool,
>>>>>>
>>>>> using it
>>>
>>>> to build the end-user distribution is actually totally supported.
>>>>>> IMO, if what you're trying to do is building your product from some
>>>>>> sources
>>>>>> and binaries, then Maven can obviously do it.
>>>>>>
>>>>>> If what you need for production is an installer, then creating an
>>>>>> installer
>>>>>> using izpack is indeed a good idea, but you would just build that
>>>>>> installer
>>>>>> during your Maven build (http://izpack.codehaus.org/
>>>>>> izpack-maven-plugin/e.g.).
>>>>>>
>>>>>> You seem to actually have two kind of phases:
>>>>>> * the first one, typically compile and package your sources using
>>>>>>
>>>>> binaries
>>>
>>>> coming from a repo manager (be it a corporately managed one, or
>>>>>>
>>>>> directly
>>>
>>>> from Central)
>>>>>> * the second one, creating the end-user distribution, is typically
>>>>>> done
>>>>>> with Maven using maven-assembly-plugin.
>>>>>>
>>>>>> Don't hesitate to ask questions, because I don't think we've gone so
>>>>>>
>>>>> far
>>>
>>>> until now to understand your building steps.
>>>>>>
>>>>>> Cheers
>>>>>>
>>>>>>
>>>>>> 2014-03-13 14:24 GMT+01:00 Maxim Solodovnik <solomax666@gmail.com>:
>>>>>>
>>>>>> Thanks Ron,
>>>>>>
>>>>>>> I'll take a look at it, but I'm afraid distribute application in
>>>>>>> "partially
>>>>>>> compiled state" is not an option.
>>>>>>> Currently it works out of the box and this is the requirement.
>>>>>>>
>>>>>>> Will try to study maven and postpone the migration for now
>>>>>>>
>>>>>>>
>>>>>>> On Thu, Mar 13, 2014 at 8:18 PM, Ron Wheeler <
>>>>>>> rwheeler@artifact-software.com
>>>>>>>
>>>>>>>  wrote:
>>>>>>>> IMHO, Maven is a software build tool and trying to make it a
>>>>>>>> installation
>>>>>>>> tool is much too hard.
>>>>>>>>
>>>>>>>> You might find that your life will be a lot easier with IzPack as
>>>>>>>> the
>>>>>>>>
>>>>>>>>  tool
>>>>>>>
>>>>>>>  to create your installer.
>>>>>>>> It will allow you to package up your maven artifacts with other
>>>>>>>> resources
>>>>>>>> into different OS-specific installers that can be distributed
>>>>>>>> easily.
>>>>>>>> It supports install time execution of your procedures so that you
>>>>>>>> can
>>>>>>>> start RED-5 or execute the flex processes required to build and
>>>>>>>>
>>>>>>> install
>>>
>>>> the
>>>>>>>
>>>>>>>  Flash assets.
>>>>>>>>
>>>>>>>>
>>>>>>>> Ron
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> On 13/03/2014 4:51 AM, Maxim Solodovnik wrote:
>>>>>>>>
>>>>>>>> Hello Baptiste,
>>>>>>>>
>>>>>>>>> Thanks for your quick reply!
>>>>>>>>>
>>>>>>>>> Red5-server is "custom tomcat" (zip/tgz with scripts, libraries,
>>>>>>>>> configs
>>>>>>>>> etc.).
>>>>>>>>> We need to pack it in our distribution, not sure if it can be done
>>>>>>>>>
>>>>>>>>>  "Maven
>>>>>>>> way" :(
>>>>>>>>
>>>>>>>>> 2) tgz contains flex based Flash compiler with all necessary
>>>>>>>>>
>>>>>>>> libraries
>>>
>>>> and
>>>>>>>> binaries necessary to build Flash part of our application.
>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On Thu, Mar 13, 2014 at 5:15 AM, Baptiste Mathus <ml@batmat.net>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>   IIUC, your project openmeetings depends on red5 libraries.
>>>>>>>>>
>>>>>>>>>  About your questions:
>>>>>>>>>>
>>>>>>>>>> 1) Not actually a Maven issue, but you seem to think the way to go
>>>>>>>>>>
>>>>>>>>> it
>>>
>>>> to
>>>>>>>>>
>>>>>>>> build that dependency. As the project is ASLv2, you would far better
>>>>>>>>
>>>>>>>>> make
>>>>>>>>>
>>>>>>>> sure/ask it be uploaded to Maven Central. Then just just the
>>>>>>>>
>>>>>>>>> <dependency>
>>>>>>>>>
>>>>>>>> in a normal way/
>>>>>>>>
>>>>>>>>> Maven is actually very straightforward if you follow the Maven Way
>>>>>>>>>>
>>>>>>>>>>  (yeah,
>>>>>>>>>
>>>>>>>> sounds like a sect somehow, you may think ;-)).
>>>>>>>>
>>>>>>>>> 2) Once again, what does contain that tgz? If it contains jars and
>>>>>>>>>>
>>>>>>>>> so
>>>
>>>> on,
>>>>>>>>>
>>>>>>>> then forget about downloading and decompressing it during your buil.
>>>>>>>>
>>>>>>> Or
>>>
>>>> you're gonna a world of despair. Just upload those libs under some
>>>>>>>>>> sensible
>>>>>>>>>> coordinates in a corporate (or better, in Maven Central if the
>>>>>>>>>>
>>>>>>>>> project
>>>
>>>> is
>>>>>>>>>
>>>>>>>> OSS), and add the dependency.
>>>>>>>>
>>>>>>>>> Please ask more questions/give more precisions if you want more
>>>>>>>>>> precise
>>>>>>>>>> help.
>>>>>>>>>>
>>>>>>>>>> HTH
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> 2014-03-12 17:51 GMT+01:00 Maxim Solodovnik <solomax666@gmail.com
>>>>>>>>>>
>>>>>>>>> :
>>>>
>>>>>   Hello All,
>>>>>>>>>>
>>>>>>>>>>  I'm new to maven and not very familiar with all its plugins.
>>>>>>>>>>>
>>>>>>>>>>> I need to move project [1] from ant+ivy to maven
>>>>>>>>>>> The problems are:
>>>>>>>>>>>
>>>>>>>>>>> 1) this project is build on top of [2] maven project (we need the
>>>>>>>>>>>
>>>>>>>>>>>  exact
>>>>>>>>>>
>>>>>>>>> structure and all libraries from this project) *[first problem: i
>>>>>>>>
>>>>>>>>> don't
>>>>>>>>>>
>>>>>>>>> know how to do it]*
>>>>>>>>
>>>>>>>>>         I did it using ant as follows:
>>>>>>>>>>>         a) using SVN download the project sources
>>>>>>>>>>>         b) build it using maven
>>>>>>>>>>>         c) unpack artifact and use it's structure in my build
>>>>>>>>>>>
>>>>>>>>>>> Currently this project was moved to git and I was hoping it will
>>>>>>>>>>>
>>>>>>>>>> be
>>>
>>>> possible to using maven scm:git for this, not sure how :(
>>>>>>>>>>>
>>>>>>>>>>> 2) this project need to download tgz file with required
>>>>>>>>>>> framework,
>>>>>>>>>>>
>>>>>>>>>>> extract
>>>>>>>>>>>
>>>>>>>>>> it somewhere and use extracted file to perform the build *[second
>>>>>>>>>>
>>>>>>>>>>> problem:
>>>>>>>>>>>
>>>>>>>>>> is this possible?]*
>>>>>>>>>>
>>>>>>>>>>> Any help is highly appreciated
>>>>>>>>>>>
>>>>>>>>>>> [1]
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>   https://svn.apache.org/viewvc/openmeetings/trunk/
>>>>>>>>>>>
>>>>>>>>>>>  singlewebapp/build.xml?view=markup
>>>>>>>>>>
>>>>>>>>>> [2] https://github.com/Red5/red5-server
>>>>>>>>>>
>>>>>>>>>>> --
>>>>>>>>>>> WBR
>>>>>>>>>>> Maxim aka solomax
>>>>>>>>>>>
>>>>>>>>>>> --
>>>>>>>>>>> Baptiste <Batmat> MATHUS - http://batmat.net
>>>>>>>>>>> Sauvez un arbre,
>>>>>>>>>>> Mangez un castor ! nbsp;!
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>  --
>>>>>>>>>
>>>>>>>> Ron Wheeler
>>>>>>>> President
>>>>>>>> Artifact Software Inc
>>>>>>>> email: rwheeler@artifact-software.com
>>>>>>>> skype: ronaldmwheeler
>>>>>>>> phone: 866-970-2435, ext 102
>>>>>>>>
>>>>>>>>
>>>>>>>> ------------------------------------------------------------
>>>>>>>> ---------
>>>>>>>> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
>>>>>>>> For additional commands, e-mail: users-help@maven.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>  --
>>>>>>> WBR
>>>>>>> Maxim aka solomax
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>  --
>>>>> Ron Wheeler
>>>>> President
>>>>> Artifact Software Inc
>>>>> email: rwheeler@artifact-software.com
>>>>> skype: ronaldmwheeler
>>>>> phone: 866-970-2435, ext 102
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
>>>>> For additional commands, e-mail: users-help@maven.apache.org
>>>>>
>>>>>
>>>>>
>>>> --
>>>> WBR
>>>> Maxim aka solomax
>>>>
>>> -----------------
>>> Author, Getting Started with Apache Maven <
>>> http://www.packtpub.com/getting-started-with-apache-maven/video>
>>>
>>> Come read my webnovel, Take a Lemon <http://www.takealemon.com>,
>>> and listen to the Misfile radio play <
>>> http://www.fuzzyfacetheater.com/misfile/>!
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>
>
> --
> Ron Wheeler
> President
> Artifact Software Inc
> email: rwheeler@artifact-software.com
> skype: ronaldmwheeler
> phone: 866-970-2435, ext 102
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
> For additional commands, e-mail: users-help@maven.apache.org
>
>


-- 
WBR
Maxim aka solomax

--001a11c1f3ded835f604f82f77fa--

