From users-return-136065-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Thu Apr  3 00:27:23 2014
Return-Path: <users-return-136065-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2852E10463
	for <apmail-maven-users-archive@www.apache.org>; Thu,  3 Apr 2014 00:27:23 +0000 (UTC)
Received: (qmail 70469 invoked by uid 500); 3 Apr 2014 00:27:15 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 70378 invoked by uid 500); 3 Apr 2014 00:27:15 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 70366 invoked by uid 99); 3 Apr 2014 00:27:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2014 00:27:14 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=FORGED_YAHOO_RCVD,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of its_toasted@yahoo.com designates 98.138.90.154 as permitted sender)
Received: from [98.138.90.154] (HELO nm6-vm2.bullet.mail.ne1.yahoo.com) (98.138.90.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Apr 2014 00:27:08 +0000
Received: from [98.138.101.129] by nm6.bullet.mail.ne1.yahoo.com with NNFMP; 03 Apr 2014 00:26:45 -0000
Received: from [98.138.84.45] by tm17.bullet.mail.ne1.yahoo.com with NNFMP; 03 Apr 2014 00:26:45 -0000
Received: from [127.0.0.1] by smtp113.mail.ne1.yahoo.com with NNFMP; 03 Apr 2014 00:26:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1396484805; bh=cj9QlGTmm8ipUm0+ociUwERP3ehOS3GJplkKj+ViMrE=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:X-Rocket-Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=PrHnjv9ATHqFhA5e53IePTVABqF7ucb4F+QJ2Kz2cpYGwZ1je2KMJFCFVaiNLUPhGCRKoGjnrwfLtpbqvWA+PZyMaDhQm2huyati99GaZlHXmxlR2Y+iL/h6PSw/ayrKc6DpmJS1MreGBxryjiq/ZIZ/IEagJWDYIV9/pS+z8Lw=
X-Yahoo-Newman-Id: 460613.51579.bm@smtp113.mail.ne1.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: 5pNDj9wVM1mUj_jgeQCvn9Q6jtyuFQtScbOR5MzxLVNYjBw
 0G24vWmgoA5Hr5ztQVbfopwKVCB4MnM9_.GPqOhYsgBuZJ1OAY1o_yNsayRV
 gPJv61s_NVuOZ6k3iANhvo2fnvTq7Igy3WjHcBydXBwvXjRJsbU66pOaE6b4
 c39_ae36EBp8fUh29e._Y2blyX10rEaucL6RMqEf.HoqG8RB6pMl2oYkGoMC
 ZPZNu_DTWK_qJ7Y7ZkSRKoY9OddQebhvOYoWVkR0EIrhCt5Pmzmg0uurPTLi
 inxFDdlWTBKB1.8b5p_IxUntCgd_41nPPaKJ4U8OHFdKHZyXGq5RPDlURf.v
 kGQ2FTcrChxHOjzFt5oo54ajI.lJFQu46ZKLduDG29Y68OxudhRKHG2zy6Vi
 odKGYS6mhMUGy62TiXwRYxwgUT1jRiND5OzAoTcDVGF9j_.u5Io84Lo7pkXV
 bBlolIkH30OgDr.jJO_IVACX59zkTYUPh2DANsYeW_SxT5ceM0AIycSaeUb9
 m8fsLwWwv75Rn1HxC7qyyNWqEG1EXwtYdjKDvwyWihhI_L3BvPpNTvcYEKhQ
 22ZwiaFBWUVkok947xsSysiYiXnr6VzT.ii8wks0mpw7erH4S.4A6Sni8_2i
 B.Kdu9VyAMv3t2R4cqk38L6ownWcfffCJJAMBED7Y75otCuQHFOiaiSe_vpy
 K._HElwiTPmql26rmlF0ZpXQK9GKjIh6fgN.SLBtyJRw0Lk2BaA--
X-Yahoo-SMTP: PKuT8k2swBCeFOHzkGy5rTOUTa2hBxlR
X-Rocket-Received: from [127.0.0.1] (its_toasted@108.13.36.11 with plain [63.250.193.228])
        by smtp113.mail.ne1.yahoo.com with SMTP; 02 Apr 2014 17:26:45 -0700 PDT
Message-ID: <533CAA8F.3030807@yahoo.com>
Date: Wed, 02 Apr 2014 17:25:51 -0700
From: Mark Eggers <its_toasted@yahoo.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:24.0) Gecko/20100101 Thunderbird/24.4.0
MIME-Version: 1.0
To: Maven Users List <users@maven.apache.org>
Subject: Enforcer plugin
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 140402-5, 04/02/2014), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Folks,

I've gotten my classifier artifact to build and install in our local 
repository. Specifying the classifier gets the appropriate artifact, and 
removing the classifier gets the [other] appropriate artifact.

Now I'm a bit paranoid that the artifact with the classifier will leak 
out into other releases, so I thought I would write an enforcer rule.

I thought that the following would work:

<bannedDependencies>
     <excludes>
         <exclude>org.mdeggers:*:*:*:*:DEBUG</exclude>
     </excludes>
</bannedDependencies>

based on:

http://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html

While this certainly blocked the following dependency:

<dependency>
     <groupId>org.mdeggers</groupId>
     <artifactId>SampleBuild</artifactId>
     <version>1.5</version>
     <type>war</type>
     <classifier>DEBUG</classifier>
</dependency>

with the message:
Found Banned Dependency: org.mdeggers:SampleBuild:war:DEBUG:1.5

It also blocked the following dependency:

<dependency>
     <groupId>org.mdeggers</groupId>
     <artifactId>SampleBuild</artifactId>
     <version>1.5</version>
     <type>war</type>
</dependency>

with the message:
Found Banned Dependency: org.mdeggers:SampleBuild:war:1.5

This I did not expect. The messages are also a bit suspect in that they 
don't match the pattern given in the documentation.

I looked on JIRA and found the following (based on another thread):

http://jira.codehaus.org/browse/MENFORCER-74
http://jira.codehaus.org/browse/MENFORCER-75
http://jira.codehaus.org/browse/MENFORCER-72

These are all closed with a 'fixed' designation for release 1.3.

I'm using version 1.3.1

However, I briefly looked at the code here:

http://svn.apache.org/viewvc/maven/enforcer/tags/enforcer-1.3.1/enforcer-rules/src/main/java/org/apache/maven/plugins/enforcer/BannedDependencies.java?revision=1502671&view=markup

and classifier does not seem to have made it in.

Have I walked through this correctly? If so, is there a fix (other than 
not using classifiers, or just hoping that a DEBUG classifier doesn't 
make it into a release)?

Thanks,
Mark

/mde/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


