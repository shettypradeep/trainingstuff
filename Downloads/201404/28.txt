From users-return-136055-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Apr  2 14:09:35 2014
Return-Path: <users-return-136055-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD93E1070B
	for <apmail-maven-users-archive@www.apache.org>; Wed,  2 Apr 2014 14:09:34 +0000 (UTC)
Received: (qmail 64848 invoked by uid 500); 2 Apr 2014 14:09:31 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 64296 invoked by uid 500); 2 Apr 2014 14:09:30 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 64279 invoked by uid 99); 2 Apr 2014 14:09:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2014 14:09:26 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of eugen.rabii@gmail.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2014 14:09:22 +0000
Received: from [192.168.236.26] (helo=sam.nabble.com)
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <eugen.rabii@gmail.com>)
	id 1WVLqe-0003vO-1k
	for users@maven.apache.org; Wed, 02 Apr 2014 07:09:00 -0700
Date: Wed, 2 Apr 2014 07:09:00 -0700 (PDT)
From: eugene <eugen.rabii@gmail.com>
To: users@maven.apache.org
Message-ID: <1396447740034-5790400.post@n5.nabble.com>
In-Reply-To: <CALy+7UmJnmf3GNEEDEzE0-hWPMmNFvtkZ8Ub-zr3CfZO-HanWQ@mail.gmail.com>
References: <1396438658817-5790393.post@n5.nabble.com> <CALy+7UmJnmf3GNEEDEzE0-hWPMmNFvtkZ8Ub-zr3CfZO-HanWQ@mail.gmail.com>
Subject: Re: Scanning for Projects... before
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I want to delete a directory from local repo before building a multi-module
project. 
I wrote a plugin for that and the directory get deleted indeed, but it gets
deleted too late.

What I mean: my project "Project" has a dependency "com.test" that is not
present in local repo. I run mvn clean install. What happens is that maven
is scanning for projects and all the dependencies that it needs, downloading
them (I guess though artifact resolver) to my local repo. Then my plugin is
hooked to the "pre-clean" phase and it removes the directory
".m2/repository/com". Now when "Project" actually needs dependency
"com.test" for the compile, this dependency is not present (my plugin
removed it) and maven fails.

Why do I have such a weird case? Imagine I have releases artifacts that
actually do not change their version, but do change their contents. Maven
will not update my local repo unless their are snapshots, right? Well
snapshot is not an option right now (due to corporate things).

That is why I first need to remove "com.test" then kick in the artifact
resolver.

Thank you,
Eugene.






--
View this message in context: http://maven.40175.n5.nabble.com/Scanning-for-Projects-before-tp5790393p5790400.html
Sent from the Maven - Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


