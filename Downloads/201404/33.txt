From users-return-136060-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Wed Apr  2 14:32:21 2014
Return-Path: <users-return-136060-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 530C0107BF
	for <apmail-maven-users-archive@www.apache.org>; Wed,  2 Apr 2014 14:32:21 +0000 (UTC)
Received: (qmail 22029 invoked by uid 500); 2 Apr 2014 14:32:18 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 20854 invoked by uid 500); 2 Apr 2014 14:32:14 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 20739 invoked by uid 99); 2 Apr 2014 14:32:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2014 14:32:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [212.227.126.131] (HELO moutng.kundenserver.de) (212.227.126.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Apr 2014 14:32:07 +0000
Received: from [192.168.100.71] (mx01.assentis.com [212.94.34.196])
	by mrelayeu.kundenserver.de (node=mreue005) with ESMTP (Nemesis)
	id 0M2Yvh-1XLWuo3IIv-00sL5C; Wed, 02 Apr 2014 16:31:43 +0200
Message-ID: <533C1F4F.8050207@landrus.de>
Date: Wed, 02 Apr 2014 16:31:43 +0200
From: Christian Domsch <mail@landrus.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:24.0) Gecko/20100101 Thunderbird/24.4.0
MIME-Version: 1.0
To: Maven Users List <users@maven.apache.org>
Subject: Re: Scanning for Projects... before
References: <1396438658817-5790393.post@n5.nabble.com> <CALy+7UmJnmf3GNEEDEzE0-hWPMmNFvtkZ8Ub-zr3CfZO-HanWQ@mail.gmail.com> <1396447740034-5790400.post@n5.nabble.com> <533C1AAC.4030402@landrus.de> <1396448081542-5790402.post@n5.nabble.com> <533C1C70.8030806@landrus.de> <533C1DBE.1030106@gmail.com>
In-Reply-To: <533C1DBE.1030106@gmail.com>
Content-Type: multipart/alternative;
 boundary="------------070700070708080405030809"
X-Provags-ID: V02:K0:5E+mZil5MDKI1BujWRpTKOPXA47Ol7SWGtOn8o8SaBl
 Weq39ToWjwXWboqXE8cYxMRibsPhYvghgm+TEIuEfbZS0aFSUX
 q3YlsrxExgIXfRIu5L4Qc0cqsNn5EEgeyJauESKSNsqKEj7j6Q
 UwGep/oKkSzwv5YsIJIXEtRxgsS5hdTJRSmYPWURg7fE+tq0aW
 bU6WGnKmcQdPj6rSgLTQ4JaTN3A+N7KLjofhy++PDWjxzfAySh
 Ytp6IRCA6SWkbcmCj6WLSsBWaZSZI2f9xxb/atFD1+P6bHwh3e
 zkx07eNdBzeNboOYn4aES4h0u+CoHX1qrubXxdPrTjIOESrCr+
 m1T1KqsT7xsl547Wc+sY=
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070700070708080405030809
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

And I think here is the problem. As far as I understand maven, what 
happens with your setup is that maven recognizes the dependency to 
com.test, then you delete it, after that maven treis to use it e.g. in 
the compile step which leads to the error. And the reason is that 
through your setup you call it everytime a project is run in the reactor.

What I meant, is that you create a regular project, through dependency 
mechanisms ensure that it is the very first project to be run (probably 
multiple ways to achieve that) and so the deletion of com.test is only 
attempted once. Every other project afterwards should then try to 
download the plugin because it is not found in the local repo.

Maybe may way is flawed as well, since my idea suggests that each 
project scans the repo uncached.

Christian

On 02.04.2014 16:25, eugene wrote:
> Well.. there are a lot of projects like this.. My plugin is actually
> inside the maven's super pom from maven-model-builder jar
> And it gets invoked once per project (even if there are multiple modules)
>
> I actually wanted a solution that will not trigger any changes in my poms..
>
> On 4/2/14, 5:20 PM, Christian Domsch [via Maven] wrote:
>> Have you tried creating a dependency for you rproject, that does that
>> deleting? If I am not mistaken, dependencies should be downloaded (or
>> attempted to download) for every project in a reactor run. So lets say
>> your project is P and the newly introduced project is M then it would
>> look like:
>>
>> /-+-M (deletes com.test in any of its goals...)
>>     |
>>     +-P has dependency on com.test and M
>>
>> Christian
>>
>>
>> On 02.04.2014 16:14, eugene wrote:
>>
>>> I could not agree more if only I had a choice :) Thx for the comment
>>>
>>>
>>>
>>> --
>>> View this message in context:
>> http://maven.40175.n5.nabble.com/Scanning-for-Projects-before-tp5790393p5790402.html
>>> Sent from the Maven - Users mailing list archive at Nabble.com.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: [hidden email]
>> </user/SendEmail.jtp?type=node&node=5790403&i=0>
>>> For additional commands, e-mail: [hidden email]
>> </user/SendEmail.jtp?type=node&node=5790403&i=1>
>>
>>
>> ------------------------------------------------------------------------
>> If you reply to this email, your message will be added to the
>> discussion below:
>> http://maven.40175.n5.nabble.com/Scanning-for-Projects-before-tp5790393p5790403.html
>>
>> To unsubscribe from Scanning for Projects... before, click here
>> <http://maven.40175.n5.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5790393&code=ZXVnZW4ucmFiaWlAZ21haWwuY29tfDU3OTAzOTN8MTA1NjEzNjg3MA==>.
>> NAML
>> <http://maven.40175.n5.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>>
>
>
>
>
> --
> View this message in context: http://maven.40175.n5.nabble.com/Scanning-for-Projects-before-tp5790393p5790404.html
> Sent from the Maven - Users mailing list archive at Nabble.com.


--------------070700070708080405030809--

