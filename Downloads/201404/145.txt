From users-return-136078-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Fri Apr  4 07:55:27 2014
Return-Path: <users-return-136078-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B88AF105F1
	for <apmail-maven-users-archive@www.apache.org>; Fri,  4 Apr 2014 07:55:27 +0000 (UTC)
Received: (qmail 89392 invoked by uid 500); 4 Apr 2014 07:55:26 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 87773 invoked by uid 500); 4 Apr 2014 07:55:18 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 87736 invoked by uid 99); 4 Apr 2014 07:55:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2014 07:55:13 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stephen.alan.connolly@gmail.com designates 209.85.220.44 as permitted sender)
Received: from [209.85.220.44] (HELO mail-pa0-f44.google.com) (209.85.220.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Apr 2014 07:55:07 +0000
Received: by mail-pa0-f44.google.com with SMTP id bj1so3096235pad.17
        for <users@maven.apache.org>; Fri, 04 Apr 2014 00:54:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Vp4Es/3EgbjO3GL2idfZeDL8kXglTtNqlQBZV+Jys1k=;
        b=CFbnKMFZUipsU6PefgEtdKLdV4f3GPb2uVA+7No83pwPzowg5yc69Doqd2YupDsC1e
         D8EGuIjpHTV/dmCk2YNTqTrp0LUhl1AMT6uuJLEG+L15O+aglG76EAxNrcOW0Ig2AmY3
         h7PRiP7BpzhEKSQLQeIKGlgNFCERt0ARBI3lmBV6VFRUjGtHXOpAh1UfX85oPfbFA0Xi
         BTX8Zh2W9ThHysfbMAgywF84QJpUXSGMPVI6d24dQNJW53pAkMgzs/yKphEPVOofDmrJ
         pxqW88zhu0Sy0djrvNhk172QrPtzXheZNVnH16dfSlBE1gzTRQkROonbAJxF3wM/pxlQ
         fHIQ==
MIME-Version: 1.0
X-Received: by 10.68.229.106 with SMTP id sp10mr13348637pbc.23.1396598085450;
 Fri, 04 Apr 2014 00:54:45 -0700 (PDT)
Received: by 10.68.201.167 with HTTP; Fri, 4 Apr 2014 00:54:45 -0700 (PDT)
In-Reply-To: <533E5755.9030007@gmail.com>
References: <1396438658817-5790393.post@n5.nabble.com>
	<CALy+7UmJnmf3GNEEDEzE0-hWPMmNFvtkZ8Ub-zr3CfZO-HanWQ@mail.gmail.com>
	<1396447740034-5790400.post@n5.nabble.com>
	<CADN69ymfTp2iwObyCuq1qiPntK5B-v-qozRMYwkz4-XfYxRR3A@mail.gmail.com>
	<CALy+7U=88Ao5Q4BaJbFM9F7djYEAf-QxmVKeT88GKfFHiCaq4g@mail.gmail.com>
	<533E5755.9030007@gmail.com>
Date: Fri, 4 Apr 2014 08:54:45 +0100
Message-ID: <CA+nPnMzF9UAUwHJJSWRRNiuVxcdq+VadCGu=9Mti_qv9RU3ygQ@mail.gmail.com>
Subject: Re: Scanning for Projects... before
From: Stephen Connolly <stephen.alan.connolly@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: multipart/alternative; boundary=047d7b162c09c702f804f632d4e5
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b162c09c702f804f632d4e5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

There is a *very* hacky way... I hesitate to suggest it... but as you seem
stuck!

Your "delete" mojo can take a wander through the dependency tree and record
the details of all dependencies from the tree that will be affected by the
deleting. You will need to do this for the entire set of reactor projects.
You will need to do this only when you are the first reactor project in the
reactor... for all other projects you will just do a no-op and return
immediately.

Then you do the delete.

Then you request resolution of all the dependencies that were deleted, and
you tell Maven to force the resolution (i.e. ignore the internal state that
says it downloaded them already) There is a flag you can set that will do
the forcing... but as this is an unrecommended HACK, you shall have to find
that flag yourself.

Thus when you mojo is finished executing, Maven's internal state that says
it downloaded these dependencies already will be consistent with the
on-disk state (because the files are present) and all will be right with
the world.

Beware! There be dragons!

Dragon 1: If any of the dependencies you re-download have a different
dependency list... you will be burned

Dragon 2: If any of the dependencies you re-download have a dependency
within the reactor... you will be burned

There are more dragons... and you may find the rug pulled out from under
you if you upgrade Maven...

Beware!


On 4 April 2014 07:55, eugene <eugen.rabii@gmail.com> wrote:

> I think we have found one...
>
> We can create a wrapper around MavenCli and replace it in m2.conf...
>
> On 4/2/14, 8:35 PM, Wayne Fay [via Maven] wrote:
> > >> repo unless their are snapshots, right? Well snapshot is not an opti=
on
> > >> right now (due to corporate things).
> > >
> > > It is one of Maven's cardinal assumptions that release versions are
> > > immutable. If you need different contents, use either: A) a different
> >
> > As Curtis already mentioned, you are unlikely to find a solution by
> > continuing to head in this direction. Find another approach - most
> > likely one that involves a process running outside of Maven before
> > your build kicks off.
> >
> > Wayne
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: [hidden email]
> > </user/SendEmail.jtp?type=3Dnode&node=3D5790420&i=3D0>
> > For additional commands, e-mail: [hidden email]
> > </user/SendEmail.jtp?type=3Dnode&node=3D5790420&i=3D1>
> >
> >
> >
> > -----------------------------------------------------------------------=
-
> > If you reply to this email, your message will be added to the
> > discussion below:
> >
> http://maven.40175.n5.nabble.com/Scanning-for-Projects-before-tp5790393p5=
790420.html
> >
> > To unsubscribe from Scanning for Projects... before, click here
> > <
> http://maven.40175.n5.nabble.com/template/NamlServlet.jtp?macro=3Dunsubsc=
ribe_by_code&node=3D5790393&code=3DZXVnZW4ucmFiaWlAZ21haWwuY29tfDU3OTAzOTN8=
MTA1NjEzNjg3MA=3D=3D
> >.
> > NAML
> > <
> http://maven.40175.n5.nabble.com/template/NamlServlet.jtp?macro=3Dmacro_v=
iewer&id=3Dinstant_html%21nabble%3Aemail.naml&base=3Dnabble.naml.namespaces=
.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.te=
mplate.NodeNamespace&breadcrumbs=3Dnotify_subscribers%21nabble%3Aemail.naml=
-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.n=
aml
> >
> >
>
>
>
>
>
> --
> View this message in context:
> http://maven.40175.n5.nabble.com/Scanning-for-Projects-before-tp5790393p5=
790474.html
> Sent from the Maven - Users mailing list archive at Nabble.com.
>

--047d7b162c09c702f804f632d4e5--

