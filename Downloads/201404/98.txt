From users-return-136194-apmail-maven-users-archive=maven.apache.org@maven.apache.org  Fri Apr 18 15:39:11 2014
Return-Path: <users-return-136194-apmail-maven-users-archive=maven.apache.org@maven.apache.org>
X-Original-To: apmail-maven-users-archive@www.apache.org
Delivered-To: apmail-maven-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 007DB1134C
	for <apmail-maven-users-archive@www.apache.org>; Fri, 18 Apr 2014 15:39:11 +0000 (UTC)
Received: (qmail 62971 invoked by uid 500); 18 Apr 2014 15:39:05 -0000
Delivered-To: apmail-maven-users-archive@maven.apache.org
Received: (qmail 62908 invoked by uid 500); 18 Apr 2014 15:39:04 -0000
Mailing-List: contact users-help@maven.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:users-unsubscribe@maven.apache.org>
List-Help: <mailto:users-help@maven.apache.org>
List-Post: <mailto:users@maven.apache.org>
List-Id: "Maven Users List" <users.maven.apache.org>
Reply-To: "Maven Users List" <users@maven.apache.org>
Delivered-To: mailing list users@maven.apache.org
Received: (qmail 62889 invoked by uid 99); 18 Apr 2014 15:39:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2014 15:39:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of maven.2.user@gmail.com designates 209.85.216.49 as permitted sender)
Received: from [209.85.216.49] (HELO mail-qa0-f49.google.com) (209.85.216.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Apr 2014 15:38:59 +0000
Received: by mail-qa0-f49.google.com with SMTP id j7so1631031qaq.8
        for <users@maven.apache.org>; Fri, 18 Apr 2014 08:38:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=dTJ1s9NQRjqPjb5G4xT++eUXqva8SMxTYrfvChAnFmc=;
        b=yhPrzsoEpl6eGCs2Qnq2zG5AhRhV3s08QGW8d155+76QJoVNCbQTtDv3iS/Pk7haWF
         DkJo3rIzmfG/WmhVYXgIln5uIwEcEb619UlAP28gq8sQjE9dwWMldx7ZWL/dfU5/JLV8
         9twjtgtkWKir7S79cuDV7NTFg0DoGH67xAddobMJanNuhYPD9FIafpFdtlr67dY31ddS
         GEi54RcijB8rjgEV0J6IcrkBmBpch/KKVDUp0eCKVv7VG+yY6h5ieeBcR5+4Xh9TDUE9
         eM2Oy6RSJbPpnJjxJucq1I4Kn7ezNA1Sgsw8gDLxnokWYAfgmD9Wze8s5F/o8J3obGdF
         XuZQ==
MIME-Version: 1.0
X-Received: by 10.224.54.4 with SMTP id o4mr19653403qag.74.1397835516725; Fri,
 18 Apr 2014 08:38:36 -0700 (PDT)
Received: by 10.140.106.3 with HTTP; Fri, 18 Apr 2014 08:38:36 -0700 (PDT)
In-Reply-To: <CA+nPnMy691eXxCmxMrc=C1uzZnSwYu0ZxLAhfKSq8HJsUDYKxA@mail.gmail.com>
References: <CAChPNbexJ3vix-HdFNiKSEQrOYMW+vjxHknCn7-fPp0LsKxLBw@mail.gmail.com>
	<CAEayHEPxqeWPyCgR1bmoGx-oGxr-TvkRxU4JewuY8aXzt80OHg@mail.gmail.com>
	<CA+nPnMy691eXxCmxMrc=C1uzZnSwYu0ZxLAhfKSq8HJsUDYKxA@mail.gmail.com>
Date: Fri, 18 Apr 2014 11:38:36 -0400
Message-ID: <CAChPNbfdTVUkN63=3C1i94fDKPo9jrOgrBf_zjhWVjJWdUwNGQ@mail.gmail.com>
Subject: Re: Struggling to release:perform with git and deployer key
From: Maven User <maven.2.user@gmail.com>
To: Maven Users List <users@maven.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Stephen - cool - I _do_ have that and am pointing at the file in that path.

Again, I'm using the "managed file" plugin to drop down that private key.

Strangely, when I run this command:

ssh -vT git@github.com

I get back:
...
debug1: Connection established.
debug1: identity file /srv/jenkins/.ssh/id_rsa type 1
...
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /srv/jenkins/.ssh/id_rsa
debug1: Authentications that can continue: publickey
debug1: Trying private key: /srv/jenkins/.ssh/id_dsa
debug1: Trying private key: /srv/jenkins/.ssh/id_ecdsa
debug1: No more authentication methods to try.
Permission denied (publickey).

Any more suggestions?


On Fri, Apr 18, 2014 at 11:31 AM, Stephen Connolly
<stephen.alan.connolly@gmail.com> wrote:
>     <server>
>
>       <id>...</id>
>
>       <username>...</username>
>
>       <password>...</password>
>
>       <privateKey>/home/.../.ssh/id_rsa</privateKey>
>
>     </server>
>
>
> On 18 April 2014 16:27, Thomas Broyer <t.broyer@gmail.com> wrote:
>
>> I think by default Maven calls the command-line Git, so it uses the
>> ~/.ssh/id_rsa, and not the configuration from your settings.xml.
>> I have no idea if what you're trying to do is possible with Maven. Maybe
>> the maven-scm-provider-jgit would use the settings.xml configuration, bu=
t I
>> have no idea how to configure Maven to use it.
>>
>>
>> On Fri, Apr 18, 2014 at 3:45 PM, Maven User <maven.2.user@gmail.com>
>> wrote:
>>
>> > Hi all -
>> >
>> > I'm really struggling with this.
>> >
>> > My git push portion of the maven release process just is quitting with
>> > this:
>> >
>> > 00:01:29.803 Provider message:
>> > 00:01:29.803 The git-push command failed.
>> > 00:01:29.803 Command output:
>> > 00:01:29.803 Permission denied (publickey).
>> > 00:01:29.803 fatal: The remote end hung up unexpectedly
>> > 00:01:29.803
>> > 00:01:29.803 cause : Unable to commit files
>> > 00:01:29.803 Provider message:
>> > 00:01:29.803 The git-push command failed.
>> > 00:01:29.803 Command output:
>> > 00:01:29.803 Permission denied (publickey).
>> > 00:01:29.803 fatal: The remote end hung up unexpectedly
>> >
>> > I have the key stored in Jenkins as a "managed file" (as part of that
>> > plugin).  So the build has an early step where that key is written to
>> > disk.
>> >
>> > Then I've used the settings.xml to specify which key to use (pointing
>> > at that location just above).
>> >
>> >  <server>
>> >       <id>github.com</id>
>> >       <username>someusername</username>
>> >       <privateKey>/srv/jenkins/.ssh/somekeyname</privateKey>
>> >       <filePermissions>664</filePermissions>
>> >       <directoryPermissions>775</directoryPermissions>
>> >       <configuration></configuration>
>> >     </server>
>> >
>> >   <scm>
>> >       <connection>scm:git:git@github.com:
>> > ${companyid}/${project.artifactId}.git</connection>
>> >       <url>scm:git:git@github.com:
>> > ${companyid}/${project.artifactId}.git</url>
>> >       <developerConnection>scm:git:git@github.com:
>> > ${companyid}/${project.artifactId}.git</developerConnection>
>> >       <tag>HEAD</tag>
>> >    </scm>
>> >
>> > What am I doing wrong?
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
>> > For additional commands, e-mail: users-help@maven.apache.org
>> >
>> >
>>
>>
>> --
>> Thomas Broyer
>> /t=C9=94.ma.b=CA=81wa.je/ <http://xn--nna.ma.xn--bwa-xxb.je/> <
>> http://xn--nna.ma.xn--bwa-xxb.je/>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@maven.apache.org
For additional commands, e-mail: users-help@maven.apache.org


